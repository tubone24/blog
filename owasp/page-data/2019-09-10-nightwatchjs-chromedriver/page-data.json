{"componentChunkName":"component---src-templates-blog-post-tsx","path":"/2019-09-10-nightwatchjs-chromedriver","result":{"data":{"content":{"edges":[{"node":{"id":"7c7484ef-7c2a-5338-a24e-f34c7482dd32","excerpt":"エラーをよく読もう・・ 前回書いた記事ChromeDriverがGoogleChrome v76 に対応していないらしい。の解決編です。 出てくるエラーでググってもそれっぽいものが出てこないので苦しい戦いでしたが、 そもそもchromedriver…","fields":{"slug":"2019-09-10-nightwatchjs-chromedriver"},"frontmatter":{"id":null,"title":"Nightwatch.jsでE2Eテストを回したときにうまく動かないたった一つの理由","slug":"2019-09-10-nightwatchjs-chromedriver","date":"2019-09-10T13:00:00.411Z","headerImage":"https://i.imgur.com/MyBxJCZ.png","tags":["自動テスト","E2Eテスト","ChromeDriver","Nightwatch.js"]}}}]}},"pageContext":{"id":"7c7484ef-7c2a-5338-a24e-f34c7482dd32","index":83,"repHtml":"<p>エラーをよく読もう・・</p>\n<p>前回書いた記事<a href=\"https://blog.tubone-project24.xyz/2019-09-03-chromedriver\" target=\"_blank\" rel=\"noopener noreferrer\">ChromeDriverがGoogleChrome v76 に対応していないらしい。</a>の解決編です。</p>\n<p>出てくるエラーでググってもそれっぽいものが出てこないので苦しい戦いでしたが、</p>\n<p>そもそもchromedriverを利用するプログラム<a href=\"https://nightwatchjs.org/\" target=\"_blank\" rel=\"noopener noreferrer\"><strong>Nightwatch.js</strong></a>に思考が至らなかったのがまずかったです。</p>\n<p>それでは解決編をどうぞ。</p>\n<h2 id=\"table-of-contents\" style=\"position:relative;\"><a href=\"#table-of-contents\" aria-label=\"table of contents permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Table of Contents</h2>\n<div class=\"toc\">\n<ul>\n<li><a href=\"#%E3%82%A8%E3%83%A9%E3%83%BC%E3%81%AE%E3%81%8A%E3%81%95%E3%82%89%E3%81%84\">エラーのおさらい</a></li>\n<li><a href=\"#%E3%82%82%E3%81%86%E5%B0%91%E3%81%97%E3%81%A1%E3%82%83%E3%82%93%E3%81%A8%E3%82%A8%E3%83%A9%E3%83%BC%E3%82%92%E8%A6%8B%E3%81%A6%E3%81%BF%E3%82%8B\">もう少しちゃんとエラーを見てみる</a></li>\n<li><a href=\"#chromedriver246628388%E3%81%AE%E8%AC%8E\">chromedriver=2.46.628388の謎</a></li>\n<li><a href=\"#nightwatchjs%E3%81%AEchrome%E3%83%86%E3%82%B9%E3%83%88%E3%81%AE%E6%8C%99%E5%8B%95\">Nightwatch.jsのChromeテストの挙動</a></li>\n<li><a href=\"#%E8%A9%A6%E3%81%97%E3%81%ABnode_module%E3%81%AE%E4%B8%AD%E3%81%AB%E5%85%A5%E3%81%A3%E3%81%A6%E3%81%84%E3%82%8Bchromedriver%E3%82%92%E6%9C%80%E6%96%B0%E3%81%AE%E3%82%82%E3%81%AE%E3%81%A8%E7%BD%AE%E3%81%8D%E6%8F%9B%E3%81%88%E3%82%8B\">試しにnode_moduleの中に入っているChromeDriverを最新のものと置き換える</a></li>\n<li><a href=\"#%E5%AE%9F%E8%A1%8C\">実行！</a></li>\n<li><a href=\"#%E3%81%82%E3%81%A8%E3%81%8C%E3%81%8D\">あとがき</a></li>\n</ul>\n</div>\n<h2 id=\"エラーのおさらい\" style=\"position:relative;\"><a href=\"#%E3%82%A8%E3%83%A9%E3%83%BC%E3%81%AE%E3%81%8A%E3%81%95%E3%82%89%E3%81%84\" aria-label=\"エラーのおさらい permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>エラーのおさらい</h2>\n<p>当方ではVue.js(TypeScript + Vuex)でフロントエンドアプリをこじんまり作っていてCircleCIでE2Eテストを回していましたが、急にFailedが出るようになり、CIが通らなくなりました。</p>\n<p>CircleCIで出ているエラーを見てみると次のようなエラーが出ていました。</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">{ value:\n   { message:\n      'session not created: Chrome version must be between 71 and 75\\n  (Driver info: chromedriver=2.46.628388 (4a34a70827ac54148e092aafb70504c4ea7ae926),platform=Linux 4.15.0-1043-aws x86_64) (WARNING: The server did not provide any stacktrace information)\\nCommand duration or timeout: 668 milliseconds\\nBuild info: version: \\'3.141.59\\', revision: \\'e82be7d358\\', time: \\'2018-11-14T08:25:53\\'\\nSystem info: host: \\'5d045d2f1712\\', ip: \\'192.168.32.3\\', os.name: \\'Linux\\', os.arch: \\'amd64\\', os.version: \\'4.15.0-1043-aws\\', java.version: \\'11.0.4\\'\\nDriver info: driver.version: unknown',\n     error: 'session not created' },\n  status: 33 }</code></pre></div>\n<p>本エラーを詳しく見ていくと、<strong>GoogleChromeのバージョンをv71～v75の間にしなさい</strong>というもので、いろいろなサイトを見るとChromeのバージョンアップに合わせて<strong>ChromeDriverのバージョンも上げないといけない</strong>、ということを知りました。</p>\n<p><a href=\"https://github.com/timgrossmann/InstaPy/issues/4800\" target=\"_blank\" rel=\"noopener noreferrer\">GitHub Issue #4800 Message: session not created: Chrome version must be between 71 and 75</a></p>\n<p>そこで、前回の記事内で下記のことを実施しました。</p>\n<ul>\n<li><a href=\"https://blog.tubone-project24.xyz/2019-09-03-chromedriver#chromedriver%E3%81%A8googlechrome%E3%81%AEversion%E3%82%92%E7%A2%BA%E8%AA%8D%E3%81%99%E3%82%8B\" target=\"_blank\" rel=\"noopener noreferrer\">ChromeDriverとGoogleChromeのVersionを確認する</a></li>\n<li><a href=\"https://blog.tubone-project24.xyz/2019-09-03-chromedriver#circleci%E3%81%AEdockerfile%E3%82%92%E7%A2%BA%E8%AA%8D%E3%81%97%E3%81%A6%E3%81%BF%E3%82%8B\" target=\"_blank\" rel=\"noopener noreferrer\">CircleCIのDockerfileを確認してみる</a></li>\n<li><a href=\"https://blog.tubone-project24.xyz/2019-09-03-chromedriver#chrome-beta%E3%81%AB%E5%A4%89%E3%81%88%E3%81%A6%E3%81%BF%E3%82%8B\" target=\"_blank\" rel=\"noopener noreferrer\">Chrome Betaに変えてみる (自前Build環境の作成)</a></li>\n</ul>\n<p>が、しかし結局直りませんでした。</p>\n<h2 id=\"もう少しちゃんとエラーを見てみる\" style=\"position:relative;\"><a href=\"#%E3%82%82%E3%81%86%E5%B0%91%E3%81%97%E3%81%A1%E3%82%83%E3%82%93%E3%81%A8%E3%82%A8%E3%83%A9%E3%83%BC%E3%82%92%E8%A6%8B%E3%81%A6%E3%81%BF%E3%82%8B\" aria-label=\"もう少しちゃんとエラーを見てみる permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>もう少しちゃんとエラーを見てみる</h2>\n<p>もう少しちゃんとエラーを見てみます。すると、あることに気が付きます。</p>\n<p><em><strong>ChromeBetaにバージョンアップしてChromeDriverもバージョンアップしたのにエラーメッセージに出ているChromeDriverのバージョンが想定のものと違う・・</strong></em></p>\n<p>自前Build環境の作成時に入れたChromeDriverのバージョンは<code class=\"language-text\">77.0.3865.40</code>でした。</p>\n<p>ちゃんとこちらはCIのログに出力されていまして、Chromeのバージョンとも合っています。</p>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"bash\"><pre style=\"counter-reset: linenumber 0\" class=\"language-bash line-numbers\"><code class=\"language-bash\">$ <span class=\"token comment\">#!/bin/bash -eo pipefail</span>\n  <span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"Node <span class=\"token variable\"><span class=\"token variable\">$(</span><span class=\"token function\">node</span> -v<span class=\"token variable\">)</span></span>\"</span>\n  <span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"NPM v<span class=\"token variable\"><span class=\"token variable\">$(</span><span class=\"token function\">npm</span> --version<span class=\"token variable\">)</span></span>\"</span>\n  chromedriver -v\n  google-chrome --version\n\nNode v10.16.3\nNPM v6.9.0\n<span class=\"gatsby-highlight-code-line\">ChromeDriver <span class=\"token number\">77.0</span>.3865.40 <span class=\"token punctuation\">(</span>f484704e052e0b556f8030b65b953dce96503217-refs/branch-heads/3865@<span class=\"token punctuation\">{</span>#442<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></span><span class=\"gatsby-highlight-code-line\">Google Chrome <span class=\"token number\">77.0</span>.3865.56 beta</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>ただエラーのほうでは <code class=\"language-text\">Driver info: chromedriver=2.46.628388</code> となっており明らかにバージョンが違います。</p>\n<h2 id=\"chromedriver246628388の謎\" style=\"position:relative;\"><a href=\"#chromedriver246628388%E3%81%AE%E8%AC%8E\" aria-label=\"chromedriver246628388の謎 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>chromedriver=2.46.628388の謎</h2>\n<p>ChromeDriverの<a href=\"https://chromedriver.chromium.org/downloads\" target=\"_blank\" rel=\"noopener noreferrer\">配布サイト</a>に行くと、2.46のChromeDriverは<strong>Supports Chrome v71-73</strong>なことがわかります。</p>\n<p>あれれ、おかしいぞ・・・。</p>\n<h2 id=\"nightwatchjsのchromeテストの挙動\" style=\"position:relative;\"><a href=\"#nightwatchjs%E3%81%AEchrome%E3%83%86%E3%82%B9%E3%83%88%E3%81%AE%E6%8C%99%E5%8B%95\" aria-label=\"nightwatchjsのchromeテストの挙動 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Nightwatch.jsのChromeテストの挙動</h2>\n<p>いよいよ怪しくなってきたので、エラーが出ていない箇所のCIログも追っていきます。</p>\n<p>すると <code class=\"language-text\">npm install</code> する際の動作ログに怪しい動作が見当たりました。</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">> chromedriver@2.46.0 install /home/circleci/workspace/node_modules/chromedriver\n> node install.js\n\nCurrent existing ChromeDriver binary is unavailable, proceding with download and extraction.\nDownloading from file:  https://chromedriver.storage.googleapis.com/2.46/chromedriver_linux64.zip\nSaving to file: /tmp/2.46/chromedriver/chromedriver_linux64.zip\nReceived 782K...\nReceived 1573K...\nReceived 2357K...\nReceived 3141K...\nReceived 3925K...\nReceived 4709K...\nReceived 5277K total.\nExtracting zip contents\nCopying to target path /home/circleci/workspace/node_modules/chromedriver/lib/chromedriver\nFixing file permissions\nDone. ChromeDriver binary available at /home/circleci/workspace/node_modules/chromedriver/lib/chromedriver/chromedriver</code></pre></div>\n<p>node_module内にChromeDriverをダウンロードしている??</p>\n<p><strong>まさか、Nightwatch.jsはこれを使っているのでは?? バージョンもあっているし</strong></p>\n<h2 id=\"試しにnode_moduleの中に入っているchromedriverを最新のものと置き換える\" style=\"position:relative;\"><a href=\"#%E8%A9%A6%E3%81%97%E3%81%ABnode_module%E3%81%AE%E4%B8%AD%E3%81%AB%E5%85%A5%E3%81%A3%E3%81%A6%E3%81%84%E3%82%8Bchromedriver%E3%82%92%E6%9C%80%E6%96%B0%E3%81%AE%E3%82%82%E3%81%AE%E3%81%A8%E7%BD%AE%E3%81%8D%E6%8F%9B%E3%81%88%E3%82%8B\" aria-label=\"試しにnode_moduleの中に入っているchromedriverを最新のものと置き換える permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>試しにnode_moduleの中に入っているChromeDriverを最新のものと置き換える</h2>\n<p>以前作った自前Bulid環境をふんだんに使ってみます。</p>\n<p>Dockerfileを次のように変更します。</p>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"dockerfile\"><pre style=\"counter-reset: linenumber 0\" class=\"language-dockerfile line-numbers\"><code class=\"language-dockerfile\"><span class=\"token comment\"># install chrome</span>\n\n<span class=\"gatsby-highlight-code-line\"><span class=\"token instruction\"><span class=\"token keyword\">RUN</span> curl --silent --show-error --location --fail --retry 3 --output /tmp/google-chrome-stable_current_amd64.deb https://dl.google.com/linux/direct/google-chrome-stable_current_amd64.deb <span class=\"token operator\">\\</span></span>    &amp;&amp; (sudo dpkg -i /tmp/google-chrome-stable_current_amd64.deb || sudo apt-get -fy install)  <span class=\"token operator\">\\</span>\n    &amp;&amp; rm -rf /tmp/google-chrome-stable_current_amd64.deb <span class=\"token operator\">\\</span>\n    &amp;&amp; google-chrome --version</span>\n\n<span class=\"token comment\">#  Install ChromeDriver</span>\n<span class=\"token instruction\"><span class=\"token keyword\">RUN</span> CHROME_VERSION=<span class=\"token string\">\"$(google-chrome --version)\"</span> <span class=\"token operator\">\\</span>\n    &amp;&amp; export CHROMEDRIVER_RELEASE=<span class=\"token string\">\"$(echo $CHROME_VERSION | sed 's/^Google Chrome //')\"</span> &amp;&amp; export CHROMEDRIVER_RELEASE=<span class=\"token variable\">${CHROMEDRIVER_RELEASE%%.*}</span> <span class=\"token operator\">\\</span>\n    &amp;&amp; CHROMEDRIVER_VERSION=$(curl --silent --show-error --location --fail --retry 4 --retry-delay 5 http://chromedriver.storage.googleapis.com/LATEST_RELEASE_<span class=\"token variable\">${CHROMEDRIVER_RELEASE}</span>) <span class=\"token operator\">\\</span>\n    &amp;&amp; curl --silent --show-error --location --fail --retry 4 --retry-delay 5 --output /tmp/chromedriver_linux64.zip <span class=\"token string\">\"http://chromedriver.storage.googleapis.com/$CHROMEDRIVER_VERSION/chromedriver_linux64.zip\"</span> <span class=\"token operator\">\\</span>\n    &amp;&amp; cd /tmp <span class=\"token operator\">\\</span>\n    &amp;&amp; unzip chromedriver_linux64.zip <span class=\"token operator\">\\</span>\n    &amp;&amp; rm -rf chromedriver_linux64.zip <span class=\"token operator\">\\</span>\n<span class=\"gatsby-highlight-code-line\">    &amp;&amp; sudo cp chromedriver /usr/local/bin/chromedriver <span class=\"token operator\">\\</span></span><span class=\"gatsby-highlight-code-line\">    &amp;&amp; sudo chmod +x chromedriver <span class=\"token operator\">\\</span></span>    &amp;&amp; sudo chmod +x /usr/local/bin/chromedriver <span class=\"token operator\">\\</span>\n    &amp;&amp; chromedriver --version</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<ul>\n<li>とりあえず、ChromeBetaではなく、安定版を入れるように変更しました。</li>\n<li>最新のChromeDriverを/tmp領域に実行権限を入れたまま放置するようにしました。</li>\n</ul>\n<p>続いてCI側です。</p>\n<p>CircleCIのconfig.ymlを次のように変えました。</p>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"yaml\"><pre style=\"counter-reset: linenumber 0\" class=\"language-yaml line-numbers\"><code class=\"language-yaml\">      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span>\n          <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Install dependencies\n          <span class=\"token key atrule\">command</span><span class=\"token punctuation\">:</span> npm install\n<span class=\"gatsby-highlight-code-line\">      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span></span><span class=\"gatsby-highlight-code-line\">          <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Fix ChromeDriver with nightwatch.js</span><span class=\"gatsby-highlight-code-line\">          <span class=\"token key atrule\">command</span><span class=\"token punctuation\">:</span> mv <span class=\"token punctuation\">-</span>f /tmp/chromedriver node_modules/chromedriver/lib/chromedriver/chromedriver</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<ul>\n<li>npm install後、node_modulesのChromeDriverを最新のもの(/tmpに入れたもの)と置き換えます。</li>\n</ul>\n<h2 id=\"実行\" style=\"position:relative;\"><a href=\"#%E5%AE%9F%E8%A1%8C\" aria-label=\"実行 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>実行！</h2>\n<p>なんとうまくいきました。</p>\n<p>直ったのでOKです。</p>\n<p><img class=\"lozad\" src=\"data:image/gif;base64,R0lGODlhAQABAGAAACH5BAEKAP8ALAAAAAABAAEAAAgEAP8FBAA7\" data-src=\"https://i.imgur.com/71HlXYT.png\" alt=\"Img\"></p>\n<p>久しぶりにsuccessを見た・・。</p>\n<p><img class=\"lozad\" src=\"data:image/gif;base64,R0lGODlhAQABAGAAACH5BAEKAP8ALAAAAAABAAEAAAgEAP8FBAA7\" data-src=\"https://i.imgur.com/FYjENBL.png\" alt=\"Img\"></p>\n<h2 id=\"あとがき\" style=\"position:relative;\"><a href=\"#%E3%81%82%E3%81%A8%E3%81%8C%E3%81%8D\" aria-label=\"あとがき permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>あとがき</h2>\n<p>Nightwatch.jsの動きが気になったのでもう少し深く見ていくとNightwatch.js自体はChromeDriverを依存パッケージとしては入れないようです。</p>\n<p><a href=\"https://github.com/nightwatchjs/nightwatch/blob/master/package.json\" target=\"_blank\" rel=\"noopener noreferrer\">Package.json</a></p>\n<p>代わりにChromeDriverを入れていたのは<code class=\"language-text\">vue-cli\n</code> のテストパッケージでした。</p>\n<p><a href=\"https://github.com/vuejs/vue-cli/blob/dev/packages/%40vue/cli-plugin-e2e-nightwatch/package.json\" target=\"_blank\" rel=\"noopener noreferrer\">Package.json</a></p>\n<p>また、最新のnpm installできる<a href=\"https://www.npmjs.com/package/chromedriver\" target=\"_blank\" rel=\"noopener noreferrer\">ChromeDriver</a>は<code class=\"language-text\">76.0.1\n</code>でしたので、もしかしたらnpm updateするだけでよかったのかもしれません。</p>\n<p>一応、依存パッケージのアップデートはCI契機(<a href=\"https://github.com/marketplace/dependabot-preview\" target=\"_blank\" rel=\"noopener noreferrer\">Dependabot Preview\n</a>)で動かすようにしていたのがあだになったかもしれませんねー。</p>","words":1955,"minutes":5}},"staticQueryHashes":["1319877725","2959249232"]}