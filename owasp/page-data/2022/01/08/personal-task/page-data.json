{"componentChunkName":"component---src-templates-blog-post-tsx","path":"/2022/01/08/personal-task","result":{"data":{"content":{"edges":[{"node":{"id":"d7123820-58c1-50e1-9662-e7eb7c5bda63","excerpt":"あけましておめでとうございます。 Table of Contents ToDo書いて生産的な生活になろう 最強のToDoリストとは？ 選ばれたのはGitHub Projectでした。 カスタマイズ1 IssueとProjectを自動で紐づける カスタマイズ…","fields":{"slug":"2022/01/08/personal-task"},"frontmatter":{"id":null,"title":"2022年はもっと生産的に過ごすためにGitHub Projectを使ったToDo管理やります!!!","slug":"2022/01/08/personal-task","date":"2022-01-08T09:06:06.213Z","headerImage":"https://i.imgur.com/LnpjYNN.png","tags":["GitHub","GitHubActions","ToDo"]}}}]}},"pageContext":{"id":"d7123820-58c1-50e1-9662-e7eb7c5bda63","index":9,"repHtml":"<p>あけましておめでとうございます。</p>\n<h2 id=\"table-of-contents\" style=\"position:relative;\"><a href=\"#table-of-contents\" aria-label=\"table of contents permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Table of Contents</h2>\n<div class=\"toc\">\n<ul>\n<li>\n<p><a href=\"#todo%E6%9B%B8%E3%81%84%E3%81%A6%E7%94%9F%E7%94%A3%E7%9A%84%E3%81%AA%E7%94%9F%E6%B4%BB%E3%81%AB%E3%81%AA%E3%82%8D%E3%81%86\">ToDo書いて生産的な生活になろう</a></p>\n</li>\n<li>\n<p><a href=\"#%E6%9C%80%E5%BC%B7%E3%81%AEtodo%E3%83%AA%E3%82%B9%E3%83%88%E3%81%A8%E3%81%AF\">最強のToDoリストとは？</a></p>\n</li>\n<li>\n<p><a href=\"#%E9%81%B8%E3%81%B0%E3%82%8C%E3%81%9F%E3%81%AE%E3%81%AFgithub-project%E3%81%A7%E3%81%97%E3%81%9F\">選ばれたのはGitHub Projectでした。</a></p>\n</li>\n<li>\n<p><a href=\"#%E3%82%AB%E3%82%B9%E3%82%BF%E3%83%9E%E3%82%A4%E3%82%BA1-issue%E3%81%A8project%E3%82%92%E8%87%AA%E5%8B%95%E3%81%A7%E7%B4%90%E3%81%A5%E3%81%91%E3%82%8B\">カスタマイズ1 IssueとProjectを自動で紐づける</a></p>\n</li>\n<li>\n<p><a href=\"#%E3%82%AB%E3%82%B9%E3%82%BF%E3%83%9E%E3%82%A4%E3%82%BA2-%E3%83%A9%E3%83%99%E3%83%AB%E3%82%92%E6%B4%BB%E7%94%A8%E3%81%99%E3%82%8B\">カスタマイズ2 ラベルを活用する</a></p>\n</li>\n<li>\n<p><a href=\"#%E3%82%AB%E3%82%B9%E3%82%BF%E3%83%9E%E3%82%A4%E3%82%BA3-%E6%9C%9F%E6%97%A5%E3%82%92%E7%AE%A1%E7%90%86%E3%81%97%E3%81%9F%E3%81%84\">カスタマイズ3 期日を管理したい</a></p>\n<ul>\n<li><a href=\"#%E4%BD%99%E8%AB%87\">余談</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%E3%82%AB%E3%82%B9%E3%82%BF%E3%83%9E%E3%82%A4%E3%82%BA4-%E6%BA%9C%E3%81%BE%E3%81%A3%E3%81%A6%E3%81%97%E3%81%BE%E3%81%A3%E3%81%9Fmilestone%E3%82%92%E5%AE%9A%E6%9C%9F%E7%9A%84%E3%81%ABclose%E3%81%99%E3%82%8B\">カスタマイズ4 溜まってしまったMilestoneを定期的にCloseする</a></p>\n</li>\n<li>\n<p><a href=\"#%E3%82%AB%E3%82%B9%E3%82%BF%E3%83%9E%E3%82%A4%E3%82%BA5-%E6%97%A5%E5%A0%B1%E3%83%AA%E3%83%9E%E3%82%A4%E3%83%B3%E3%83%80%E3%83%BC%E6%A9%9F%E8%83%BD%E3%81%AE%E4%BD%9C%E6%88%90\">カスタマイズ5 日報&#x26;リマインダー機能の作成</a></p>\n</li>\n<li>\n<p><a href=\"#%E3%81%BE%E3%81%A8%E3%82%81\">まとめ</a></p>\n</li>\n</ul>\n</div>\n<h2 id=\"todo書いて生産的な生活になろう\" style=\"position:relative;\"><a href=\"#todo%E6%9B%B8%E3%81%84%E3%81%A6%E7%94%9F%E7%94%A3%E7%9A%84%E3%81%AA%E7%94%9F%E6%B4%BB%E3%81%AB%E3%81%AA%E3%82%8D%E3%81%86\" aria-label=\"todo書いて生産的な生活になろう permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ToDo書いて生産的な生活になろう</h2>\n<p>あけましておめでとうございますー。昨年は色々な人にお世話になりましたので今年は人に貢献していきたいと思っている筆者です。</p>\n<p>そのためにも時間の捻出が重要になってくるかと思いますが、より生産性の高い日常を送るためにはやはり<strong>ToDoリスト</strong>なのではないでしょうか？</p>\n<p>みなさん、<strong>ToDoリスト</strong>、使ってますか？</p>\n<p>かれこれ筆者は、何度もToDoリストを作って生産的な生活を送ろうとしてますが、うまくいった試しがありません。</p>\n<p>そんな筆者がなぜToDoリストが続かないのかを分析し自分にぴったりのToDoアプリを作り、運用します。</p>\n<p>このままだと<strong>胡散臭いビジネス書みたいな</strong>宣伝文句になってしまってますが、安心してください。そんなに胡散臭い内容は出てこないはずです。(ほぼGitHub ActionsのTipsみたいな記事です。)</p>\n<h2 id=\"最強のtodoリストとは\" style=\"position:relative;\"><a href=\"#%E6%9C%80%E5%BC%B7%E3%81%AEtodo%E3%83%AA%E3%82%B9%E3%83%88%E3%81%A8%E3%81%AF\" aria-label=\"最強のtodoリストとは permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>最強のToDoリストとは？</h2>\n<p>まずは、世の中のToDoリストアプリについて分析していきましょう。</p>\n<p>世の中には玉石混交のToDoリストアプリで溢れかえってますが、筆者が思うに<strong>ネイティブアプリ専用のToDoリスト</strong>はまず開かなくなります。</p>\n<p>そもそもパソコンで仕事してるケースが多いのでパソコンでもスマホでも操作できないと使わなくなります。それにスマホ開いたらTwitter見ちゃうでしょ。</p>\n<p>また、タスク期日や依存関係、カテゴリ、タグなど、一つのToDoを書くためにやたら記載欄が多いToDoアプリも適当になりがちなでおすすめできません。後々の振り返り分析なんかにはいいんですが、めんどくさいですよね。</p>\n<p>またタスクの期日に応じたリマインダー機能があると続ける気になりそうです。ただ、リマインドはSlackに送らないと意味がありません。Gmailはまず見ません。</p>\n<p>まとめると、</p>\n<ol>\n<li>パソコンでもスマホでも使える</li>\n<li>入力欄がシンプル(わかりきっていることは自動で入力してほしい)</li>\n<li>リマインダーがある(Slack)</li>\n</ol>\n<p>となります。</p>\n<h2 id=\"選ばれたのはgithub-projectでした\" style=\"position:relative;\"><a href=\"#%E9%81%B8%E3%81%B0%E3%82%8C%E3%81%9F%E3%81%AE%E3%81%AFgithub-project%E3%81%A7%E3%81%97%E3%81%9F\" aria-label=\"選ばれたのはgithub projectでした permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>選ばれたのはGitHub Projectでした。</h2>\n<p>ということで今回私に選ばれたのは<a href=\"https://docs.github.com/ja/issues/organizing-your-work-with-project-boards/managing-project-boards/about-project-boards\" target=\"_blank\" rel=\"noopener noreferrer\">GitHub Project</a>でした。</p>\n<p>え？　それって<strong>カンバンでプロジェクト管理するソフトウェア開発のタスク管理ツール</strong>でしょ？コードを書かないような個人のToDoに使えるの？と思ったあなた。</p>\n<p><strong>その通りです。使えません。</strong></p>\n<p><strong>そのままでは使い勝手が悪すぎます。</strong></p>\n<p>が、GitHub Projectには<strong>GitHub Actions</strong>という最強のCIがついてますのでこちらを使うことで劇的に使いやすいToDoアプリになります。</p>\n<p>まず、GitHub Projectはパソコンでもスマホでも利用可能なので、何も実装しなくても <strong>1. パソコンでもスマホでも使える</strong> はクリアとなります。ありがたい。</p>\n<p>今回はGitHub Issueを基軸に運用したいのでProjectのテンプレートは<a href=\"https://docs.github.com/ja/issues/organizing-your-work-with-project-boards/managing-project-boards/about-project-boards#templates-for-project-boards\" target=\"_blank\" rel=\"noopener noreferrer\">Automated Kanban</a>を選択しました。これで、<strong>Issueがクローズされた際にProject側でもタスクを勝手にDone</strong>にしてくれます。</p>\n<p><img class=\"lozad\" src=\"data:image/gif;base64,R0lGODlhAQABAGAAACH5BAEKAP8ALAAAAAABAAEAAAgEAP8FBAA7\" data-src=\"https://i.imgur.com/fWMy7hV.png\" alt=\"img\"></p>\n<h2 id=\"カスタマイズ1-issueとprojectを自動で紐づける\" style=\"position:relative;\"><a href=\"#%E3%82%AB%E3%82%B9%E3%82%BF%E3%83%9E%E3%82%A4%E3%82%BA1-issue%E3%81%A8project%E3%82%92%E8%87%AA%E5%8B%95%E3%81%A7%E7%B4%90%E3%81%A5%E3%81%91%E3%82%8B\" aria-label=\"カスタマイズ1 issueとprojectを自動で紐づける permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>カスタマイズ1 IssueとProjectを自動で紐づける</h2>\n<p>GitHub ProjectはGitHub IssueおよびPull Requestと紐づけして運用できるのですが、<strong>Issueを切った際にProjectのToDoに自動紐づけされません。</strong> (Automated KanbanではIssue CloseでDoneにしてくれるのに逆のことはしてくれないんだ...)</p>\n<p>Issueを切った際<strong>手動</strong>で、指定したProjectに紐づけを行なう必要があります。一つのRepositoryに対して複数のProjectが存在するケースがあるのである意味ソフトウェア開発的には正当な動きと思いますが、個人ToDoには荷が重すぎます。わざわざ毎回手動で紐づけるのはつらすぎます。</p>\n<p>そこで僕はGitHub Actions。 (もこみち風)</p>\n<p>ちょっとWeb上で探したところ、なんとすでに<a href=\"https://github.com/marketplace/actions/github-project-automation\" target=\"_blank\" rel=\"noopener noreferrer\">alex-page/github-project-automation-plus</a>という便利なActionsが用意されているので、こちらをGitHub Actionsで使えばかんたんに実現できます。ありがとうございます。</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Move new issues into MyToDo\n<span class=\"token key atrule\">on</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">issues</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">types</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>opened<span class=\"token punctuation\">]</span>\n\n<span class=\"token key atrule\">jobs</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">automate-project-columns</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">runs-on</span><span class=\"token punctuation\">:</span> ubuntu<span class=\"token punctuation\">-</span>latest\n    <span class=\"token key atrule\">steps</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> alex<span class=\"token punctuation\">-</span>page/github<span class=\"token punctuation\">-</span>project<span class=\"token punctuation\">-</span>automation<span class=\"token punctuation\">-</span>plus@v0.3.0\n        <span class=\"token key atrule\">with</span><span class=\"token punctuation\">:</span>\n          <span class=\"token key atrule\">project</span><span class=\"token punctuation\">:</span> MyToDo\n          <span class=\"token key atrule\">column</span><span class=\"token punctuation\">:</span> To do\n          <span class=\"token key atrule\">repo-token</span><span class=\"token punctuation\">:</span> $<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> secrets.GH_TOKEN <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></code></pre></div>\n<p>使い方は公式のREADMEを見てもらえればと思いますが、ポイントとしては、on句にはIssueのOpenを指定することとrepo-tokenはGitHub Actionsでデフォルトで使える<strong>secrets.GITHUB_TOKEN</strong>だとProjectの操作権限がないので<strong>admin:orgのR/W権限</strong>をつける必要があります。</p>\n<p>(専用に<a href=\"https://docs.github.com/ja/authentication/keeping-your-account-and-data-secure/creating-a-personal-access-token\" target=\"_blank\" rel=\"noopener noreferrer\">PAT</a>を再発行してsecretsに設定する必要があります。)</p>\n<p>これで、New IssueからIssueを切るだけで、Project管理ができるようになりました！</p>\n<h2 id=\"カスタマイズ2-ラベルを活用する\" style=\"position:relative;\"><a href=\"#%E3%82%AB%E3%82%B9%E3%82%BF%E3%83%9E%E3%82%A4%E3%82%BA2-%E3%83%A9%E3%83%99%E3%83%AB%E3%82%92%E6%B4%BB%E7%94%A8%E3%81%99%E3%82%8B\" aria-label=\"カスタマイズ2 ラベルを活用する permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>カスタマイズ2 ラベルを活用する</h2>\n<p>GitHub Issues, Projectには<a href=\"https://docs.github.com/ja/issues/using-labels-and-milestones-to-track-work/managing-labels\" target=\"_blank\" rel=\"noopener noreferrer\">Label</a>という概念があります。</p>\n<p>よく、BugとかFeatureとかついているあれです。</p>\n<p><img class=\"lozad\" src=\"data:image/gif;base64,R0lGODlhAQABAGAAACH5BAEKAP8ALAAAAAABAAEAAAgEAP8FBAA7\" data-src=\"https://i.imgur.com/zeWmlIk.png\" alt=\"label\"></p>\n<p>これをToDoに活用することでToDo管理をやりやすくします。</p>\n<p><img class=\"lozad\" src=\"data:image/gif;base64,R0lGODlhAQABAGAAACH5BAEKAP8ALAAAAAABAAEAAAgEAP8FBAA7\" data-src=\"https://i.imgur.com/RsOQAlV.png\" alt=\"img\"></p>\n<p>このようにLabel管理することで、タスクの優先度や作業場所のカテゴライズを行いやすくできました！</p>\n<h2 id=\"カスタマイズ3-期日を管理したい\" style=\"position:relative;\"><a href=\"#%E3%82%AB%E3%82%B9%E3%82%BF%E3%83%9E%E3%82%A4%E3%82%BA3-%E6%9C%9F%E6%97%A5%E3%82%92%E7%AE%A1%E7%90%86%E3%81%97%E3%81%9F%E3%81%84\" aria-label=\"カスタマイズ3 期日を管理したい permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>カスタマイズ3 期日を管理したい</h2>\n<p>ある意味GitHub Project ToDoアプリ利用最大の欠点だとおもいますが、<strong>期日の管理</strong>がやりにくいです。</p>\n<p>一応Milestoneという機能を使ってリリース日を設定し、そちらにIssueを紐づけることでプロジェクト管理ができるようになっておりますが、<strong>Milestoneを毎回作って紐づける</strong>のはとても大変です。(やはりGitHub ActionsでToDo管理は無理があったと感じざるを得ません。)</p>\n<p><img class=\"lozad\" src=\"data:image/gif;base64,R0lGODlhAQABAGAAACH5BAEKAP8ALAAAAAABAAEAAAgEAP8FBAA7\" data-src=\"https://i.imgur.com/ZXzTyx3.png\" alt=\"img\"></p>\n<p>Milestoneを設定さえすれば、期日表示ができますし後々実施しようと思っているリマインダーにも活用できそうです。</p>\n<p>今回はカスタマイズ2で専用の期限Labelを作ったのでこちらを活用していきます。</p>\n<p>次のようなワークフローを考えます。</p>\n<ol>\n<li>期限Labelをつける</li>\n<li>Labelをつけた時刻からラベルの対象期限を算出し、Milestoneを作る</li>\n<li>作ったMilestoneをIssueにつける</li>\n</ol>\n<p>で、これもGitHub Actionsで作ることができます。</p>\n<p>今回はちょっと勉強のために<a href=\"https://github.com/marketplace/actions/github-script\" target=\"_blank\" rel=\"noopener noreferrer\">actions/github-script</a>を使って実装しました。</p>\n<p>GitHub ScriptはデフォルトでGitHubのContextやEventを取得、IssueやMilestoneを更新できる<a href=\"https://octokit.github.io/rest.js/v18\" target=\"_blank\" rel=\"noopener noreferrer\">Octokit</a>がimport不要でそのまま使えるのでかなり便利なのですが、GitHub ActionsのYAML上でコードを書くことになり、YAML上ではGitHub Script(JavaScript)の<strong>エディターの補完</strong>が効かず開発体験が悪すぎて発狂仕掛けたので複雑な実装をするときはまじで利用をおすすめしません!!!普通にスクリプト書いてcheckoutしたほうがマシです。</p>\n<p>あと、GitHub Scriptのドキュメントが少なすぎです。</p>\n<p>なんのAPIがあるのかまるでわかりません。<a href=\"https://octokit.github.io/rest.js/v18\" target=\"_blank\" rel=\"noopener noreferrer\">Octokit</a>のAPIと同じだろうと思って使おうとするとそんなメソッドありませんエラー出るしいちいちインスタンスをconsole.logして実装されているメソッドを確認する作業で時間を浪費しました...。</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Create Milestone For Labeled\n<span class=\"token key atrule\">on</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">issues</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">types</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> labeled\n\n<span class=\"token key atrule\">jobs</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">create_milestone</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">runs-on</span><span class=\"token punctuation\">:</span> ubuntu<span class=\"token punctuation\">-</span>latest\n    <span class=\"token key atrule\">steps</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> create milestone\n        <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> actions/github<span class=\"token punctuation\">-</span>script@v3\n        <span class=\"token key atrule\">with</span><span class=\"token punctuation\">:</span>\n          <span class=\"token key atrule\">github-token</span><span class=\"token punctuation\">:</span> $<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> secrets.GH_TOKEN <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n          <span class=\"token key atrule\">script</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">|</span><span class=\"token scalar string\">\n            const label = context.payload.label.name\n            const date = new Date(Date.now() + ((new Date().getTimezoneOffset() + (9 * 60)) * 60 * 1000));\n            const nextDayOffset = 7 - date.getDay()\n            let due_on\n            let endDate\n            if(label.indexOf('Today') !== -1) {\n              due_on = date.toISOString()\n              endDate = (date.getFullYear()) + \"/\" + (date.getMonth() + 1) + \"/\" + date.getDate()\n            } else if(label.indexOf('Tommorrow') !== -1) {\n              date.setDate(date.getDate() + 1)\n              due_on = date.toISOString()\n              endDate = (date.getFullYear()) + \"/\" + (date.getMonth() + 1) + \"/\" + date.getDate()\n            } else if(label.indexOf('NextWeekend') !== -1) {\n              date.setDate(date.getDate() + 7 + nextDayOffset)\n              due_on = date.toISOString()\n              endDate = (date.getFullYear()) + \"/\" + (date.getMonth() + 1) + \"/\" + date.getDate()\n            } else if(label.indexOf('Weekend') !== -1) {\n                date.setDate(date.getDate() + nextDayOffset)\n                due_on = date.toISOString()\n                endDate = (date.getFullYear()) + \"/\" + (date.getMonth() + 1) + \"/\" + date.getDate()\n            } else if(label.indexOf('NextMonth') !== -1) {\n              date.setDate(date.getDate() + 30)\n              due_on = date.toISOString()\n              endDate = (date.getFullYear()) + \"/\" + (date.getMonth() + 1) + \"/\" + date.getDate()\n            } else {\n              // nothing to do\n              return\n            }\n            let milestoneNumber\n            try {\n              const result = await github.issues.createMilestone({\n              owner: context.repo.owner,\n              repo: context.repo.repo,\n              title: endDate,\n              due_on: due_on,\n              description: endDate + 'までに片付ける'\n              })\n              milestoneNumber = result.data.number\n            } catch(e) {\n              console.log(e)\n              if (e &amp;&amp; e.errors &amp;&amp; e.errors[0].resource === 'Milestone' &amp;&amp; e.errors[0].code === 'already_exists') {\n                console.log('skip create milestone')\n                const resp = await github.issues.listMilestones({\n                  owner: context.repo.owner,\n                  repo: context.repo.repo,\n                  sort: 'due_on',\n                  direction: 'desc',\n                  per_page: 100,\n                })\n                if (resp.data.filter(m => m.title === endDate).length !== 0) {\n                  milestoneNumber = resp.data.filter(m => m.title === endDate)[0].number\n                } else {\n                  console.log(resp)\n                }\n              } else {\n                console.log(e)\n                throw(e)\n              }\n            }\n            await github.issues.update({\n              owner: context.repo.owner,\n              repo: context.repo.repo,\n              issue_number: context.issue.number,\n              milestone: milestoneNumber,\n            })</span></code></pre></div>\n<p>かなり愚直ですが、on句でIssueがlabeledの際にLabel名を取得し、ToDayとかNextWeekendとかキーワードを拾い上げ現在時刻からMilestone期限を算出します。</p>\n<p>その後作成したMilestoneをIssueに紐づけるわけですが、すでに同名のMilestoneを作成しているとき、つまり同一日の期限タスクをすでに作っている場合もあるのでそこらへんのハンドリングがややこしい感じになっています。</p>\n<p>繰り返しになりますが、<strong>10行以上の処理を記載するときはGitHub Script使わず、きっちり実装したほうが色々幸せになれます。</strong></p>\n<p>ともかく、このGitHub Actionsのおかげで期限ラベルを設定するだけで、Milestoneも設定されるようになりました！</p>\n<h3 id=\"余談\" style=\"position:relative;\"><a href=\"#%E4%BD%99%E8%AB%87\" aria-label=\"余談 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>余談</h3>\n<p>余談ですが、上記のコード、elseに何もしないってコメントしているのにreturnしてますね。💦💦💦💦</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// nothing to do</span>\n  <span class=\"token keyword\">return</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<blockquote class=\"twitter-tweet\"><p lang=\"ja\" dir=\"ltr\">なんだこれ <a href=\"https://t.co/SyHgBW3VAp\">pic.twitter.com/SyHgBW3VAp</a></p>&mdash; K.Saito (@SightSeekerTw) <a href=\"https://twitter.com/SightSeekerTw/status/1479362069422292992?ref_src=twsrc%5Etfw\">January 7, 2022</a></blockquote> <script async src=\"https://platform.twitter.com/widgets.js\" charset=\"utf-8\"></script>\n<p>というTweetも話題になりましたが、結構自分は何もしないelse書いたりします。がそこらへんの議論は宗教戦争なのでなんとも穏やかにいきたいものです。</p>\n<p>今回の私の実装はreturnしているのでコメントからしてだめですけどね..。</p>\n<h2 id=\"カスタマイズ4-溜まってしまったmilestoneを定期的にcloseする\" style=\"position:relative;\"><a href=\"#%E3%82%AB%E3%82%B9%E3%82%BF%E3%83%9E%E3%82%A4%E3%82%BA4-%E6%BA%9C%E3%81%BE%E3%81%A3%E3%81%A6%E3%81%97%E3%81%BE%E3%81%A3%E3%81%9Fmilestone%E3%82%92%E5%AE%9A%E6%9C%9F%E7%9A%84%E3%81%ABclose%E3%81%99%E3%82%8B\" aria-label=\"カスタマイズ4 溜まってしまったmilestoneを定期的にcloseする permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>カスタマイズ4 溜まってしまったMilestoneを定期的にCloseする</h2>\n<p>カスタマイズ3で期限タスクが発生するたびにMilestoneを作る運用にしてしまったことで、Milestoneに過去の不要な日付のものがOpenし続ける状態になってしまいました。</p>\n<p>視認性も悪く精神衛生上も悪いので、期日を過ぎていてかつ、紐づくタスクすべてDoneになっているMilestoneは自動的にCloseするようにします。</p>\n<p>こちらもGitHub Actionsで実装します。ただし、今回は前回の反省を活かし<a href=\"https://github.com/marketplace/actions/github-script\" target=\"_blank\" rel=\"noopener noreferrer\">actions/github-script</a>は使いません。Pythonで作りました。</p>\n<p>まずはPythonのコードですが、GitHubへのアクセスは<a href=\"https://github.com/PyGithub/PyGithub\" target=\"_blank\" rel=\"noopener noreferrer\">PyGithub</a>を使いました。</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> os\n<span class=\"token keyword\">from</span> datetime <span class=\"token keyword\">import</span> datetime<span class=\"token punctuation\">,</span> timedelta\n<span class=\"token keyword\">from</span> github <span class=\"token keyword\">import</span> Github\n\nACCESS_TOKEN <span class=\"token operator\">=</span> os<span class=\"token punctuation\">.</span>getenv<span class=\"token punctuation\">(</span><span class=\"token string\">\"GITHUB_TOKEN\"</span><span class=\"token punctuation\">)</span>\nREPO <span class=\"token operator\">=</span> os<span class=\"token punctuation\">.</span>getenv<span class=\"token punctuation\">(</span><span class=\"token string\">\"GITHUB_REPOSITORY\"</span><span class=\"token punctuation\">)</span>\ng <span class=\"token operator\">=</span> Github<span class=\"token punctuation\">(</span>ACCESS_TOKEN<span class=\"token punctuation\">)</span>\n\nrepo <span class=\"token operator\">=</span> g<span class=\"token punctuation\">.</span>get_repo<span class=\"token punctuation\">(</span>REPO<span class=\"token punctuation\">)</span>\nopen_milestones <span class=\"token operator\">=</span> repo<span class=\"token punctuation\">.</span>get_milestones<span class=\"token punctuation\">(</span>state<span class=\"token operator\">=</span><span class=\"token string\">\"open\"</span><span class=\"token punctuation\">)</span>\nyesterday <span class=\"token operator\">=</span> datetime<span class=\"token punctuation\">.</span>now<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> timedelta<span class=\"token punctuation\">(</span>days<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n\nshould_close_milestone <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n<span class=\"token keyword\">for</span> milestone <span class=\"token keyword\">in</span> open_milestones<span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>milestone<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">if</span> milestone<span class=\"token punctuation\">.</span>due_on <span class=\"token operator\">&lt;</span> yesterday <span class=\"token keyword\">and</span> milestone<span class=\"token punctuation\">.</span>open_issues <span class=\"token operator\">==</span> <span class=\"token number\">0</span><span class=\"token punctuation\">:</span>\n        should_close_milestone<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span>milestone<span class=\"token punctuation\">)</span>\n        milestone<span class=\"token punctuation\">.</span>edit<span class=\"token punctuation\">(</span>title<span class=\"token operator\">=</span>milestone<span class=\"token punctuation\">.</span>title<span class=\"token punctuation\">,</span> state<span class=\"token operator\">=</span><span class=\"token string\">\"closed\"</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>should_close_milestone<span class=\"token punctuation\">)</span></code></pre></div>\n<p>といった感じでopenしているmilestoneを取得して、昨日までの期日のMilestoneでopenしているIssueが0件のものをclosedにしていくシンプルスクリプトです。</p>\n<p>GitHub Scriptに比べて、IDEで型アノテーションが効いており、開発体験よかったです。</p>\n<p>次にGitHub Actionsですがただon scheduleでこちらのPythonを実行しているだけなので貼り付けは割愛します。</p>\n<h2 id=\"カスタマイズ5-日報リマインダー機能の作成\" style=\"position:relative;\"><a href=\"#%E3%82%AB%E3%82%B9%E3%82%BF%E3%83%9E%E3%82%A4%E3%82%BA5-%E6%97%A5%E5%A0%B1%E3%83%AA%E3%83%9E%E3%82%A4%E3%83%B3%E3%83%80%E3%83%BC%E6%A9%9F%E8%83%BD%E3%81%AE%E4%BD%9C%E6%88%90\" aria-label=\"カスタマイズ5 日報リマインダー機能の作成 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>カスタマイズ5 日報&#x26;リマインダー機能の作成</h2>\n<p>さて、ラストになりましたがリマインダー機能を作っていきます。</p>\n<p>こちらちょっと趣向を凝らして<strong>日報&#x26;リマインダー</strong>にすることにしました。</p>\n<p>一日一回、Markdown形式で日報を作りレポジトリにpushすると同時にSlack通知し日報の中に明日期限のタスクも合わせて記載する、という方法を採用しました。</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> os\n<span class=\"token keyword\">from</span> datetime <span class=\"token keyword\">import</span> datetime<span class=\"token punctuation\">,</span> timedelta\n<span class=\"token keyword\">import</span> string\n<span class=\"token keyword\">from</span> github <span class=\"token keyword\">import</span> Github\n<span class=\"token keyword\">import</span> requests\n<span class=\"token keyword\">import</span> json\n\nTEMPLATE <span class=\"token operator\">=</span> <span class=\"token triple-quoted-string string\">\"\"\"# ${date} の日報\n## やったこと\n${today_closed_issues_string}\n## 今日やろうと思ったこと\n${today_open_issues_string}\n## 明日までにやらないといけないこと\n${tommorrow_due_to_issues_string}\n\"\"\"</span>\n\nTEMPLATE_SLACK <span class=\"token operator\">=</span> <span class=\"token triple-quoted-string string\">\"\"\"*${date} の日報*\n*やったこと*\n${today_closed_issues_mrkdwn_string}\n*今日やろうと思ったこと*\n${today_open_issues__mrkdwn_string}\n*明日までにやらないといけないこと*\n${tommorrow_due_to_issues__mrkdwn_string}\n\"\"\"</span>\n\nACCESS_TOKEN <span class=\"token operator\">=</span> os<span class=\"token punctuation\">.</span>getenv<span class=\"token punctuation\">(</span><span class=\"token string\">\"GITHUB_TOKEN\"</span><span class=\"token punctuation\">)</span>\nREPO <span class=\"token operator\">=</span> os<span class=\"token punctuation\">.</span>getenv<span class=\"token punctuation\">(</span><span class=\"token string\">\"GITHUB_REPOSITORY\"</span><span class=\"token punctuation\">)</span>\nSLACK_WEB_HOOK <span class=\"token operator\">=</span> os<span class=\"token punctuation\">.</span>environ<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token string\">\"SLACK_WEB_HOOK\"</span><span class=\"token punctuation\">)</span>\ng <span class=\"token operator\">=</span> Github<span class=\"token punctuation\">(</span>ACCESS_TOKEN<span class=\"token punctuation\">)</span>\n\nrepo <span class=\"token operator\">=</span> g<span class=\"token punctuation\">.</span>get_repo<span class=\"token punctuation\">(</span>REPO<span class=\"token punctuation\">)</span>\nopen_issues <span class=\"token operator\">=</span> repo<span class=\"token punctuation\">.</span>get_issues<span class=\"token punctuation\">(</span>state<span class=\"token operator\">=</span><span class=\"token string\">\"open\"</span><span class=\"token punctuation\">)</span>\nclosed_issues <span class=\"token operator\">=</span> repo<span class=\"token punctuation\">.</span>get_issues<span class=\"token punctuation\">(</span>state<span class=\"token operator\">=</span><span class=\"token string\">\"closed\"</span><span class=\"token punctuation\">)</span>\ntoday <span class=\"token operator\">=</span> datetime<span class=\"token punctuation\">.</span>now<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\ntommorrow <span class=\"token operator\">=</span> datetime<span class=\"token punctuation\">.</span>now<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>replace<span class=\"token punctuation\">(</span>hour<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> minute<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> second<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> microsecond<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> timedelta<span class=\"token punctuation\">(</span>days<span class=\"token operator\">=</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span>\n\ntoday_closed_issues <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\ntoday_open_issues <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\ndue_to_issues <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\ntoday_closed_mrkdwn_issues <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\ntoday_open_mrkdwn_issues <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\ndue_to_mrkdwn_issues <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n<span class=\"token keyword\">for</span> issue <span class=\"token keyword\">in</span> closed_issues<span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">if</span> issue<span class=\"token punctuation\">.</span>closed_at<span class=\"token punctuation\">.</span>strftime<span class=\"token punctuation\">(</span><span class=\"token string\">\"%Y-%m-%d\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> today<span class=\"token punctuation\">.</span>strftime<span class=\"token punctuation\">(</span><span class=\"token string\">\"%Y-%m-%d\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        today_closed_issues<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span><span class=\"token string-interpolation\"><span class=\"token string\">f\"[</span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>issue<span class=\"token punctuation\">.</span>title<span class=\"token punctuation\">}</span></span><span class=\"token string\">](</span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>issue<span class=\"token punctuation\">.</span>html_url<span class=\"token punctuation\">}</span></span><span class=\"token string\">)\"</span></span><span class=\"token punctuation\">)</span>\n        today_closed_mrkdwn_issues<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span><span class=\"token string-interpolation\"><span class=\"token string\">f\"&lt;</span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>issue<span class=\"token punctuation\">.</span>html_url<span class=\"token punctuation\">}</span></span><span class=\"token string\">|</span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>issue<span class=\"token punctuation\">.</span>title<span class=\"token punctuation\">}</span></span><span class=\"token string\">>\"</span></span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">for</span> issue <span class=\"token keyword\">in</span> open_issues<span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>issue<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">if</span> issue<span class=\"token punctuation\">.</span>created_at<span class=\"token punctuation\">.</span>strftime<span class=\"token punctuation\">(</span><span class=\"token string\">\"%Y-%m-%d\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> today<span class=\"token punctuation\">.</span>strftime<span class=\"token punctuation\">(</span><span class=\"token string\">\"%Y-%m-%d\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        today_open_issues<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span><span class=\"token string-interpolation\"><span class=\"token string\">f\"[</span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>issue<span class=\"token punctuation\">.</span>title<span class=\"token punctuation\">}</span></span><span class=\"token string\">](</span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>issue<span class=\"token punctuation\">.</span>html_url<span class=\"token punctuation\">}</span></span><span class=\"token string\">)\"</span></span><span class=\"token punctuation\">)</span>\n        today_open_mrkdwn_issues<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span><span class=\"token string-interpolation\"><span class=\"token string\">f\"&lt;</span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>issue<span class=\"token punctuation\">.</span>html_url<span class=\"token punctuation\">}</span></span><span class=\"token string\">|</span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>issue<span class=\"token punctuation\">.</span>title<span class=\"token punctuation\">}</span></span><span class=\"token string\">>\"</span></span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">if</span> issue<span class=\"token punctuation\">.</span>milestone <span class=\"token keyword\">is</span> <span class=\"token keyword\">not</span> <span class=\"token boolean\">None</span><span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">if</span> issue<span class=\"token punctuation\">.</span>milestone<span class=\"token punctuation\">.</span>due_on <span class=\"token operator\">&lt;</span> tommorrow<span class=\"token punctuation\">:</span>\n            due_to_issues<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span><span class=\"token string-interpolation\"><span class=\"token string\">f\"[</span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>issue<span class=\"token punctuation\">.</span>title<span class=\"token punctuation\">}</span></span><span class=\"token string\">](</span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>issue<span class=\"token punctuation\">.</span>html_url<span class=\"token punctuation\">}</span></span><span class=\"token string\">)\"</span></span><span class=\"token punctuation\">)</span>\n            due_to_mrkdwn_issues<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span><span class=\"token string-interpolation\"><span class=\"token string\">f\"&lt;</span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>issue<span class=\"token punctuation\">.</span>html_url<span class=\"token punctuation\">}</span></span><span class=\"token string\">|</span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>issue<span class=\"token punctuation\">.</span>title<span class=\"token punctuation\">}</span></span><span class=\"token string\">>\"</span></span><span class=\"token punctuation\">)</span>\ntemplate_text <span class=\"token operator\">=</span> string<span class=\"token punctuation\">.</span>Template<span class=\"token punctuation\">(</span>TEMPLATE<span class=\"token punctuation\">)</span>\nresult <span class=\"token operator\">=</span> template_text<span class=\"token punctuation\">.</span>safe_substitute<span class=\"token punctuation\">(</span>\n    <span class=\"token punctuation\">{</span><span class=\"token string\">\"date\"</span><span class=\"token punctuation\">:</span> today<span class=\"token punctuation\">.</span>strftime<span class=\"token punctuation\">(</span><span class=\"token string\">\"%Y-%m-%d\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n     <span class=\"token string\">\"today_closed_issues_string\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"- \"</span> <span class=\"token operator\">+</span> <span class=\"token string\">\"\\n- \"</span><span class=\"token punctuation\">.</span>join<span class=\"token punctuation\">(</span>today_closed_issues<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n     <span class=\"token string\">\"today_open_issues_string\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"- \"</span> <span class=\"token operator\">+</span> <span class=\"token string\">\"\\n- \"</span><span class=\"token punctuation\">.</span>join<span class=\"token punctuation\">(</span>today_open_issues<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n     <span class=\"token string\">\"tommorrow_due_to_issues_string\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"- \"</span> <span class=\"token operator\">+</span> <span class=\"token string\">\"\\n- \"</span><span class=\"token punctuation\">.</span>join<span class=\"token punctuation\">(</span>due_to_issues<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n     <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">)</span>\n\ntemplate_slack_text <span class=\"token operator\">=</span> string<span class=\"token punctuation\">.</span>Template<span class=\"token punctuation\">(</span>TEMPLATE_SLACK<span class=\"token punctuation\">)</span>\nresult_slack <span class=\"token operator\">=</span> template_slack_text<span class=\"token punctuation\">.</span>safe_substitute<span class=\"token punctuation\">(</span>\n    <span class=\"token punctuation\">{</span><span class=\"token string\">\"date\"</span><span class=\"token punctuation\">:</span> today<span class=\"token punctuation\">.</span>strftime<span class=\"token punctuation\">(</span><span class=\"token string\">\"%Y-%m-%d\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n     <span class=\"token string\">\"today_closed_issues_mrkdwn_string\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"* \"</span> <span class=\"token operator\">+</span> <span class=\"token string\">\"\\n* \"</span><span class=\"token punctuation\">.</span>join<span class=\"token punctuation\">(</span>today_closed_mrkdwn_issues<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n     <span class=\"token string\">\"today_open_issues__mrkdwn_string\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"* \"</span> <span class=\"token operator\">+</span> <span class=\"token string\">\"\\n* \"</span><span class=\"token punctuation\">.</span>join<span class=\"token punctuation\">(</span>today_open_mrkdwn_issues<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n     <span class=\"token string\">\"tommorrow_due_to_issues__mrkdwn_string\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"* \"</span> <span class=\"token operator\">+</span> <span class=\"token string\">\"\\n* \"</span><span class=\"token punctuation\">.</span>join<span class=\"token punctuation\">(</span>due_to_mrkdwn_issues<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n     <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">)</span>\n\nos<span class=\"token punctuation\">.</span>makedirs<span class=\"token punctuation\">(</span><span class=\"token string-interpolation\"><span class=\"token string\">f\"daily_report/</span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>today<span class=\"token punctuation\">.</span>strftime<span class=\"token punctuation\">(</span><span class=\"token string\">'%Y'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span><span class=\"token string\">/</span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>today<span class=\"token punctuation\">.</span>strftime<span class=\"token punctuation\">(</span><span class=\"token string\">'%m'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span><span class=\"token string\">\"</span></span><span class=\"token punctuation\">,</span> exist_ok<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">with</span> <span class=\"token builtin\">open</span><span class=\"token punctuation\">(</span><span class=\"token string-interpolation\"><span class=\"token string\">f\"daily_report/</span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>today<span class=\"token punctuation\">.</span>strftime<span class=\"token punctuation\">(</span><span class=\"token string\">'%Y'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span><span class=\"token string\">/</span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>today<span class=\"token punctuation\">.</span>strftime<span class=\"token punctuation\">(</span><span class=\"token string\">'%m'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span><span class=\"token string\">/</span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>today<span class=\"token punctuation\">.</span>strftime<span class=\"token punctuation\">(</span><span class=\"token string\">'%d'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span><span class=\"token string\">.md\"</span></span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"w\"</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> f<span class=\"token punctuation\">:</span>\n    f<span class=\"token punctuation\">.</span>write<span class=\"token punctuation\">(</span>result<span class=\"token punctuation\">)</span>\n\npayload <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token string\">\"text\"</span><span class=\"token punctuation\">:</span> result_slack<span class=\"token punctuation\">}</span>\nrequests<span class=\"token punctuation\">.</span>post<span class=\"token punctuation\">(</span>SLACK_WEB_HOOK<span class=\"token punctuation\">,</span> json<span class=\"token punctuation\">.</span>dumps<span class=\"token punctuation\">(</span>payload<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>大したことをやっていないスクリプトなのですが、GitHubのMarkdownと<a href=\"https://slack.com/intl/ja-jp/help/articles/202288908-%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%81%AE%E6%9B%B8%E5%BC%8F%E8%A8%AD%E5%AE%9A\" target=\"_blank\" rel=\"noopener noreferrer\">SlackのMarkdown</a>が異なっており、妙な分岐を入れる必要がありました。</p>\n<p>GitHubにpushすることでMarkdownとして日報を管理します。</p>\n<p><img class=\"lozad\" src=\"data:image/gif;base64,R0lGODlhAQABAGAAACH5BAEKAP8ALAAAAAABAAEAAAgEAP8FBAA7\" data-src=\"https://i.imgur.com/KXALJYW.png\" alt=\"img\"></p>\n<p>また、Slackへのリマインダーも実施します。</p>\n<p><img class=\"lozad\" src=\"data:image/gif;base64,R0lGODlhAQABAGAAACH5BAEKAP8ALAAAAAABAAEAAAgEAP8FBAA7\" data-src=\"https://i.imgur.com/4petOz9.png\" alt=\"img\"></p>\n<p>これで日報&#x26;リマインダー機能もできました。</p>\n<h2 id=\"まとめ\" style=\"position:relative;\"><a href=\"#%E3%81%BE%E3%81%A8%E3%82%81\" aria-label=\"まとめ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>まとめ</h2>\n<p><img class=\"lozad\" src=\"data:image/gif;base64,R0lGODlhAQABAGAAACH5BAEKAP8ALAAAAAABAAEAAAgEAP8FBAA7\" data-src=\"https://i.imgur.com/LnpjYNN.png\" alt=\"img\"></p>\n<p>これで快適にToDoを記載できるようになったのですが、肝心なToDoがあまりないのでこの仕組みをいつまで使い続けるのか不安になってきました。</p>","words":277,"minutes":1}},"staticQueryHashes":["1319877725","2959249232"]}