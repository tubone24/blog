{"componentChunkName":"component---src-templates-blog-post-tsx","path":"/2021/12/31/blog-bootstrap","result":{"data":{"content":{"edges":[{"node":{"id":"08bc38d6-0eef-58ae-b40f-d8f78b3bb97c","excerpt":"年末ですね。 Table of Contents 今年の汚れ今年のうちに。 問題点 いざ直す旅へ そもそも問題点を考える やったこと Dropdown menuの変更 Column orderの制限 デフォルトでaタグにtext-decoration: underline…","fields":{"slug":"2021/12/31/blog-bootstrap"},"frontmatter":{"id":null,"title":"今年も最後だからBlogのBootstrap v3を何とかする","slug":"2021/12/31/blog-bootstrap","date":"2021-12-31T07:09:52.428Z","headerImage":"https://i.imgur.com/nVO9loz.png","tags":["JavaScript","BootStrap","年越し"]}}}]}},"pageContext":{"id":"08bc38d6-0eef-58ae-b40f-d8f78b3bb97c","index":10,"repHtml":"<p>年末ですね。</p>\n<h2 id=\"table-of-contents\" style=\"position:relative;\"><a href=\"#table-of-contents\" aria-label=\"table of contents permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Table of Contents</h2>\n<div class=\"toc\">\n<ul>\n<li>\n<p><a href=\"#%E4%BB%8A%E5%B9%B4%E3%81%AE%E6%B1%9A%E3%82%8C%E4%BB%8A%E5%B9%B4%E3%81%AE%E3%81%86%E3%81%A1%E3%81%AB\">今年の汚れ今年のうちに。</a></p>\n</li>\n<li>\n<p><a href=\"#%E5%95%8F%E9%A1%8C%E7%82%B9\">問題点</a></p>\n</li>\n<li>\n<p><a href=\"#%E3%81%84%E3%81%96%E7%9B%B4%E3%81%99%E6%97%85%E3%81%B8\">いざ直す旅へ</a></p>\n</li>\n<li>\n<p><a href=\"#%E3%81%9D%E3%82%82%E3%81%9D%E3%82%82%E5%95%8F%E9%A1%8C%E7%82%B9%E3%82%92%E8%80%83%E3%81%88%E3%82%8B\">そもそも問題点を考える</a></p>\n</li>\n<li>\n<p><a href=\"#%E3%82%84%E3%81%A3%E3%81%9F%E3%81%93%E3%81%A8\">やったこと</a></p>\n<ul>\n<li><a href=\"#dropdown-menu%E3%81%AE%E5%A4%89%E6%9B%B4\">Dropdown menuの変更</a></li>\n<li><a href=\"#column-order%E3%81%AE%E5%88%B6%E9%99%90\">Column orderの制限</a></li>\n<li><a href=\"#%E3%83%87%E3%83%95%E3%82%A9%E3%83%AB%E3%83%88%E3%81%A7a%E3%82%BF%E3%82%B0%E3%81%ABtext-decoration-underline%E3%81%8C%E3%81%A4%E3%81%8F\">デフォルトでaタグにtext-decoration: underlineがつく</a></li>\n<li><a href=\"#%E3%83%87%E3%83%95%E3%82%A9%E3%83%AB%E3%83%88%E3%81%A7scroll-behavior-smooth%E3%81%8C%E3%81%A4%E3%81%8F\">デフォルトでscroll-behavior smoothがつく</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#purge%E3%81%AE%E9%87%8E%E6%9C%9B\">Purgeの野望</a></p>\n</li>\n<li>\n<p><a href=\"#%E5%AE%8C%E6%88%90\">完成</a></p>\n</li>\n<li>\n<p><a href=\"#%E6%9C%80%E5%BE%8C%E3%81%AB\">最後に</a></p>\n</li>\n</ul>\n</div>\n<h2 id=\"今年の汚れ今年のうちに\" style=\"position:relative;\"><a href=\"#%E4%BB%8A%E5%B9%B4%E3%81%AE%E6%B1%9A%E3%82%8C%E4%BB%8A%E5%B9%B4%E3%81%AE%E3%81%86%E3%81%A1%E3%81%AB\" aria-label=\"今年の汚れ今年のうちに permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>今年の汚れ今年のうちに。</h2>\n<p>ということで、長らく超技術負債となってしまっていた<strong>このブログ</strong>をなんとかします。</p>\n<p>このブログは、Gatsby.jsをGitHub ActionsでビルドしてNetlifyにデプロイして作られているのですが、CSSフレームワークは<strong>Bootstrap v3.5.1</strong>を使って作られていました。</p>\n<p>さすがに<a href=\"https://blog.getbootstrap.com/2019/07/24/lts-plan/\" target=\"_blank\" rel=\"noopener noreferrer\">2019年にサポート対象外</a>となっているフレームワークを使い続けるのはどうかと思っておりましたが、別に動いているしいいかと思い放置していました。</p>\n<p>が、しかしさすがに今年の汚れ今年のうちにと思い立ち、思い切って脱Bootstrapを考え、<a href=\"https://tailwindcss.com/\" target=\"_blank\" rel=\"noopener noreferrer\">Tailwind</a>とか<a href=\"https://daisyui.com/\" target=\"_blank\" rel=\"noopener noreferrer\">daisyUI</a>とか、<a href=\"https://tailwind-bootstrap-grid.netlify.app/\" target=\"_blank\" rel=\"noopener noreferrer\">tailwind-bootstrap-grid\n</a>とか色々試した結果、めんどくさくなって<strong>Bootstrap v5</strong>に移行することにしました。</p>\n<h2 id=\"問題点\" style=\"position:relative;\"><a href=\"#%E5%95%8F%E9%A1%8C%E7%82%B9\" aria-label=\"問題点 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>問題点</h2>\n<p>BootStrap v3で動いていたこのブログのソースを見てもらえばわかるのですが、Gatsby.jsで動いているブログなのに、Bootstrapは <strong>&#x3C;script></strong> タグを使ってCDNライクに使ってました。(CDN配信ではありません。ここらへんも闇です。)</p>\n<p>Gatsby.jsでは<strong>html.js</strong>というファイルを作ることでHTMLファイルのビルド時に任意のタグを埋め込むことができます。</p>\n<p>それを<strong>悪用</strong>して次のようにBootstrapのCSSを <strong>&#x3C;link></strong> タグで、jQueryとBootstrapのJSを <strong>&#x3C;script></strong> タグでそれぞれ配信されたものを使っている形となっておりました。</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">HTML</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span>\n  htmlAttributes<span class=\"token punctuation\">,</span>\n  headComponents<span class=\"token punctuation\">,</span>\n  bodyAttributes<span class=\"token punctuation\">,</span>\n  preBodyComponents<span class=\"token punctuation\">,</span>\n  body<span class=\"token punctuation\">,</span>\n  postBodyComponents<span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n  <span class=\"token operator\">&lt;</span>html <span class=\"token punctuation\">{</span><span class=\"token operator\">...</span>htmlAttributes<span class=\"token punctuation\">}</span> lang<span class=\"token operator\">=</span><span class=\"token string\">\"ja\"</span><span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>head<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>link\n        rel<span class=\"token operator\">=</span><span class=\"token string\">\"stylesheet\"</span>\n        href<span class=\"token operator\">=</span><span class=\"token string\">\"/vendors/css/bootstrap.min.custom.css\"</span> <span class=\"token comment\">// Bootstrap cssを利用</span>\n      <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n      <span class=\"token punctuation\">{</span>headComponents<span class=\"token punctuation\">}</span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>head<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>body <span class=\"token punctuation\">{</span><span class=\"token operator\">...</span>bodyAttributes<span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\n      <span class=\"token punctuation\">{</span>preBodyComponents<span class=\"token punctuation\">}</span>\n      <span class=\"token operator\">&lt;</span>div\n        key<span class=\"token operator\">=</span><span class=\"token string\">\"body\"</span>\n        id<span class=\"token operator\">=</span><span class=\"token string\">\"___gatsby\"</span>\n        dangerouslySetInnerHTML<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">__html</span><span class=\"token operator\">:</span> body <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n      <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n      <span class=\"token punctuation\">{</span>postBodyComponents<span class=\"token punctuation\">}</span>\n      <span class=\"token operator\">&lt;</span>script src<span class=\"token operator\">=</span><span class=\"token string\">\"/vendors/js/jquery-3.5.1.slim.custom.min.js\"</span> defer <span class=\"token operator\">/</span><span class=\"token operator\">></span> <span class=\"token comment\">// Bootstrapで利用するjQueryを利用</span>\n      <span class=\"token operator\">&lt;</span>script src<span class=\"token operator\">=</span><span class=\"token string\">\"/vendors/js/bootstrap.custom.min.js\"</span> defer <span class=\"token operator\">/</span><span class=\"token operator\">></span> <span class=\"token comment\">// Bootstrap JSを利用</span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>body<span class=\"token operator\">></span>\n  <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>html<span class=\"token operator\">></span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token constant\">HTML</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>これでは下記の問題が発生する形になり大変問題に感じてました。</p>\n<ul>\n<li>npmの管理外になり、パッケージの更新ができない(もはややる気がなかった)</li>\n<li>Bootstrap特有の超でかいCSSをheadでlinkさせてしまっていることでパフォーマンスに悪影響</li>\n<li>deferで読み込むようにしているがBootstrapJS, JQueryも同様に問題</li>\n<li>上記のパフォーマンス問題を解決するために、CSS, JS, JQueryをゴリゴリに改造(Purge)したものをホスティングし、それを配信し使っていた。(もはや...)</li>\n</ul>\n<p>ゴリゴリに改造したCSSとかが正直<a href=\"https://www.nomura.co.jp/terms/japan/sa/A02367.html#:~:text=%E8%8B%B1%E8%AA%9E%E8%A1%A8%E8%A8%98%E3%81%AFsunk%20cost,%E3%82%B5%E3%83%B3%E3%82%AF%E3%82%B3%E3%82%B9%E3%83%88%E5%8A%B9%E6%9E%9C%E3%81%A8%E5%91%BC%E3%81%B6%E3%80%82\" target=\"_blank\" rel=\"noopener noreferrer\">サンクコスト</a>になっており、かつブログのレイアウトを変えたくない気持ちもあったため長らく放置されることになったのです。</p>\n<p>余談ですが、サンクコストって最近言葉知りました。</p>\n<h2 id=\"いざ直す旅へ\" style=\"position:relative;\"><a href=\"#%E3%81%84%E3%81%96%E7%9B%B4%E3%81%99%E6%97%85%E3%81%B8\" aria-label=\"いざ直す旅へ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>いざ直す旅へ</h2>\n<p>ということで早速直していきましょう。冒頭でもお話しましたが、やはり最近のトレンド的に<a href=\"https://tailwindcss.com/\" target=\"_blank\" rel=\"noopener noreferrer\">Tailwind</a>で行きたいですよね!!!!!! (行きたいです〜)</p>\n<p>というわけで<a href=\"https://tailwindcss.com/\" target=\"_blank\" rel=\"noopener noreferrer\">Tailwind</a>を利用する決断をするのですがやってみて次のような悩みが出てきました。</p>\n<p><strong>膨大に作ってしまったコンポーネントをUtility classにするのだるい</strong></p>\n<p>はい...ぶっちゃけそういった悩みが出ました。困りましたね...。なんとかならないものでしょうか...。</p>\n<p>探していたら、<a href=\"https://daisyui.com/\" target=\"_blank\" rel=\"noopener noreferrer\">daisyUI</a>というBootstrapライクなUtility classがあったので使ってみましたが、自分の環境だとほぼ置き換えなしでできそうなのがボタンくらいでした。</p>\n<p>加えてめんどくさいのはこのブログの<strong>Gridシステム</strong>です。ある意味Bootstrapから抜けることのできない一番の理由がGridかもしれません。いや...ちゃんと作り直せばいいだけなんですけどね。</p>\n<p>困り果てていると<a href=\"https://tailwind-bootstrap-grid.netlify.app/\" target=\"_blank\" rel=\"noopener noreferrer\">tailwind-bootstrap-grid</a>というまたもや便利そうなものが出てくるじゃあありませんか。しかしこれも導入を断念しました。</p>\n<p>理由はこのブログのカスタムCSSを管理しているSASSとの相性が悪いことで、ビルドすると次のようなエラーが出てきてしまうことです。</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">ModuleBuildError: Module build failed (from ./node_modules/postcss-loader/dist/cjs.js): TypeError: config is not a function</code></pre></div>\n<p>node-sassやめてPostCSSにすれば直りそうですが、年末にCSSをいじりまくるときっと辛いと思うので断念することにしました。</p>\n<h2 id=\"そもそも問題点を考える\" style=\"position:relative;\"><a href=\"#%E3%81%9D%E3%82%82%E3%81%9D%E3%82%82%E5%95%8F%E9%A1%8C%E7%82%B9%E3%82%92%E8%80%83%E3%81%88%E3%82%8B\" aria-label=\"そもそも問題点を考える permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>そもそも問題点を考える</h2>\n<p>そもそもの話ですが、Tailwind化が目的ではなくBootstrap v3をなんとかしたいことが問題でしたので、いっそのことBootstrapを問題ないバージョンまでバージョンアップすればいいと気が付きました。</p>\n<p>そうと決まれば、Bootstrap v5からはjQueryを使わなくてよくなっていたのでいっそのことv3 => v5のビックバンリライトを実施することにしました。</p>\n<h2 id=\"やったこと\" style=\"position:relative;\"><a href=\"#%E3%82%84%E3%81%A3%E3%81%9F%E3%81%93%E3%81%A8\" aria-label=\"やったこと permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>やったこと</h2>\n<p>まず、html.jsでの <strong>&#x3C;script></strong> タグでのBootstrap利用をやめました。</p>\n<p>Gatsby.jsでは<strong>gatsby-browser.js</strong>を使って、ブラウザ側で利用したいモジュールを設定できますのでこちらにCSSとJSをimportするようにします。</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> <span class=\"token string\">'./src/styles/global.scss'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Dropdown <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'bootstrap/dist/js/bootstrap'</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//　必要なJSモジュールはDropdownなので</span>\n\n<span class=\"token comment\">// global.scssには @import \"~bootstrap/scss/bootstrap.scss\"; という形でBootstrapのCSSをimportする</span></code></pre></div>\n<p>これだけでうまくいくかなーと思いましたが、さすがに甘くありませんでした。ちょっとコードの方も手直しします。</p>\n<h3 id=\"dropdown-menuの変更\" style=\"position:relative;\"><a href=\"#dropdown-menu%E3%81%AE%E5%A4%89%E6%9B%B4\" aria-label=\"dropdown menuの変更 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Dropdown menuの変更</h3>\n<p>Dropdown menuのtoggle buttonの実装方法がちょっとだけ変わってました。 <strong>data-toggle</strong>と<strong>data-target</strong>がそれぞれ<strong>data-bs-toggle</strong>、<strong>data-bs-target</strong>に変わっただけです。</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// before</span>\n  <span class=\"token operator\">&lt;</span>button\n   className<span class=\"token operator\">=</span><span class=\"token string\">\"navbar-toggler\"</span>\n   type<span class=\"token operator\">=</span><span class=\"token string\">\"button\"</span>\n   data<span class=\"token operator\">-</span>toggle<span class=\"token operator\">=</span><span class=\"token string\">\"collapse\"</span>\n   aria<span class=\"token operator\">-</span>label<span class=\"token operator\">=</span><span class=\"token string\">\"navbar-toggler\"</span>\n   data<span class=\"token operator\">-</span>target<span class=\"token operator\">=</span><span class=\"token string\">\"#navbarSupportedContent\"</span>\n  <span class=\"token operator\">></span>\n        \n<span class=\"token comment\">// after</span>\n  <span class=\"token operator\">&lt;</span>button\n   className<span class=\"token operator\">=</span><span class=\"token string\">\"navbar-toggler\"</span>\n   type<span class=\"token operator\">=</span><span class=\"token string\">\"button\"</span>\n   data<span class=\"token operator\">-</span>bs<span class=\"token operator\">-</span>toggle<span class=\"token operator\">=</span><span class=\"token string\">\"collapse\"</span>\n   aria<span class=\"token operator\">-</span>label<span class=\"token operator\">=</span><span class=\"token string\">\"navbar-toggler\"</span>\n   data<span class=\"token operator\">-</span>bs<span class=\"token operator\">-</span>target<span class=\"token operator\">=</span><span class=\"token string\">\"#navbarSupportedContent\"</span>\n  <span class=\"token operator\">></span></code></pre></div>\n<h3 id=\"column-orderの制限\" style=\"position:relative;\"><a href=\"#column-order%E3%81%AE%E5%88%B6%E9%99%90\" aria-label=\"column orderの制限 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Column orderの制限</h3>\n<p>Columnの順番を制御できるOrderについて今までは無邪気にorder-10とかできたのですが、order-5までの制限となっておりました。なのでこちらも修正します。</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// before</span>\n    <span class=\"token operator\">&lt;</span>Sidebar <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>div className<span class=\"token operator\">=</span><span class=\"token string\">\"col-xl-7 col-lg-6 col-md-12 col-sm-12 order-10 content\"</span><span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>Content post<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>html<span class=\"token punctuation\">}</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n \n<span class=\"token comment\">// after</span>\n    <span class=\"token operator\">&lt;</span>Sidebar <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>div className<span class=\"token operator\">=</span><span class=\"token string\">\"col-xl-7 col-lg-6 col-md-12 col-sm-12 order-2 content\"</span><span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>Content post<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>html<span class=\"token punctuation\">}</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span></code></pre></div>\n<h3 id=\"デフォルトでaタグにtext-decoration-underlineがつく\" style=\"position:relative;\"><a href=\"#%E3%83%87%E3%83%95%E3%82%A9%E3%83%AB%E3%83%88%E3%81%A7a%E3%82%BF%E3%82%B0%E3%81%ABtext-decoration-underline%E3%81%8C%E3%81%A4%E3%81%8F\" aria-label=\"デフォルトでaタグにtext decoration underlineがつく permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>デフォルトでaタグにtext-decoration: underlineがつく</h3>\n<p>といういらない変更が入っていたので、こちらは<strong>global.scss</strong>でnoneを上書きします。</p>\n<p><img class=\"lozad\" src=\"data:image/gif;base64,R0lGODlhAQABAGAAACH5BAEKAP8ALAAAAAABAAEAAAgEAP8FBAA7\" data-src=\"https://i.imgur.com/RRvEIHy.png\" alt=\"underlineがつく\"></p>\n<div class=\"gatsby-highlight\" data-language=\"css\"><pre class=\"language-css\"><code class=\"language-css\"><span class=\"token selector\">a</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">text-decoration</span><span class=\"token punctuation\">:</span> none<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3 id=\"デフォルトでscroll-behavior-smoothがつく\" style=\"position:relative;\"><a href=\"#%E3%83%87%E3%83%95%E3%82%A9%E3%83%AB%E3%83%88%E3%81%A7scroll-behavior-smooth%E3%81%8C%E3%81%A4%E3%81%8F\" aria-label=\"デフォルトでscroll behavior smoothがつく permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>デフォルトでscroll-behavior smoothがつく</h3>\n<p>というおせっかいが入っているのでこちらもglobal.scssで無効化します。別にあってもいいかなとも思ったのですが、画像の<strong>Lazy loading</strong>との相性が最悪で遷移先のページでうまく画像を読み込んでくれなかったので無効化します。</p>\n<div class=\"gatsby-highlight\" data-language=\"css\"><pre class=\"language-css\"><code class=\"language-css\"><span class=\"token selector\">:root</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">scroll-behavior</span><span class=\"token punctuation\">:</span> auto<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>あとは細かいレイアウト崩れをちょこちょこ直して完成です。</p>\n<h2 id=\"purgeの野望\" style=\"position:relative;\"><a href=\"#purge%E3%81%AE%E9%87%8E%E6%9C%9B\" aria-label=\"purgeの野望 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Purgeの野望</h2>\n<p>さてこれでBootstrap v5化はできました。Tailwindを使おうと思った理由はPurgeだったので、Purgeしてしまいます。</p>\n<p>Gatsby.jsではCSSのPurgeに<a href=\"https://www.gatsbyjs.com/plugins/gatsby-plugin-purgecss/\" target=\"_blank\" rel=\"noopener noreferrer\">gatsby-plugin-purgecss</a>が利用できます。今回はglobal.scssにBootstrapのCSSをimportしているので<strong>gatsby-config.js</strong>に次のように設定してあげることで利用してないCSS RuleをPurgeしてくれます。</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">    <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">resolve</span><span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">gatsby-plugin-purgecss</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">options</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">printRejected</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">develop</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">purgeOnly</span> <span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'src/styles/global.scss'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// global.scssを指定</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span></code></pre></div>\n<h2 id=\"完成\" style=\"position:relative;\"><a href=\"#%E5%AE%8C%E6%88%90\" aria-label=\"完成 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>完成</h2>\n<p>というわけで完成しました。</p>\n<p>今あなたが見ているブログがまさに<strong>Bootstrap v5で動いているブログ</strong>なわけです。</p>\n<p>ちなみに、Purgeの効果あってかわかりませんが、Lighthouseのパフォーマンススコアは次のとおりでした。</p>\n<p><img class=\"lozad\" src=\"data:image/gif;base64,R0lGODlhAQABAGAAACH5BAEKAP8ALAAAAAABAAEAAAgEAP8FBAA7\" data-src=\"https://i.imgur.com/FX0kdBo.png\" alt=\"lighthouse\"></p>\n<p>みなさまこのブログは <strong>なんでTypeScriptでリライトしないのか？</strong> という疑問があると思うのですが、それもこのBootstrap問題がちょっと絡んでいるので、この際頑張ってTypeScript化しようかなと思ってます。</p>\n<h2 id=\"最後に\" style=\"position:relative;\"><a href=\"#%E6%9C%80%E5%BE%8C%E3%81%AB\" aria-label=\"最後に permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>最後に</h2>\n<p>本年もお世話になりました。来年もよろしくおねがいします!!!</p>\n<p><img class=\"lozad\" src=\"data:image/gif;base64,R0lGODlhAQABAGAAACH5BAEKAP8ALAAAAAABAAEAAAgEAP8FBAA7\" data-src=\"https://i.imgur.com/mwxtvWim.png\" alt=\"tora\"></p>","words":1730,"minutes":5}},"staticQueryHashes":["1319877725","2959249232"]}