{"componentChunkName":"component---src-templates-blog-post-tsx","path":"/2019/12/04/nuxt-toast","result":{"data":{"content":{"edges":[{"node":{"id":"aeb03262-b212-59bc-bcbd-36c2adbb1ca2","excerpt":"わからん 最近Nuxt.jsと戯れるようにしてますが、Nuxt.jsとVue.jsの新しいAPIであるCompositionAPIの相性があまりよくないのか色々苦戦してます。 いよいよツラミもわかってきた頃合いなので一つずつまとめていこうかと思います。 今回はNuxt.js…","fields":{"slug":"2019/12/04/nuxt-toast"},"frontmatter":{"id":null,"title":"Nuxt.jsのmodulesをCompositionAPIで使ってみる(@nuxtjs/toast編)","slug":"2019/12/04/nuxt-toast","date":"2019-12-04T23:43:19.895Z","headerImage":"https://i.imgur.com/29nafu5.png","tags":["JavaScript","TypeScript","Nuxt.js","Vue.js","modules","toast","CompositionAPI"]}}}]}},"pageContext":{"id":"aeb03262-b212-59bc-bcbd-36c2adbb1ca2","index":59,"repHtml":"<p>わからん</p>\n<p>最近<a href=\"https://ja.nuxtjs.org/\" target=\"_blank\" rel=\"noopener noreferrer\"><strong>Nuxt.js</strong></a>と戯れるようにしてますが、Nuxt.jsと<a href=\"https://jp.vuejs.org/index.html\" target=\"_blank\" rel=\"noopener noreferrer\">Vue.js</a>の新しいAPIである<a href=\"https://vue-composition-api-rfc.netlify.com/\" target=\"_blank\" rel=\"noopener noreferrer\"><strong>CompositionAPI</strong></a>の相性があまりよくないのか色々苦戦してます。</p>\n<p>いよいよツラミもわかってきた頃合いなので一つずつまとめていこうかと思います。</p>\n<p>今回は<strong>Nuxt.js</strong>の<strong>modules</strong>を<strong>CompositionAPI</strong>でどう使っていくかを書きます。</p>\n<h2 id=\"table-of-contents\" style=\"position:relative;\"><a href=\"#table-of-contents\" aria-label=\"table of contents permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Table of Contents</h2>\n<div class=\"toc\">\n<ul>\n<li><a href=\"#%E5%85%88%E3%81%AB%E7%B5%90%E8%AB%96\">先に結論</a></li>\n<li><a href=\"#%E3%81%9D%E3%82%82%E3%81%9D%E3%82%82compositionapi%E3%81%A8%E3%81%AF\">そもそもCompositionAPIとは？</a></li>\n<li><a href=\"#nuxtjs%E3%81%A8%E3%81%AE%E7%9B%B8%E6%80%A7\">Nuxt.jsとの相性</a></li>\n<li><a href=\"#nuxtjs%E3%81%AEmodules%E3%81%8Ccompositionapi%E3%81%A7%E4%BD%BF%E3%81%84%E3%81%9F%E3%81%84%E3%82%93%E3%81%A0%E3%81%8C\">Nuxt.jsのmodulesがCompositionAPIで使いたいんだが</a></li>\n<li><a href=\"#compositionapi%E3%81%A0%E3%81%A8vue%E3%82%A4%E3%83%B3%E3%82%B9%E3%82%BF%E3%83%B3%E3%82%B9%E3%81%AB%E3%82%A2%E3%82%AF%E3%82%BB%E3%82%B9%E3%81%A7%E3%81%8D%E3%82%8B%E3%81%AE%E3%81%AFsetup%E5%86%85%E3%81%AE%E3%81%BF\">CompositionAPIだとVueインスタンスにアクセスできるのはsetup内のみ</a></li>\n<li><a href=\"#%E7%B5%90%E8%AB%96\">結論</a></li>\n</ul>\n</div>\n<h2 id=\"先に結論\" style=\"position:relative;\"><a href=\"#%E5%85%88%E3%81%AB%E7%B5%90%E8%AB%96\" aria-label=\"先に結論 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>先に結論</h2>\n<p><strong>実装方法だけ見たい人は下記に進んでください。</strong></p>\n<p><a href=\"#compositionapi%E3%81%A0%E3%81%A8vue%E3%82%A4%E3%83%B3%E3%82%B9%E3%82%BF%E3%83%B3%E3%82%B9%E3%81%AB%E3%82%A2%E3%82%AF%E3%82%BB%E3%82%B9%E3%81%A7%E3%81%8D%E3%82%8B%E3%81%AE%E3%81%AFsetup%E5%86%85%E3%81%AE%E3%81%BF\">CompositionAPIだとVueインスタンスにアクセスできるのはsetup内のみ</a></p>\n<p>また、本実装を施したWebアプリを作ってみました。</p>\n<p><a href=\"https://github.com/tubone24/ebook-homebrew-nuxt-with-typescript-client\" target=\"_blank\" rel=\"noopener noreferrer\">ebook-homebrew-nuxt-with-typescript-client</a></p>\n<p><a href=\"https://github.com/tubone24/ebook-homebrew-nuxt-with-typescript-client/blob/master/components/FileList.vue#L28\" target=\"_blank\" rel=\"noopener noreferrer\">該当のComponent</a></p>\n<p><img class=\"lozad\" src=\"data:image/gif;base64,R0lGODlhAQABAGAAACH5BAEKAP8ALAAAAAABAAEAAAgEAP8FBAA7\" data-src=\"https://i.imgur.com/29nafu5.png\" alt=\"img\"></p>\n<h2 id=\"そもそもcompositionapiとは\" style=\"position:relative;\"><a href=\"#%E3%81%9D%E3%82%82%E3%81%9D%E3%82%82compositionapi%E3%81%A8%E3%81%AF\" aria-label=\"そもそもcompositionapiとは permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>そもそもCompositionAPIとは？</h2>\n<p><a href=\"https://vue-composition-api-rfc.netlify.com/\" target=\"_blank\" rel=\"noopener noreferrer\">CompositionAPI</a>とは、<strong>Vue3.x系</strong>から正式採用される新しいVue.jsの使い方です。</p>\n<p>公式的には</p>\n<blockquote>\n<p>a set of additive, function-based APIs that allow flexible composition of component logic. （コンポーネントロジックの構成を柔軟にできる関数ベースな追加API）</p>\n</blockquote>\n<p>とのこと。</p>\n<p>ここら辺はだんだん使っていけば何となく良いところが見えてきますが、そちらのまとめはまた今度。</p>\n<p>CompositionAPIを使おうと思ったのは、Vue3.xで採用されるというのと、もはや<strong>TypeScript</strong>で書かないと現場で<strong>いじめられてしまう</strong>この世のなかで、VueもTypeScriptで書くことが急務になりつつある状況の中、Vue + TypeScriptで一定のデファクトスタンダードを勝ち得た<a href=\"https://github.com/vuejs/vue-class-component\" target=\"_blank\" rel=\"noopener noreferrer\">ClassAPI</a>という使い方が、色々問題になっているようだったのでそのツラミを取り除いたらしいCompositionAPIを採用しました。</p>\n<p>上記のツラミ・スゴミについて詳しくは下記のプレゼンがすごくわかりやすかったです。</p>\n<iframe loading=\"lazy\" id=\"talk_frame_546926\" class=\"speakerdeck-iframe\" src=\"//speakerdeck.com/player/8b4b30397b814c89872e72f1d0118f93\" width=\"710\" height=\"399\" style=\"aspect-ratio:710/399; border:0; padding:0; margin:0; background:transparent;\" frameborder=\"0\" allowtransparency=\"true\" allowfullscreen=\"allowfullscreen\" mozallowfullscreen=\"true\" webkitallowfullscreen=\"true\"></iframe>\n\n<p>ざっくりと書き方の違いとしては</p>\n<p>ClassAPI(decoratorを使ったパターン)</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token operator\">&lt;</span>script lang<span class=\"token operator\">=</span><span class=\"token string\">\"ts\"</span><span class=\"token operator\">></span>\n<span class=\"token keyword\">import</span> axios <span class=\"token keyword\">from</span> <span class=\"token string\">'axios'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Component<span class=\"token punctuation\">,</span> Prop<span class=\"token punctuation\">,</span> Vue <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"vue-property-decorator\"</span><span class=\"token punctuation\">;</span>\n\n@Component\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">HelloWorld</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Vue</span> <span class=\"token punctuation\">{</span>\n\n  <span class=\"token comment\">// props</span>\n  @<span class=\"token function\">Prop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">private</span> propHoge<span class=\"token operator\">!</span><span class=\"token operator\">:</span> string<span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// data</span>\n  <span class=\"token literal-property property\">message</span><span class=\"token operator\">:</span> string <span class=\"token operator\">=</span> <span class=\"token string\">\"Hoge\"</span><span class=\"token punctuation\">;</span>\n  <span class=\"token literal-property property\">hogeCount</span><span class=\"token operator\">:</span> number <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// computed</span>\n  <span class=\"token keyword\">get</span> <span class=\"token function\">double</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>hogeCount<span class=\"token operator\">*</span> <span class=\"token number\">2</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token comment\">// mounted</span>\n  <span class=\"token function\">mounted</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">gethoge</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token comment\">// methods</span>\n  <span class=\"token function\">getData</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    axios\n      <span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"https://hogehoge.com\"</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">response</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>message <span class=\"token operator\">=</span> response<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>script<span class=\"token operator\">></span></code></pre></div>\n<p>CompositionAPIで書くパターン</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token operator\">&lt;</span>script lang<span class=\"token operator\">=</span><span class=\"token string\">\"ts\"</span><span class=\"token operator\">></span>\n  <span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span>\n    createComponent<span class=\"token punctuation\">,</span>\n    reactive<span class=\"token punctuation\">,</span>\n    onBeforeMount<span class=\"token punctuation\">,</span>\n    onMounted<span class=\"token punctuation\">,</span>\n    computed<span class=\"token punctuation\">,</span>\n    ref\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@vue/composition-api'</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">import</span> axios <span class=\"token keyword\">from</span> <span class=\"token string\">'axios'</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">import</span> toast <span class=\"token keyword\">from</span> <span class=\"token string\">'@nuxtjs/toast'</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span>PdfFileNotFoundError<span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"~/types/error\"</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> backendURL <span class=\"token operator\">=</span> <span class=\"token string\">'https://ebook-homebrew.herokuapp.com/'</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// data</span>\n  <span class=\"token comment\">// ref,またはreactiveとして設定するとTemplateでreactiveに変更が反映される</span>\n  <span class=\"token comment\">// setup()の外でも中でもOK</span>\n  <span class=\"token keyword\">const</span> state <span class=\"token operator\">=</span> <span class=\"token generic-function\"><span class=\"token function\">reactive</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span><span class=\"token punctuation\">{</span>\n    uploadList<span class=\"token operator\">:</span> <span class=\"token builtin\">Array</span><span class=\"token operator\">&lt;</span>Map<span class=\"token operator\">&lt;</span><span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">string</span><span class=\"token operator\">>></span>\n  <span class=\"token punctuation\">}</span><span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    uploadList<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// methods</span>\n  <span class=\"token keyword\">const</span> updateFileList <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">Promise</span><span class=\"token operator\">&lt;</span><span class=\"token keyword\">void</span><span class=\"token operator\">></span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n     <span class=\"token punctuation\">(</span>ロジック<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> downloadPDF <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span>filePath<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">Promise</span><span class=\"token operator\">&lt;</span>Blob<span class=\"token operator\">></span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n　　　<span class=\"token punctuation\">(</span>ロジック<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  \n  <span class=\"token comment\">// typeまたはinterfaceでpropsの型指定</span>\n  <span class=\"token keyword\">type</span> <span class=\"token class-name\">Props</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    propHello<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  \n  <span class=\"token comment\">//createComponet内でprops, components, layoutなどを設定</span>\n  <span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token function\">createComponent</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">//props</span>\n    props<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      propHello<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        type<span class=\"token operator\">:</span> String\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token comment\">//setup()で初めてVueインスタンス化されるのでinjectされたものはsetup内でしかとれない。</span>\n    <span class=\"token function\">setup</span> <span class=\"token punctuation\">(</span>props<span class=\"token operator\">:</span> Props<span class=\"token punctuation\">,</span> ctx<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n      <span class=\"token comment\">// propsをsetup内ローカル変数で再設定</span>\n      <span class=\"token keyword\">const</span> propsHello <span class=\"token operator\">=</span> props<span class=\"token punctuation\">.</span>propHello<span class=\"token punctuation\">;</span>\n\n      <span class=\"token comment\">//Contextをsetupで受け取ることができ、module化されたものはroot要素からとれる</span>\n      <span class=\"token keyword\">const</span> toast <span class=\"token operator\">=</span> ctx<span class=\"token punctuation\">.</span>root<span class=\"token punctuation\">.</span>$root<span class=\"token punctuation\">.</span>$toast<span class=\"token punctuation\">;</span>\n\n      <span class=\"token comment\">//setup内でもmethods作成可能。Context rootから取得するものを使わないといけない場合、setup内で実装するしか道はなさそう</span>\n      <span class=\"token keyword\">const</span> doDownload <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span>filePath<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">Promise</span><span class=\"token operator\">&lt;</span><span class=\"token keyword\">void</span><span class=\"token operator\">></span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n         <span class=\"token punctuation\">(</span>ロジック<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n      <span class=\"token comment\">//ライフサイクルはsetup内で記載、またライフサイクル自体も従来と異なる</span>\n      <span class=\"token function\">onBeforeMount</span><span class=\"token punctuation\">(</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">await</span> <span class=\"token function\">updateFileList</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token comment\">//setupのreturnで返したものがtemplateで使える変数</span>\n      <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n        state<span class=\"token punctuation\">,</span>\n        propsHello<span class=\"token punctuation\">,</span>\n        doDownload\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>script<span class=\"token operator\">></span></code></pre></div>\n<p>となります。</p>\n<p>ぜんぜんかきっぷり違ってびっくり！</p>\n<p>ぱっと見<strong>ClassAPI</strong>のデコレーターの方が<strong>コード量少なくて</strong>見通しはいい気がしますが、ロジック、ステート、レンダリングを好きなように（究極別ファイルに切り出しも可）宣言して、setupでまとめ上げるのは確かに見通しよいかもしれませんね。</p>\n<p>まだ、ここらへんは自分のなかでのベストプラクティスができあがってないので今後考察します。</p>\n<p>あと、<strong>テストコード</strong>はまだ書いてないのですが、毎回Vueインスタンスを<strong>shallowMount</strong>して頑張って書く感じから解放されそうでテストコード的なメリットはありそうです。</p>\n<h2 id=\"nuxtjsとの相性\" style=\"position:relative;\"><a href=\"#nuxtjs%E3%81%A8%E3%81%AE%E7%9B%B8%E6%80%A7\" aria-label=\"nuxtjsとの相性 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Nuxt.jsとの相性</h2>\n<p>CompositionAPIとNuxt.jsの<strong>相性</strong>は今のところ<strong>よくない</strong>と思います。</p>\n<p>その一例が<strong>modules</strong>だと思うので検証がてら考察していきます。</p>\n<h2 id=\"nuxtjsのmodulesがcompositionapiで使いたいんだが\" style=\"position:relative;\"><a href=\"#nuxtjs%E3%81%AEmodules%E3%81%8Ccompositionapi%E3%81%A7%E4%BD%BF%E3%81%84%E3%81%9F%E3%81%84%E3%82%93%E3%81%A0%E3%81%8C\" aria-label=\"nuxtjsのmodulesがcompositionapiで使いたいんだが permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Nuxt.jsのmodulesがCompositionAPIで使いたいんだが</h2>\n<p>ここからが本題なのですが、よくあるNuxt.jsのmodulesを使う実装例のなかで全くといっていいほどCompositionAPIでやってるものがないので、Nuxt.jsの動き方を逐次確認しながらmodulesを使ってみます。</p>\n<p>例えば、ClassAPI（またはOptionsAPI）の場合よくあるNuxt.jsモジュールの例はaxiosです。</p>\n<p>次のようなお困りごとを解決する使い方が例によく出ます。</p>\n<ul>\n<li>HeadlessCMSなど他コンテンツURIをProxyしている場合などで、APIコール時に<strong>HTTP Statusチェック</strong>し、<strong>404</strong>だった場合は別ページを表示させる</li>\n</ul>\n<p>こういったケースだとOptionsAPIでは下記のような実装例があります。</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">//あらかじめnuxt.config.jsにmodules: ['@nuxtjs/axios']を宣言し、同configにplugins: ['~/plugins/axios'] も宣言しておく</span>\n<span class=\"token comment\">//@/plugins/axios.js</span>\n\n<span class=\"token comment\">// modulesのaxiosを呼び出す際の共通のエラー処理を記載</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> $axios<span class=\"token punctuation\">,</span> redirect <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n    $axios<span class=\"token punctuation\">.</span><span class=\"token function\">onError</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">err</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">const</span> statusCode <span class=\"token operator\">=</span> <span class=\"token function\">parseInt</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">.</span>response <span class=\"token operator\">&amp;&amp;</span> err<span class=\"token punctuation\">.</span>response<span class=\"token punctuation\">.</span>status<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>statusCode <span class=\"token operator\">===</span> <span class=\"token number\">404</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token function\">redirect</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/not-found-page'</span><span class=\"token punctuation\">)</span>\n \n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token punctuation\">}</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">//利用側components: hoge.vue</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">methods</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">async</span> <span class=\"token function\">sendRequest</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n <span class=\"token comment\">//methods内では this.$axios</span>\n      <span class=\"token keyword\">const</span> response <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>$axios<span class=\"token punctuation\">.</span><span class=\"token function\">$get</span><span class=\"token punctuation\">(</span><span class=\"token string\">'https://hoge.com'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      res <span class=\"token operator\">=</span> response<span class=\"token punctuation\">.</span>headers<span class=\"token punctuation\">.</span>Accept<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token keyword\">async</span> <span class=\"token function\">asyncData</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> $axios <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n <span class=\"token comment\">//asyncData, fetchなどでは $axiosで取得</span>\n    <span class=\"token keyword\">const</span> hoges<span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> $axios<span class=\"token punctuation\">.</span><span class=\"token function\">$get</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"https://hoge/hoge\"</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">{</span>\n        <span class=\"token literal-property property\">params</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token literal-property property\">userId</span><span class=\"token operator\">:</span> <span class=\"token string\">\"hoon\"</span>\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span> hoges <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>共通のエラーハンドリングを<strong>plugins</strong>に記載するだけで<strong>冗長なハンドリング</strong>を回避できるのはすごいですね。</p>\n<p>ポイントはmodulesで宣言した<code class=\"language-text\">@nuxtjs/axios</code>は書くpage, componentで利用可能でVueインスタンス内では<code class=\"language-text\">this.$axios</code>で取得できるということです。</p>\n<h2 id=\"compositionapiだとvueインスタンスにアクセスできるのはsetup内のみ\" style=\"position:relative;\"><a href=\"#compositionapi%E3%81%A0%E3%81%A8vue%E3%82%A4%E3%83%B3%E3%82%B9%E3%82%BF%E3%83%B3%E3%82%B9%E3%81%AB%E3%82%A2%E3%82%AF%E3%82%BB%E3%82%B9%E3%81%A7%E3%81%8D%E3%82%8B%E3%81%AE%E3%81%AFsetup%E5%86%85%E3%81%AE%E3%81%BF\" aria-label=\"compositionapiだとvueインスタンスにアクセスできるのはsetup内のみ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>CompositionAPIだとVueインスタンスにアクセスできるのはsetup内のみ</h2>\n<p>ということは先ほど話したとおりなのですがそうするとmodulesの利用側はsetup内でのみ使えることになります。</p>\n<p>ということを頭に入れながら<code class=\"language-text\">@nuxtjs/toast</code>を実装していきます。</p>\n<p>まずnuxt.config.ts\nにmodulesを設定していきます。</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token comment\">//nuxt.config.ts</span>\n\n<span class=\"token punctuation\">(</span>中略<span class=\"token punctuation\">)</span>\nmodules<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token string\">'@nuxtjs/toast'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span></code></pre></div>\n<p>toastの利用側のコンポーネントではsetup内で使います。</p>\n<p>ただ、できるだけ<strong>ロジックをsetup内にごちゃごちゃ書きたくないので</strong>、<strong>エラーハンドリング</strong>を使いながら頑張ります。</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token operator\">&lt;</span>script lang<span class=\"token operator\">=</span><span class=\"token string\">\"ts\"</span><span class=\"token operator\">></span>\n  <span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span>\n    createComponent<span class=\"token punctuation\">,</span>\n    reactive<span class=\"token punctuation\">,</span>\n    onBeforeMount<span class=\"token punctuation\">,</span>\n    onMounted<span class=\"token punctuation\">,</span>\n    computed<span class=\"token punctuation\">,</span>\n    ref\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@vue/composition-api'</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">import</span> axios <span class=\"token keyword\">from</span> <span class=\"token string\">'axios'</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">import</span> toast <span class=\"token keyword\">from</span> <span class=\"token string\">'@nuxtjs/toast'</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// 独自エラー(404 NotFound)を作ってtoastを出しわける</span>\n  <span class=\"token keyword\">class</span> <span class=\"token class-name\">PdfFileNotFoundError</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Error</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span>e<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span><span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">;</span>\n      Object<span class=\"token punctuation\">.</span><span class=\"token function\">setPrototypeOf</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">new</span><span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>  \n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">const</span> backendURL <span class=\"token operator\">=</span> <span class=\"token string\">'https://ebook-homebrew.herokuapp.com/'</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// ロジック</span>\n  <span class=\"token keyword\">const</span> downloadPDF <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span>filePath<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">Promise</span><span class=\"token operator\">&lt;</span>Blob<span class=\"token operator\">></span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> res <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> axios<span class=\"token punctuation\">.</span><span class=\"token function\">post</span><span class=\"token punctuation\">(</span>backendURL <span class=\"token operator\">+</span> <span class=\"token string\">'convert/pdf/download'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> uploadId<span class=\"token operator\">:</span> filePath<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">{</span>responseType<span class=\"token operator\">:</span> <span class=\"token string\">'blob'</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">catch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">.</span>response<span class=\"token punctuation\">.</span>status <span class=\"token operator\">===</span> <span class=\"token number\">404</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">PdfFileNotFoundError</span><span class=\"token punctuation\">(</span><span class=\"token string\">'PdfFileNotFound'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n <span class=\"token comment\">//404 NotFoundだったら独自エラーをthrow</span>\n      <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">throw</span> err<span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Blob</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>res<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>type<span class=\"token operator\">:</span> <span class=\"token string\">'application/pdf'</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token function\">createComponent</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n\n    <span class=\"token function\">setup</span> <span class=\"token punctuation\">(</span>ctx<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n <span class=\"token comment\">//setupでContextを受け取れるので受け取る</span>\n      \n      <span class=\"token comment\">//modulesはContextのrootから取れる</span>\n      <span class=\"token keyword\">const</span> toast <span class=\"token operator\">=</span> ctx<span class=\"token punctuation\">.</span>root<span class=\"token punctuation\">.</span>$root<span class=\"token punctuation\">.</span>$toast<span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">const</span> doDownload <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span>filePath<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token builtin\">Promise</span><span class=\"token operator\">&lt;</span><span class=\"token keyword\">void</span><span class=\"token operator\">></span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">const</span> options <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n          position<span class=\"token operator\">:</span> <span class=\"token string\">'top-center'</span><span class=\"token punctuation\">,</span>\n          duration<span class=\"token operator\">:</span> <span class=\"token number\">2000</span><span class=\"token punctuation\">,</span>\n          fullWidth<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n          type<span class=\"token operator\">:</span> <span class=\"token string\">'error'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">as</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">try</span><span class=\"token punctuation\">{</span>\n          <span class=\"token keyword\">const</span> blob <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">downloadPDF</span><span class=\"token punctuation\">(</span>filePath<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n          <span class=\"token keyword\">const</span> link <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">'a'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n          link<span class=\"token punctuation\">.</span>href <span class=\"token operator\">=</span> window<span class=\"token punctuation\">.</span><span class=\"token constant\">URL</span><span class=\"token punctuation\">.</span><span class=\"token function\">createObjectURL</span><span class=\"token punctuation\">(</span>blob<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n          link<span class=\"token punctuation\">.</span>download <span class=\"token operator\">=</span> <span class=\"token string\">'result.pdf'</span><span class=\"token punctuation\">;</span>\n          link<span class=\"token punctuation\">.</span><span class=\"token function\">click</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token comment\">//errorをキャッチ</span>\n          <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>e <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">PdfFileNotFoundError</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            toast<span class=\"token punctuation\">.</span><span class=\"token function\">show</span><span class=\"token punctuation\">(</span><span class=\"token string\">'No File!!'</span><span class=\"token punctuation\">,</span> options<span class=\"token punctuation\">)</span>\n <span class=\"token comment\">//エラーハンドリングでtoast呼び出し</span>\n          <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n            toast<span class=\"token punctuation\">.</span><span class=\"token function\">show</span><span class=\"token punctuation\">(</span><span class=\"token string\">'UnknownError!!'</span><span class=\"token punctuation\">,</span> options<span class=\"token punctuation\">)</span>\n          <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n        state<span class=\"token punctuation\">,</span>\n        doDownload\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>script<span class=\"token operator\">></span>\n</code></pre></div>\n<p>とまぁ、結局のところmodulesはsetupで使うのですが、stateの処理やAPIコール部分はなるべく外だししました。</p>\n<h2 id=\"結論\" style=\"position:relative;\"><a href=\"#%E7%B5%90%E8%AB%96\" aria-label=\"結論 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>結論</h2>\n<p>むずかしい。</p>","words":2153,"minutes":6}},"staticQueryHashes":["1319877725","2959249232"]}