{"componentChunkName":"component---src-templates-blog-post-tsx","path":"/2019/12/12/julia-beginner","result":{"data":{"content":{"edges":[{"node":{"id":"4c8574de-0663-5717-9ec4-664f8c710907","excerpt":"新しめの言語をお勉強しないと会社でゴミ扱いされそうなので、Juliaを使って簡単な何かを作ってみます。 Table of Contents Julia…","fields":{"slug":"2019/12/12/julia-beginner"},"frontmatter":{"id":null,"title":"【初学者】Juliaを使って円周率を求める","slug":"2019/12/12/julia-beginner","date":"2019-12-11T15:13:29.739Z","headerImage":"https://i.imgur.com/y1Av3h3.png","tags":["Julia","円周率","初心者","The Gauss–Legendre algorithm","Leibniz formula for π"]}}}]}},"pageContext":{"id":"4c8574de-0663-5717-9ec4-664f8c710907","index":55,"repHtml":"<p>新しめの言語をお勉強しないと会社でゴミ扱いされそうなので、<strong>Julia</strong>を使って簡単な何かを作ってみます。</p>\n<h2 id=\"table-of-contents\" style=\"position:relative;\"><a href=\"#table-of-contents\" aria-label=\"table of contents permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Table of Contents</h2>\n<div class=\"toc\">\n<ul>\n<li>\n<p><a href=\"#julia%E3%81%A8%E3%81%AF\">Juliaとは</a></p>\n<ul>\n<li><a href=\"#%E7%A7%81%E5%8B%95%E7%9A%84%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%9F%E3%83%B3%E3%82%B0%E8%A8%80%E8%AA%9E%E3%81%AA%E3%81%AE%E3%82%88\">私動的プログラミング言語なのよ</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%E5%86%86%E5%91%A8%E7%8E%87%E3%82%92%E8%A8%88%E7%AE%97%E3%81%97%E3%81%A6%E3%81%BF%E3%82%8B\">円周率を計算してみる</a></p>\n<ul>\n<li><a href=\"#%E3%83%A9%E3%82%A4%E3%83%97%E3%83%8B%E3%83%83%E3%83%84%E3%81%AE%E5%85%AC%E5%BC%8F\">ライプニッツの公式</a></li>\n<li><a href=\"#%E3%82%AC%E3%82%A6%E3%82%B9%E3%83%AB%E3%82%B8%E3%83%A3%E3%83%B3%E3%83%89%E3%83%AB%E3%81%AE%E3%82%A2%E3%83%AB%E3%82%B4%E3%83%AA%E3%82%BA%E3%83%A0\">ガウス＝ルジャンドルのアルゴリズム</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%E7%B5%90%E8%AB%96\">結論</a></p>\n</li>\n</ul>\n</div>\n<h2 id=\"juliaとは\" style=\"position:relative;\"><a href=\"#julia%E3%81%A8%E3%81%AF\" aria-label=\"juliaとは permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Juliaとは</h2>\n<p><img class=\"lozad\" src=\"data:image/gif;base64,R0lGODlhAQABAGAAACH5BAEKAP8ALAAAAAABAAEAAAgEAP8FBAA7\" data-src=\"https://i.imgur.com/UQoGvbD.png\" alt=\"img\"></p>\n<p>Juliaとは、<del>セクシー女優です。</del></p>\n<p>違います。<strong>科学技術計算分野でのプログラミング言語</strong>の座をPython, R, MATLABから奪い取ろうとしてる言語です。</p>\n<p>色々な会話でちやほやされている言語ですが、お前何がすごいねんを少し掘り下げます。</p>\n<h3 id=\"私動的プログラミング言語なのよ\" style=\"position:relative;\"><a href=\"#%E7%A7%81%E5%8B%95%E7%9A%84%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%9F%E3%83%B3%E3%82%B0%E8%A8%80%E8%AA%9E%E3%81%AA%E3%81%AE%E3%82%88\" aria-label=\"私動的プログラミング言語なのよ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>私動的プログラミング言語なのよ</h3>\n<p>Juliaは<strong>動的プログラミング言語</strong>です。コンパイルは実行時に処理されるということです。</p>\n<p>なんや、Pythonと同じやんけと思ってましたがところがどっこい。</p>\n<p><a href=\"https://julialang.org/\" target=\"_blank\" rel=\"noopener noreferrer\">julialang.org</a>に次のように書かれていました。</p>\n<blockquote>\n<p>Julia is fast!</p>\n<p>Julia was designed from the beginning for high performance. Julia programs compile to efficient native code for multiple platforms via LLVM.</p>\n</blockquote>\n<p>なんでそんなに早いのかというと**実行時コンパイル(JIT)**だからです。</p>\n<p>科学技術計算に多いループ処理を効率よく実行するわけですね。</p>\n<p>いやいや、じゃあPythonの**<a href=\"https://pypy.org/\" target=\"_blank\" rel=\"noopener noreferrer\">PyPy</a>**使えばええんやい？って声が聞こえてくるかもしれませんが、ポイントはJITの方式です。</p>\n<p><img class=\"lozad\" src=\"data:image/gif;base64,R0lGODlhAQABAGAAACH5BAEKAP8ALAAAAAABAAEAAAgEAP8FBAA7\" data-src=\"https://i.imgur.com/FKNN9z2.png\" alt=\"pypy\"></p>\n<p><a href=\"https://pypy.org/\" target=\"_blank\" rel=\"noopener noreferrer\">PyPy</a>はJavaでいうところの<strong>Hotspot</strong>みたいな方式(<a href=\"https://en.wikipedia.org/wiki/Tracing_just-in-time_compilation\" target=\"_blank\" rel=\"noopener noreferrer\">TracingJIT</a>というらしいです)でJITを行っているらしく、起動時プロファイルを取りながらHotSpotに対してコンパイルや最適化を実施していくようです。</p>\n<p>その点Juliaは**<a href=\"https://llvm.org/\" target=\"_blank\" rel=\"noopener noreferrer\">LLVM</a><strong>という技術を使って</strong>型推論と最適化**を行ったのち実行されます。</p>\n<p><img class=\"lozad\" src=\"data:image/gif;base64,R0lGODlhAQABAGAAACH5BAEKAP8ALAAAAAABAAEAAAgEAP8FBAA7\" data-src=\"https://i.imgur.com/OzFlEBB.png\" alt=\"llvm\"></p>\n<p>型が同定できることで強力な最適化がなされるので早いらしいです。</p>\n<p>どうでもいいですがLLVMのロゴのドラゴンかっこいいですね。遊戯王カードに出てきそうですね。</p>\n<p><img class=\"lozad\" src=\"data:image/gif;base64,R0lGODlhAQABAGAAACH5BAEKAP8ALAAAAAABAAEAAAgEAP8FBAA7\" data-src=\"https://i.imgur.com/P1kfH3c.png\" alt=\"img\"></p>\n<p><del>遊戯王カード</del></p>\n<p><img class=\"lozad\" src=\"data:image/gif;base64,R0lGODlhAQABAGAAACH5BAEKAP8ALAAAAAABAAEAAAgEAP8FBAA7\" data-src=\"https://i.imgur.com/bnDbMA0.jpg\" alt=\"img\"></p>\n<p>Pythonの**<a href=\"http://numba.pydata.org/\" target=\"_blank\" rel=\"noopener noreferrer\">Namba</a>**もLLVMでJITしてます。なのでもちろん型の指定もできるのでこの手の最適化は強いはず。（早いとは聞いたことがありますが試したことはないです。）</p>\n<p><img class=\"lozad\" src=\"data:image/gif;base64,R0lGODlhAQABAGAAACH5BAEKAP8ALAAAAAABAAEAAAgEAP8FBAA7\" data-src=\"https://i.imgur.com/JdmowXn.jpg\" alt=\"nmb\"></p>\n<p>言語としてネイティブにLLVM対応しているのがJuliaのすごいところだと思います。</p>\n<h2 id=\"円周率を計算してみる\" style=\"position:relative;\"><a href=\"#%E5%86%86%E5%91%A8%E7%8E%87%E3%82%92%E8%A8%88%E7%AE%97%E3%81%97%E3%81%A6%E3%81%BF%E3%82%8B\" aria-label=\"円周率を計算してみる permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>円周率を計算してみる</h2>\n<p>別にベンチマークをとってやろうとかそう言うわけではないのですが、取り急ぎ練習として円周率を計算してみたいと思います。</p>\n<p>この手の計算には有名どころがいくつかあります。</p>\n<h3 id=\"ライプニッツの公式\" style=\"position:relative;\"><a href=\"#%E3%83%A9%E3%82%A4%E3%83%97%E3%83%8B%E3%83%83%E3%83%84%E3%81%AE%E5%85%AC%E5%BC%8F\" aria-label=\"ライプニッツの公式 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ライプニッツの公式</h3>\n<p>超有名どころですね。</p>\n<p><img class=\"lozad\" src=\"data:image/gif;base64,R0lGODlhAQABAGAAACH5BAEKAP8ALAAAAAABAAEAAAgEAP8FBAA7\" data-src=\"https://camo.githubusercontent.com/84934f0d5e27c2df396d1a32d68e6bfcf03f19a5/68747470733a2f2f6c617465782e636f6465636f67732e636f6d2f706e672e6c617465783f312673706163653b2d2673706163653b2535436672616325374231253744253742332537442673706163653b2b2673706163653b2535436672616325374231253744253742352537442673706163653b2d2673706163653b2535436672616325374231253744253742372537442673706163653b2b2673706163653b2535436672616325374231253744253742392537442673706163653b2d2673706163653b25354363646f74732673706163653b3d2673706163653b25354366726163253742253543706925374425374234253744\" alt=\"img\"></p>\n<p>summation symbolで書くと</p>\n<p><img class=\"lozad\" src=\"data:image/gif;base64,R0lGODlhAQABAGAAACH5BAEKAP8ALAAAAAABAAEAAAgEAP8FBAA7\" data-src=\"https://camo.githubusercontent.com/f9cf648caac28b13d3c03320e68fc44f826d6ed8/68747470733a2f2f6c617465782e636f6465636f67732e636f6d2f706e672e6c617465783f25354373756d5f2537426e3d302537442535452673706163653b253543696e6674792673706163653b25354366726163253742282d31292535456e253744253742326e2673706163653b2b2673706163653b312537442673706163653b3d2673706163653b25354366726163253742253543706925374425374234253744\" alt=\"inmg\"></p>\n<p>これをJuliaで書くと</p>\n<div class=\"gatsby-highlight\" data-language=\"julia\"><pre class=\"language-julia\"><code class=\"language-julia\"><span class=\"token keyword\">function</span> leibniz<span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">::</span>BigInt<span class=\"token punctuation\">,</span> debug<span class=\"token operator\">=</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span>\n    ret<span class=\"token punctuation\">::</span>BigFloat <span class=\"token operator\">=</span> <span class=\"token number\">0.0</span>\n    <span class=\"token keyword\">for</span> i <span class=\"token keyword\">in</span> <span class=\"token number\">0</span><span class=\"token punctuation\">:</span>n\n        ret <span class=\"token operator\">+=</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token operator\">^</span>i <span class=\"token operator\">/</span> <span class=\"token punctuation\">(</span><span class=\"token number\">2</span>i <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">end</span>\n    <span class=\"token keyword\">return</span> <span class=\"token number\">4</span>ret\n<span class=\"token keyword\">end</span></code></pre></div>\n<p>BigInt, BigFloatが使えるのでこの手の演算は気持ちいいですねー。</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">julia<span class=\"token operator\">></span> leibniz<span class=\"token punctuation\">(</span>BigInt<span class=\"token punctuation\">(</span><span class=\"token number\">10000</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token number\">3.141692643590543213460768320877940222544825752138710733999805489190209879980251</span></code></pre></div>\n<p>実際に演算してみると、10000ループでも全く精度出ていないことがわかります。</p>\n<p>3.14169......</p>\n<p>ライプニッツの公式は実際の円周率の計算に用いるには収束が非常に遅いために全く適していないので別の方法も試してみます。</p>\n<h3 id=\"ガウスルジャンドルのアルゴリズム\" style=\"position:relative;\"><a href=\"#%E3%82%AC%E3%82%A6%E3%82%B9%E3%83%AB%E3%82%B8%E3%83%A3%E3%83%B3%E3%83%89%E3%83%AB%E3%81%AE%E3%82%A2%E3%83%AB%E3%82%B4%E3%83%AA%E3%82%BA%E3%83%A0\" aria-label=\"ガウスルジャンドルのアルゴリズム permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ガウス＝ルジャンドルのアルゴリズム</h3>\n<p>というのがあるらしいです。</p>\n<p>スーパーコンピュータの検収時このアルゴリズムを使って、πの超高精度計算が用いられることが有名です。</p>\n<p>初期値</p>\n<p><img class=\"lozad\" src=\"data:image/gif;base64,R0lGODlhAQABAGAAACH5BAEKAP8ALAAAAAABAAEAAAgEAP8FBAA7\" data-src=\"https://camo.githubusercontent.com/1993e5f261c59e39060c55c5051b6d566d2e0f47/68747470733a2f2f6c617465782e636f6465636f67732e636f6d2f706e672e6c617465783f615f302673706163653b3d2673706163653b31\" alt=\"igm\"></p>\n<p><img class=\"lozad\" src=\"data:image/gif;base64,R0lGODlhAQABAGAAACH5BAEKAP8ALAAAAAABAAEAAAgEAP8FBAA7\" data-src=\"https://camo.githubusercontent.com/8d736f56ddd07118a1774f0995632f7ed92cb93d/68747470733a2f2f6c617465782e636f6465636f67732e636f6d2f706e672e6c617465783f625f302673706163653b3d2673706163653b25354366726163253742312537442537422535437371727425374232253744253744\" alt=\"img\"></p>\n<p><img class=\"lozad\" src=\"data:image/gif;base64,R0lGODlhAQABAGAAACH5BAEKAP8ALAAAAAABAAEAAAgEAP8FBAA7\" data-src=\"https://camo.githubusercontent.com/dfb35fcea4cee700d28fe04ba0b482c9cc288c8b/68747470733a2f2f6c617465782e636f6465636f67732e636f6d2f706e672e6c617465783f745f302673706163653b3d2673706163653b253543667261632537423125374425374234253744\" alt=\"igm\"></p>\n<p><img class=\"lozad\" src=\"data:image/gif;base64,R0lGODlhAQABAGAAACH5BAEKAP8ALAAAAAABAAEAAAgEAP8FBAA7\" data-src=\"https://camo.githubusercontent.com/65c098ff3f0f75c0430293533e17e16b504f3844/68747470733a2f2f6c617465782e636f6465636f67732e636f6d2f706e672e6c617465783f705f302673706163653b3d2673706163653b31\" alt=\"img\"></p>\n<p>を定義したうえでイテレーションごとに</p>\n<p><img class=\"lozad\" src=\"data:image/gif;base64,R0lGODlhAQABAGAAACH5BAEKAP8ALAAAAAABAAEAAAgEAP8FBAA7\" data-src=\"https://camo.githubusercontent.com/cba3537d1ea8e1e2920bac6d2d986d8668c6dc94/68747470733a2f2f6c617465782e636f6465636f67732e636f6d2f706e672e6c617465783f615f2537426e2b312537442673706163653b3d2673706163653b25354366726163253742615f6e2673706163653b2b2673706163653b625f6e25374425374232253744\" alt=\"inm\"></p>\n<p><img class=\"lozad\" src=\"data:image/gif;base64,R0lGODlhAQABAGAAACH5BAEKAP8ALAAAAAABAAEAAAgEAP8FBAA7\" data-src=\"https://camo.githubusercontent.com/6f8a76b7d734e0230d977c5bbf76cd3067a77f4b/68747470733a2f2f6c617465782e636f6465636f67732e636f6d2f706e672e6c617465783f625f2537426e2b312537442673706163653b3d2673706163653b25354373717274253742615f6e2673706163653b625f6e253744\" alt=\"img\"></p>\n<p><img class=\"lozad\" src=\"data:image/gif;base64,R0lGODlhAQABAGAAACH5BAEKAP8ALAAAAAABAAEAAAgEAP8FBAA7\" data-src=\"https://camo.githubusercontent.com/2ef3a9f33e942ccd75582186758058ec13713027/68747470733a2f2f6c617465782e636f6465636f67732e636f6d2f706e672e6c617465783f745f2537426e2b312537442673706163653b3d2673706163653b745f6e2673706163653b2d2673706163653b705f6e28615f6e2673706163653b2d2673706163653b615f2537426e2b312537442925354532\" alt=\"img\"></p>\n<p><img class=\"lozad\" src=\"data:image/gif;base64,R0lGODlhAQABAGAAACH5BAEKAP8ALAAAAAABAAEAAAgEAP8FBAA7\" data-src=\"https://camo.githubusercontent.com/b6bdb73be9756147bb52874cf609e376da7111ad/68747470733a2f2f6c617465782e636f6465636f67732e636f6d2f706e672e6c617465783f705f2537426e2b312537442673706163653b3d2673706163653b32705f6e\" alt=\"img\"></p>\n<p>という計算をすると</p>\n<p><img class=\"lozad\" src=\"data:image/gif;base64,R0lGODlhAQABAGAAACH5BAEKAP8ALAAAAAABAAEAAAgEAP8FBAA7\" data-src=\"https://camo.githubusercontent.com/c1b93830bd82afea5f8c22c861fd9b8c135af3d6/68747470733a2f2f6c617465782e636f6465636f67732e636f6d2f706e672e6c617465783f25354370692673706163653b253543617070726f782673706163653b2535436672616325374228612673706163653b2b2673706163653b6229253545322537442537423474253744\" alt=\"img\"></p>\n<p>とπに近似するという感じです。</p>\n<p>これをJuliaで書くと</p>\n<div class=\"gatsby-highlight\" data-language=\"julia\"><pre class=\"language-julia\"><code class=\"language-julia\"><span class=\"token keyword\">function</span> gauss_legendre<span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">::</span>BigInt<span class=\"token punctuation\">,</span> debug<span class=\"token operator\">=</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">local</span> a<span class=\"token punctuation\">::</span>BigFloat <span class=\"token operator\">=</span> <span class=\"token number\">1.0</span>\n    <span class=\"token keyword\">local</span> b<span class=\"token punctuation\">::</span>BigFloat <span class=\"token operator\">=</span> <span class=\"token number\">1.0</span> <span class=\"token operator\">/</span> sqrt<span class=\"token punctuation\">(</span><span class=\"token number\">2.0</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">local</span> t<span class=\"token punctuation\">::</span>BigFloat <span class=\"token operator\">=</span> <span class=\"token number\">1.0</span> <span class=\"token operator\">/</span> <span class=\"token number\">4</span>\n    <span class=\"token keyword\">local</span> p<span class=\"token punctuation\">::</span>BigFloat <span class=\"token operator\">=</span> <span class=\"token number\">1.0</span>\n    <span class=\"token keyword\">local</span> tmp<span class=\"token punctuation\">::</span>BigFloat <span class=\"token operator\">=</span> <span class=\"token number\">0</span>\n\n    <span class=\"token keyword\">for</span> i <span class=\"token keyword\">in</span> <span class=\"token number\">0</span><span class=\"token punctuation\">:</span>n\n        tmp <span class=\"token operator\">=</span> a\n        a <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>tmp <span class=\"token operator\">+</span> b<span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> <span class=\"token number\">2</span>\n        b <span class=\"token operator\">=</span> sqrt<span class=\"token punctuation\">(</span>tmp <span class=\"token operator\">*</span> b<span class=\"token punctuation\">)</span>\n        t <span class=\"token operator\">=</span> t <span class=\"token operator\">-</span> <span class=\"token punctuation\">(</span>p <span class=\"token operator\">*</span> <span class=\"token punctuation\">(</span>a <span class=\"token operator\">-</span> tmp<span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> <span class=\"token punctuation\">(</span>a <span class=\"token operator\">-</span> tmp<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        p <span class=\"token operator\">=</span> <span class=\"token number\">2</span>p\n    <span class=\"token keyword\">end</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>a <span class=\"token operator\">+</span> b<span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> <span class=\"token punctuation\">(</span>a <span class=\"token operator\">+</span> b<span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> <span class=\"token number\">4</span>t\n<span class=\"token keyword\">end</span></code></pre></div>\n<p>おおー直感的ですね。</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">julia<span class=\"token operator\">></span> gauss_legendre<span class=\"token punctuation\">(</span>BigInt<span class=\"token punctuation\">(</span><span class=\"token number\">10000</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token number\">3.14159265358979311120035621508437779160333415473350005136581079848894037301245</span></code></pre></div>\n<p>私が覚えている範囲3.1415926535..。</p>\n<p>まではあっていますね。</p>\n<h2 id=\"結論\" style=\"position:relative;\"><a href=\"#%E7%B5%90%E8%AB%96\" aria-label=\"結論 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>結論</h2>\n<p>Juliaをもっと書こうかと思いました。あと、ベンチマークは測ってみます。</p>","words":1509,"minutes":4}},"staticQueryHashes":["1319877725","2959249232"]}