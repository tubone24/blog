{"componentChunkName":"component---src-templates-blog-post-tsx","path":"/2019-09-03-chromedriver","result":{"data":{"content":{"edges":[{"node":{"id":"5c5c82e0-5929-5260-901b-00577715968a","excerpt":"Vue.jsで書いているコードのCI(CircleCI)が通らなくなっていろいろ調べていると原因がわかってきました。 いろいろやってますが、結論失敗してます！！　読む時間がもったいない！ Table of Contents ChromeDriverは Chrome v7…","fields":{"slug":"2019-09-03-chromedriver"},"frontmatter":{"id":null,"title":"ChromeDriverがGoogleChrome v76 に対応していないらしい。","slug":"2019-09-03-chromedriver","date":"2019-09-03T13:09:22.595Z","headerImage":"https://i.imgur.com/6WFqOEs.png","tags":["自動テスト","E2E Test","Selenium","GoogleChrome","ChromeDriver"]}}}]}},"pageContext":{"id":"5c5c82e0-5929-5260-901b-00577715968a","index":86,"repHtml":"<p>Vue.jsで書いているコードのCI(CircleCI)が通らなくなっていろいろ調べていると原因がわかってきました。</p>\n<p><em><strong>いろいろやってますが、結論失敗してます！！　読む時間がもったいない！</strong></em></p>\n<h2 id=\"table-of-contents\" style=\"position:relative;\"><a href=\"#table-of-contents\" aria-label=\"table of contents permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Table of Contents</h2>\n<div class=\"toc\">\n<ul>\n<li><a href=\"#chromedriver%E3%81%AF-chrome-v76%E3%81%AB%E9%9D%9E%E5%AF%BE%E5%BF%9C\">ChromeDriverは Chrome v76に非対応</a></li>\n<li><a href=\"#circleci%E3%81%AEdocker-container%E3%82%92%E4%BD%95%E3%81%A8%E3%81%8B%E3%81%97%E3%81%9F%E3%81%84\">CircleCIのDocker Containerを何とかしたい</a></li>\n<li><a href=\"#chromedriver%E3%81%A8googlechrome%E3%81%AEversion%E3%82%92%E7%A2%BA%E8%AA%8D%E3%81%99%E3%82%8B\">ChromeDriverとGoogleChromeのVersionを確認する</a></li>\n<li><a href=\"#run%E7%B5%90%E6%9E%9C\">Run結果</a></li>\n<li><a href=\"#circleci%E3%81%AEdockerfile%E3%82%92%E7%A2%BA%E8%AA%8D%E3%81%97%E3%81%A6%E3%81%BF%E3%82%8B\">CircleCIのDockerfileを確認してみる</a></li>\n<li><a href=\"#chrome-beta%E3%81%AB%E5%A4%89%E3%81%88%E3%81%A6%E3%81%BF%E3%82%8B\">Chrome Betaに変えてみる</a></li>\n<li><a href=\"#%E7%B5%90%E6%9E%9C\">結果</a></li>\n</ul>\n</div>\n<h2 id=\"chromedriverは-chrome-v76に非対応\" style=\"position:relative;\"><a href=\"#chromedriver%E3%81%AF-chrome-v76%E3%81%AB%E9%9D%9E%E5%AF%BE%E5%BF%9C\" aria-label=\"chromedriverは chrome v76に非対応 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ChromeDriverは Chrome v76に非対応</h2>\n<p>エラーメッセージが出ていました。</p>\n<p><img class=\"lozad\" src=\"data:image/gif;base64,R0lGODlhAQABAGAAACH5BAEKAP8ALAAAAAABAAEAAAgEAP8FBAA7\" data-src=\"https://i.imgur.com/6WFqOEs.png\" alt=\"Img\"></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber 0\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token punctuation\">{</span> value:\n   <span class=\"token punctuation\">{</span> message:\n      <span class=\"token string\">'session not created: Chrome version must be between 71 and 75\\n  (Driver info: chromedriver=2.46.628388 (4a34a70827ac54148e092aafb70504c4ea7ae926),platform=Linux 4.15.0-1043-aws x86_64) (WARNING: The server did not provide any stacktrace information)\\nCommand duration or timeout: 668 milliseconds\\nBuild info: version: \\'</span><span class=\"token number\">3.141</span>.59<span class=\"token punctuation\">\\</span>', revision: <span class=\"token punctuation\">\\</span>'e82be7d358<span class=\"token punctuation\">\\</span>', time: <span class=\"token punctuation\">\\</span>'2018-11-14T08:25:53<span class=\"token punctuation\">\\</span>'<span class=\"token punctuation\">\\</span>nSystem info: host: <span class=\"token punctuation\">\\</span>'5d045d2f1712<span class=\"token punctuation\">\\</span>', ip: <span class=\"token punctuation\">\\</span>'192.168.32.3<span class=\"token punctuation\">\\</span>', os.name: <span class=\"token punctuation\">\\</span>'Linux<span class=\"token punctuation\">\\</span>', os.arch: <span class=\"token punctuation\">\\</span>'amd64<span class=\"token punctuation\">\\</span>', os.version: <span class=\"token punctuation\">\\</span>'4.15.0-1043-aws<span class=\"token punctuation\">\\</span>', java.version: <span class=\"token punctuation\">\\</span>'11.0.4<span class=\"token punctuation\">\\</span>'<span class=\"token punctuation\">\\</span>nDriver info: driver.version: unknown<span class=\"token string\">',\n     error: '</span>session not created' <span class=\"token punctuation\">}</span>,\n  status: <span class=\"token number\">33</span> <span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>ChromeのVersionを71～75の間にしなさいとのこと。</p>\n<h2 id=\"circleciのdocker-containerを何とかしたい\" style=\"position:relative;\"><a href=\"#circleci%E3%81%AEdocker-container%E3%82%92%E4%BD%95%E3%81%A8%E3%81%8B%E3%81%97%E3%81%9F%E3%81%84\" aria-label=\"circleciのdocker containerを何とかしたい permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>CircleCIのDocker Containerを何とかしたい</h2>\n<p>今回はCircleCIを使っているのでDockerfileを編集して、何とかならないか試してみます。</p>\n<h2 id=\"chromedriverとgooglechromeのversionを確認する\" style=\"position:relative;\"><a href=\"#chromedriver%E3%81%A8googlechrome%E3%81%AEversion%E3%82%92%E7%A2%BA%E8%AA%8D%E3%81%99%E3%82%8B\" aria-label=\"chromedriverとgooglechromeのversionを確認する permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ChromeDriverとGoogleChromeのVersionを確認する</h2>\n<p>CircleCIでどんなVersionのChromeDriverとGoogleChromeを使っているのか確認します。</p>\n<p>CircleCIの<a href=\"https://github.com/tubone24/ebook-homebrew-vue-typescript-client/blob/master/.circleci/config.yml\" target=\"_blank\" rel=\"noopener noreferrer\">config.yml</a>にバージョン出力を追加します。</p>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"yaml\"><pre style=\"counter-reset: linenumber 6\" class=\"language-yaml line-numbers\"><code class=\"language-yaml\">    <span class=\"token key atrule\">steps</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> checkout\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">restore_cache</span><span class=\"token punctuation\">:</span>\n          <span class=\"token key atrule\">key</span><span class=\"token punctuation\">:</span> projectname<span class=\"token punctuation\">-</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> .Branch <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">-</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> checksum \"package<span class=\"token punctuation\">-</span>lock.json\" <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span>\n          <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> System information\n          <span class=\"token key atrule\">command</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">|</span><span class=\"token scalar string\"></span>\n<span class=\"token scalar string\">            echo \"Node $(node -v)\"</span>\n<span class=\"token scalar string\">            echo \"NPM v$(npm --version)\"</span>\n<span class=\"token scalar string\">            chromedriver -v</span>\n<span class=\"token scalar string\">            google-chrome --version</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2 id=\"run結果\" style=\"position:relative;\"><a href=\"#run%E7%B5%90%E6%9E%9C\" aria-label=\"run結果 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Run結果</h2>\n<p>v76で統一されているなぁ・・。</p>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"bash\"><pre style=\"counter-reset: linenumber 0\" class=\"language-bash line-numbers\"><code class=\"language-bash\">Node v10.16.3\nNPM v6.9.0\n<span class=\"gatsby-highlight-code-line\">ChromeDriver <span class=\"token number\">76.0</span>.3809.126 <span class=\"token punctuation\">(</span>d80a294506b4c9d18015e755cee48f953ddc3f2f-refs/branch-heads/3809@<span class=\"token punctuation\">{</span>#1024<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></span><span class=\"gatsby-highlight-code-line\">Google Chrome <span class=\"token number\">76.0</span>.3809.132 </span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2 id=\"circleciのdockerfileを確認してみる\" style=\"position:relative;\"><a href=\"#circleci%E3%81%AEdockerfile%E3%82%92%E7%A2%BA%E8%AA%8D%E3%81%97%E3%81%A6%E3%81%BF%E3%82%8B\" aria-label=\"circleciのdockerfileを確認してみる permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>CircleCIのDockerfileを確認してみる</h2>\n<p><a href=\"https://github.com/tubone24/circleci-dockerfiles/blob/master/node/images/10.16.3-stretch/browsers/Dockerfile\" target=\"_blank\" rel=\"noopener noreferrer\">CircleCIのDockerfile</a>をみると、</p>\n<div class=\"gatsby-highlight\" data-language=\"dockerfile\"><pre style=\"counter-reset: linenumber 40\" class=\"language-dockerfile line-numbers\"><code class=\"language-dockerfile\"><span class=\"token comment\"># install chrome</span>\n\n<span class=\"token instruction\"><span class=\"token keyword\">RUN</span> curl --silent --show-error --location --fail --retry 3 --output /tmp/google-chrome-stable_current_amd64.deb https://dl.google.com/linux/direct/google-chrome-stable_current_amd64.deb <span class=\"token operator\">\\</span>\n    &amp;&amp; (sudo dpkg -i /tmp/google-chrome-stable_current_amd64.deb || sudo apt-get -fy install)  <span class=\"token operator\">\\</span>\n    &amp;&amp; rm -rf /tmp/google-chrome-stable_current_amd64.deb <span class=\"token operator\">\\</span>\n    &amp;&amp; sudo sed -i <span class=\"token string\">'s|HERE/chrome\"|HERE/chrome\" --disable-setuid-sandbox --no-sandbox|g'</span> <span class=\"token operator\">\\</span>\n        <span class=\"token string\">\"/opt/google/chrome/google-chrome\"</span> <span class=\"token operator\">\\</span>\n    &amp;&amp; google-chrome --version</span>\n\n<span class=\"token instruction\"><span class=\"token keyword\">RUN</span> CHROME_VERSION=<span class=\"token string\">\"$(google-chrome --version)\"</span> <span class=\"token operator\">\\</span>\n    &amp;&amp; export CHROMEDRIVER_RELEASE=<span class=\"token string\">\"$(echo $CHROME_VERSION | sed 's/^Google Chrome //')\"</span> &amp;&amp; export CHROMEDRIVER_RELEASE=<span class=\"token variable\">${CHROMEDRIVER_RELEASE%%.*}</span> <span class=\"token operator\">\\</span>\n    &amp;&amp; CHROMEDRIVER_VERSION=$(curl --silent --show-error --location --fail --retry 4 --retry-delay 5 http://chromedriver.storage.googleapis.com/LATEST_RELEASE_<span class=\"token variable\">${CHROMEDRIVER_RELEASE}</span>) <span class=\"token operator\">\\</span>\n    &amp;&amp; curl --silent --show-error --location --fail --retry 4 --retry-delay 5 --output /tmp/chromedriver_linux64.zip <span class=\"token string\">\"http://chromedriver.storage.googleapis.com/$CHROMEDRIVER_VERSION/chromedriver_linux64.zip\"</span> <span class=\"token operator\">\\</span>\n    &amp;&amp; cd /tmp <span class=\"token operator\">\\</span>\n    &amp;&amp; unzip chromedriver_linux64.zip <span class=\"token operator\">\\</span>\n    &amp;&amp; rm -rf chromedriver_linux64.zip <span class=\"token operator\">\\</span>\n    &amp;&amp; sudo mv chromedriver /usr/local/bin/chromedriver <span class=\"token operator\">\\</span>\n    &amp;&amp; sudo chmod +x /usr/local/bin/chromedriver <span class=\"token operator\">\\</span>\n    &amp;&amp; chromedriver --version</span>\n</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>どうやらsedでChromeのstableのバージョンと合わせているらしい。なるほど。</p>\n<p>Chrome stableからbetaに変えれば通るかもしれない・・。</p>\n<h2 id=\"chrome-betaに変えてみる\" style=\"position:relative;\"><a href=\"#chrome-beta%E3%81%AB%E5%A4%89%E3%81%88%E3%81%A6%E3%81%BF%E3%82%8B\" aria-label=\"chrome betaに変えてみる permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Chrome Betaに変えてみる</h2>\n<p>CircleCIは自前のDockerから環境を作り、CIを回すことができます。</p>\n<p>なので、Dockerfileを作り、個人Dockerレポジトリにpushし、config.ymlファイルを編集します。</p>\n<p><a href=\"https://github.com/tubone24/ebook-homebrew-vue-typescript-client/blob/master/docker/circleci/fix_chromedriver/Dockerfile\" target=\"_blank\" rel=\"noopener noreferrer\">こんな感じ</a>で書き換えたDockerfileを作ります。</p>\n<div class=\"gatsby-highlight\" data-language=\"dockerfile\"><pre style=\"counter-reset: linenumber 41\" class=\"language-dockerfile line-numbers\"><code class=\"language-dockerfile\"><span class=\"token comment\"># install chrome</span>\n\n<span class=\"token instruction\"><span class=\"token keyword\">RUN</span> curl --silent --show-error --location --fail --retry 3 --output /tmp/google-chrome-beta_current_amd64.deb https://dl.google.com/linux/direct/google-chrome-beta_current_amd64.deb <span class=\"token operator\">\\</span>\n    &amp;&amp; (sudo dpkg -i /tmp/google-chrome-beta_current_amd64.deb || sudo apt-get -fy install)  <span class=\"token operator\">\\</span>\n    &amp;&amp; rm -rf /tmp/google-chrome-beta_current_amd64.deb <span class=\"token operator\">\\</span>\n    &amp;&amp; google-chrome --version</span>\n\n<span class=\"token comment\"># Fix ChromeDriverVersion</span>\n<span class=\"token instruction\"><span class=\"token keyword\">RUN</span> curl --silent --show-error --location --fail --retry 4 --retry-delay 5 --output /tmp/chromedriver_linux64.zip <span class=\"token string\">\"https://chromedriver.storage.googleapis.com/77.0.3865.40/chromedriver_linux64.zip\"</span> <span class=\"token operator\">\\</span>\n    &amp;&amp; cd /tmp <span class=\"token operator\">\\</span>\n    &amp;&amp; unzip chromedriver_linux64.zip <span class=\"token operator\">\\</span>\n    &amp;&amp; rm -rf chromedriver_linux64.zip <span class=\"token operator\">\\</span>\n    &amp;&amp; sudo mv chromedriver /usr/local/bin/chromedriver <span class=\"token operator\">\\</span>\n    &amp;&amp; sudo chmod +x /usr/local/bin/chromedriver <span class=\"token operator\">\\</span>\n    &amp;&amp; chromedriver --version</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>ChromeのBeta版 <code class=\"language-text\">google-chrome-beta_current_amd64.deb</code> ChromeDriverの最新版<code class=\"language-text\">https://chromedriver.storage.googleapis.com/77.0.3865.40/chromedriver_linux64.zip</code>をダウンロードインストールするように変更します。</p>\n<p>続けて、<a href=\"https://cloud.docker.com/i\" target=\"_blank\" rel=\"noopener noreferrer\">DockerHub</a>にDocker個人レポジトリを作っておきます。CircleCIから確認できるように公開設定をpublicにしておきます。</p>\n<p><img class=\"lozad\" src=\"data:image/gif;base64,R0lGODlhAQABAGAAACH5BAEKAP8ALAAAAAABAAEAAAgEAP8FBAA7\" data-src=\"https://i.imgur.com/8xlE18N.png\" alt=\"Img\"></p>\n<p>その後、Docker build &#x26; pushします。</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">docker</span> build -t circle-node:10.16.3-stretch-browsers-fix <span class=\"token builtin class-name\">.</span>\n$ <span class=\"token function\">docker</span> tag circle-node:10.16.3-stretch-browsers-fix tubone24/circleci:10.16.3-stretch-browsers-fi\n$ <span class=\"token function\">docker</span> push tubone24/circleci:10.16.3-stretch-browsers-fix</code></pre></div>\n<p>無事pushまでできたらCircleCIのconfig.ymlのImageを変更します。</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre style=\"counter-reset: linenumber 0\" class=\"language-yaml line-numbers\"><code class=\"language-yaml\"><span class=\"token key atrule\">version</span><span class=\"token punctuation\">:</span> <span class=\"token number\">2</span>\n<span class=\"token key atrule\">jobs</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">build</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">working_directory</span><span class=\"token punctuation\">:</span> ~/workspace\n    <span class=\"token key atrule\">docker</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> tubone24/circleci<span class=\"token punctuation\">:</span>10.16.3<span class=\"token punctuation\">-</span>stretch<span class=\"token punctuation\">-</span>browsers<span class=\"token punctuation\">-</span>fix</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>では、 <img class=\"lozad\" src=\"data:image/gif;base64,R0lGODlhAQABAGAAACH5BAEKAP8ALAAAAAABAAEAAAgEAP8FBAA7\" data-src=\"https://i.imgur.com/w7LQ34r.png\" alt=\"rerun\"> しましょう！</p>\n<h2 id=\"結果\" style=\"position:relative;\"><a href=\"#%E7%B5%90%E6%9E%9C\" aria-label=\"結果 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>結果</h2>\n<p>ダメ見たいですね・・</p>\n<p>ここまでやったのに解決しない。</p>\n<p><img class=\"lozad\" src=\"data:image/gif;base64,R0lGODlhAQABAGAAACH5BAEKAP8ALAAAAAABAAEAAAgEAP8FBAA7\" data-src=\"https://i.imgur.com/p2WKJeV.png\" alt=\"failed\"></p>","words":1053,"minutes":3}},"staticQueryHashes":["1319877725","2959249232"]}