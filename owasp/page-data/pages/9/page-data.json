{"componentChunkName":"component---src-templates-index-tsx","path":"/pages/9","result":{"pageContext":{"totalCount":110,"group":[{"node":{"id":"4cc1f6ab-43d4-5825-be09-401e6357535c","html":"<p>エラーの見逃しがよくあるある.</p>\n<p>自分で作ったWebアプリを何気なく触っていたらバックエンドのAPIと通信するaxiosの実装ミスで期待する動作になっておりませんでした。\nレスポンスで200OK以外が返却された場合ERRORとなってしまうため、<a href=\"https://github.com/axios/axios#handling-errors\" target=\"_blank\" rel=\"noopener noreferrer\">README</a>によるとしっかりcatchしてあげる必要があったようです。</p>\n<p>てっきりaxiosのresponseから取得できるstatuscodeでハンドリングするものだと思っていた・・・。</p>\n<p>悪い例↓</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">async</span> <span class=\"token function\">updateFileList</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> res <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> axios<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span>backendURL <span class=\"token operator\">+</span> <span class=\"token string\">'data/upload/list'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>res<span class=\"token punctuation\">.</span>status <span class=\"token operator\">===</span> <span class=\"token number\">200</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token comment\">//statusでハンドリングしているが、200以外のstatusは設定されない・・</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>uploadList <span class=\"token operator\">=</span> res<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>fileList<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span></code></pre></div>\n<p>いい例↓</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">const</span> res <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> axios<span class=\"token punctuation\">.</span><span class=\"token function\">post</span><span class=\"token punctuation\">(</span>backendURL <span class=\"token operator\">+</span> <span class=\"token string\">'convert/pdf/download'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n    uploadId<span class=\"token operator\">:</span> filePath<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>responseType<span class=\"token operator\">:</span> <span class=\"token string\">'blob'</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">catch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span> <span class=\"token comment\">//catchでエラーをつかむ</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">.</span>response<span class=\"token punctuation\">.</span>status <span class=\"token operator\">===</span> <span class=\"token number\">404</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>$toasted<span class=\"token punctuation\">.</span><span class=\"token function\">show</span><span class=\"token punctuation\">(</span><span class=\"token string\">'No File!!'</span><span class=\"token punctuation\">,</span> options<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span><span class=\"token string\">'PdfFileNotFound'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>それはさておき、エラーが出ていても気が付かなかったのが問題ですので、何とかします。</p>\n<h2 id=\"table-of-contents\" style=\"position:relative;\"><a href=\"#table-of-contents\" aria-label=\"table of contents permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Table of Contents</h2>\n<div class=\"toc\">\n<ul>\n<li>\n<p><a href=\"#sentry%E3%82%92vuejs%E3%81%A7%E4%BD%BF%E3%81%A3%E3%81%A6%E3%81%BF%E3%82%8B\">SentryをVue.jsで使ってみる</a></p>\n<ul>\n<li><a href=\"#maints\">main.ts</a></li>\n<li><a href=\"#%E5%AE%9F%E9%9A%9B%E3%81%AB%E3%82%A8%E3%83%A9%E3%83%BC%E3%82%92%E8%B5%B7%E3%81%93%E3%81%97%E3%81%A6%E3%81%BF%E3%81%9F\">実際にエラーを起こしてみた。</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%E7%B5%90%E8%AB%96\">結論</a></p>\n</li>\n</ul>\n</div>\n<h2 id=\"sentryをvuejsで使ってみる\" style=\"position:relative;\"><a href=\"#sentry%E3%82%92vuejs%E3%81%A7%E4%BD%BF%E3%81%A3%E3%81%A6%E3%81%BF%E3%82%8B\" aria-label=\"sentryをvuejsで使ってみる permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>SentryをVue.jsで使ってみる</h2>\n<p>というわけでさっそく<a href=\"https://github.com/getsentry/sentry\" target=\"_blank\" rel=\"noopener noreferrer\">Sentry</a>を入れてみます。</p>\n<p>Sentryとはエラーイベントを収集・解析して通知するサービスです。\nCloudwatchでもいいのですが、アプリへの導入が簡単にできるのが魅力です。</p>\n<p>さらにフロントエンドだと、OS・ブラウザ情報や認証情報も取ってくれる優れものです。</p>\n<p><img src=\"https://i.imgur.com/7dWvynP.png\" alt=\"Img\"></p>\n<p>くわしくは<a href=\"https://sentry.io/_/demo/?referrer=welcome\" target=\"_blank\" rel=\"noopener noreferrer\">公式Demo: What is Sentry?</a>へ。</p>\n<h3 id=\"maints\" style=\"position:relative;\"><a href=\"#maints\" aria-label=\"maints permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>main.ts</h3>\n<p>main.tsに、</p>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber 0\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> Vue <span class=\"token keyword\">from</span> <span class=\"token string\">'vue'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> App <span class=\"token keyword\">from</span> <span class=\"token string\">'./App.vue'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> router <span class=\"token keyword\">from</span> <span class=\"token string\">'./router'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> store <span class=\"token keyword\">from</span> <span class=\"token string\">'./store/'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"gatsby-highlight-code-line\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> init <span class=\"token keyword\">as</span> SentryInit <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@sentry/browser'</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Dedupe<span class=\"token punctuation\">,</span> ExtraErrorData<span class=\"token punctuation\">,</span> Vue <span class=\"token keyword\">as</span> SentryVue <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@sentry/integrations'</span><span class=\"token punctuation\">;</span></span>\n\n<span class=\"gatsby-highlight-code-line\"><span class=\"token function\">SentryInit</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token literal-property property\">dsn</span><span class=\"token operator\">:</span> <span class=\"token string\">'https://7b6959a517d44d199a9359ccc129cad7@sentry.io/1729562'</span><span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token literal-property property\">integrations</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span></span><span class=\"gatsby-highlight-code-line\">        <span class=\"token keyword\">new</span> <span class=\"token class-name\">Dedupe</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">        <span class=\"token keyword\">new</span> <span class=\"token class-name\">ExtraErrorData</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">depth</span><span class=\"token operator\">:</span> <span class=\"token number\">3</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">        <span class=\"token keyword\">new</span> <span class=\"token class-name\">SentryVue</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> Vue<span class=\"token punctuation\">,</span>  <span class=\"token literal-property property\">attachProps</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\"><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>\n<span class=\"token keyword\">new</span> <span class=\"token class-name\">Vue</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  router<span class=\"token punctuation\">,</span>\n  store<span class=\"token punctuation\">,</span>\n  <span class=\"token function-variable function\">render</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">h</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">h</span><span class=\"token punctuation\">(</span>App<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">$mount</span><span class=\"token punctuation\">(</span><span class=\"token string\">'#app'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>SentryInitを呼び出すだけです。たったそれだけ。</p>\n<p>さらにVue用にIntegrateされたSentryVueを呼び出します。\nたったそれだけ。</p>\n<h3 id=\"実際にエラーを起こしてみた\" style=\"position:relative;\"><a href=\"#%E5%AE%9F%E9%9A%9B%E3%81%AB%E3%82%A8%E3%83%A9%E3%83%BC%E3%82%92%E8%B5%B7%E3%81%93%E3%81%97%E3%81%A6%E3%81%BF%E3%81%9F\" aria-label=\"実際にエラーを起こしてみた permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>実際にエラーを起こしてみた。</h3>\n<p>実際にエラーを起こします。F12で確認してみると404NotFoundのエラーが出ています。</p>\n<p><img src=\"https://i.imgur.com/BUHjgkf.png\" alt=\"Img\"></p>\n<p>Sentryに早速エラーが通知されます。</p>\n<p>エラーが発火したコード位置もわかります。</p>\n<p><img src=\"https://i.imgur.com/Sss0JTL.png\" alt=\"Img\"></p>\n<p>SlackにIntegrationすれば通知もリアルタイムできます。</p>\n<p><img src=\"https://i.imgur.com/qQSiDrc.png\" alt=\"Img\"></p>\n<p>出てきたエラーはIssuesとしてまとめられます。</p>\n<p>有料版ではカテゴライズもされるようですが、お金がないので無料版です。</p>\n<p><img src=\"https://i.imgur.com/IoLPNNW.png\" alt=\"Img\"></p>\n<h2 id=\"結論\" style=\"position:relative;\"><a href=\"#%E7%B5%90%E8%AB%96\" aria-label=\"結論 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>結論</h2>\n<p>結構簡単に実装できたのでいろんなところに入れてみようと思います。</p>","fields":{"slug":"2019/09/22/sentry"},"frontmatter":{"tags":["JavaScript","TypeScript","Sentry","Vue.js","監視"],"templateKey":"blog-post","slug":"2019/09/22/sentry","id":null,"title":"Sentryを使ってフロントエンドのエラーを確認する","url":"2019/09/22/sentry","date":"2019-09-21T15:26:09.132Z","description":"Sentryを使ってフロントエンドのエラーを確認する","headerImage":"https://i.imgur.com/sN5BJB0.png","year":"2019","month":"09"}}},{"node":{"id":"9ba722a6-28d2-53ff-8ccf-85079dea86c4","html":"<p>とりあえずBadge増やしたい.</p>\n<p><a href=\"https://gitpitch.com/\" target=\"_blank\" rel=\"noopener noreferrer\">GitPitch</a>を使って、<a href=\"https://github.com/tubone24/ebook_homebrew\" target=\"_blank\" rel=\"noopener noreferrer\">Ebook Homebrew</a>の紹介プレゼンを作りたいと思います。</p>\n<h2 id=\"table-of-contents\" style=\"position:relative;\"><a href=\"#table-of-contents\" aria-label=\"table of contents permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Table of Contents</h2>\n<div class=\"toc\">\n<ul>\n<li>\n<p><a href=\"#gitpitch%E3%81%A8%E3%81%AF\">GitPitchとは？</a></p>\n</li>\n<li>\n<p><a href=\"#%E5%AE%9F%E9%9A%9B%E3%81%AB%E4%BD%9C%E3%81%A3%E3%81%A6%E3%81%BF%E3%81%9F\">実際に作ってみた</a></p>\n<ul>\n<li><a href=\"#%E3%83%87%E3%83%95%E3%82%A9%E3%83%AB%E3%83%88%E3%81%AE%E8%A8%AD%E5%AE%9A\">デフォルトの設定</a></li>\n<li><a href=\"#%E8%83%8C%E6%99%AF%E8%89%B2%E3%82%92%E5%A4%89%E3%81%88%E3%82%8B\">背景色を変える</a></li>\n<li><a href=\"#%E8%83%8C%E6%99%AF%E3%81%AB%E7%94%BB%E5%83%8F%E3%82%92%E3%81%A4%E3%81%91%E3%82%8B\">背景に画像をつける</a></li>\n<li><a href=\"#%E3%83%95%E3%82%A9%E3%83%B3%E3%83%88%E8%89%B2%E3%81%AA%E3%81%A9%E3%82%92%E5%A4%89%E3%81%88%E3%82%8B\">フォント、色などを変える</a></li>\n<li><a href=\"#%E5%BC%95%E7%94%A8%E6%96%87\">引用文</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%E7%B5%90%E8%AB%96\">結論</a></p>\n</li>\n</ul>\n</div>\n<h2 id=\"gitpitchとは\" style=\"position:relative;\"><a href=\"#gitpitch%E3%81%A8%E3%81%AF\" aria-label=\"gitpitchとは permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>GitPitchとは？</h2>\n<p>GitPitchとは、GitHubのレポジトリにMarkdownで書いたファイルを置いておくだけで勝手にかっちょいいプレゼンが作れるサービスです。</p>\n<div class=\"gatsby-highlight\" data-language=\"markdown\"><pre class=\"language-markdown\"><code class=\"language-markdown\"><span class=\"token title important\"><span class=\"token punctuation\">###</span> テスト</span>\n\n\nこれはテストスライド\n\n\n<span class=\"token hr punctuation\">---</span>\n\n\n<span class=\"token title important\"><span class=\"token punctuation\">###</span> 2スライド</span>\n\n\n<span class=\"token hr punctuation\">---</span>\n\n\n<span class=\"token title important\"><span class=\"token punctuation\">###</span> 3スライド</span>\n\n\n<span class=\"token hr punctuation\">---</span>\n\n\n<span class=\"token title important\"><span class=\"token punctuation\">###</span> おわり</span></code></pre></div>\n<p>こんな感じでよくあるMarkdownの形式で書いてもちゃんとそれっぽいプレゼンが作れます。</p>\n<ul>\n<li>区切り線で次のスライドへ</li>\n<li>見出しはMarkdownの#そのまま</li>\n<li>画像やリンクもMarkdown形式そのまま</li>\n</ul>\n<p>またGitPitch専用の形式もあるので、そちらで書くことで色味やレイアウトも細かく設定できます。</p>\n<p><a href=\"https://gitpitch.com/docs\" target=\"_blank\" rel=\"noopener noreferrer\">Documentはこちら</a></p>\n<h2 id=\"実際に作ってみた\" style=\"position:relative;\"><a href=\"#%E5%AE%9F%E9%9A%9B%E3%81%AB%E4%BD%9C%E3%81%A3%E3%81%A6%E3%81%BF%E3%81%9F\" aria-label=\"実際に作ってみた permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>実際に作ってみた</h2>\n<p>まずは実際に作ってみたプレゼンを見てください！かっこいいでしょ。</p>\n<p><a href=\"https://gitpitch.com/tubone24/ebook_homebrew/master?grs=github#/\" target=\"_blank\" rel=\"noopener noreferrer\">https://gitpitch.com/tubone24/ebook_homebrew/master?grs=github#/</a></p>\n<p>このプレゼンを作るためのMarkdownはこんな感じです。</p>\n<div class=\"gatsby-highlight\" data-language=\"markdown\"><pre class=\"language-markdown\"><code class=\"language-markdown\"><span class=\"token title important\"><span class=\"token punctuation\">#</span> Ebook Homebrew</span>\n\n<span class=\"token hr punctuation\">---</span>\n\n<span class=\"token title important\"><span class=\"token punctuation\">##</span> What is Ebook Homebrew?</span>\n\nEbook homebrew is ...\n\n---?color=#FF9000\n\n<span class=\"token title important\"><span class=\"token punctuation\">###</span> My Studies</span>\n\nThis repo is my Python and more languages studies materials.\n\n<span class=\"token hr punctuation\">---</span>\n\n<span class=\"token title important\"><span class=\"token punctuation\">##</span> ～2018</span>\n\nFirst commits, Ebook homebrew is changing file name \nto only digit name like 001.jpg and make e-book format files.\n\nCommand Line tool to make with <span class=\"token code-snippet code keyword\">`Python`</span>.\n\n---?color=#FF9000\n\n<span class=\"token title important\"><span class=\"token punctuation\">###</span> Features</span>\n\n@ul<span class=\"token url\">[<span class=\"token content\">list-square-bullets list-spaced-bullets</span>](<span class=\"token url\">false</span>)</span>\n<span class=\"token list punctuation\">-</span> Rename file to only digit name like <span class=\"token code-snippet code keyword\">`001.jpg`</span>\n<span class=\"token list punctuation\">-</span> Convert Image to PDF\n<span class=\"token list punctuation\">-</span> Make Zip\n@ulend\n\nExamples..\n\n<span class=\"token hr punctuation\">---</span>\n\n<span class=\"token title important\"><span class=\"token punctuation\">##</span> Think about..</span>\n\n@img<span class=\"token url\">[<span class=\"token content\">clip-img clean-img span-20</span>](<span class=\"token url\">assets/gitpitch/img/author.png</span>)</span>\n\n@quote<span class=\"token url\">[<span class=\"token content\">I want to learn more!</span>](<span class=\"token url\">tubone</span>)</span>\n\n---?color=#FF9000\n\n<span class=\"token title important\"><span class=\"token punctuation\">##</span> Now..</span>\n\n<span class=\"token hr punctuation\">---</span>\n\n<span class=\"token title important\"><span class=\"token punctuation\">###</span> Evolution</span>\n\n<span class=\"token list punctuation\">-</span> Awesome REST API with Open API |\n<span class=\"token list punctuation\">-</span> Read The Docs |\n<span class=\"token list punctuation\">-</span> Perfect Tests(UT/IT/E2E) |\n<span class=\"token list punctuation\">-</span> CI/CD |\n<span class=\"token list punctuation\">-</span> PyPI |\n<span class=\"token list punctuation\">-</span> Heroku |\n<span class=\"token list punctuation\">-</span> <span class=\"token bold\"><span class=\"token punctuation\">**</span><span class=\"token content\">More Client</span><span class=\"token punctuation\">**</span></span> |\n\n---?color=#FF3F80\n\n<span class=\"token title important\"><span class=\"token punctuation\">###</span> Awesome REST API</span>\n\n<span class=\"token url\">[<span class=\"token content\">DEMO SITE</span>](<span class=\"token url\">https://ebook-homebrew.herokuapp.com/#/</span>)</span>\n\n<span class=\"token url\"><span class=\"token operator\">!</span>[<span class=\"token content\">openapi</span>](<span class=\"token url\">assets/gitpitch/img/openapi.png</span>)</span>\n\n---?color=#B867C6\n\n<span class=\"token title important\"><span class=\"token punctuation\">###</span> Read The Docs</span>\n\n<span class=\"token url\">[<span class=\"token content\">Make Docs, Read the docs</span>](<span class=\"token url\">https://ebook-homebrew.readthedocs.io/en/latest/</span>)</span>\n\n<span class=\"token url\"><span class=\"token operator\">!</span>[<span class=\"token content\">readthedoc</span>](<span class=\"token url\">assets/gitpitch/img/readthedocs.png</span>)</span>\n\n<span class=\"token hr punctuation\">---</span>\n\n<span class=\"token title important\"><span class=\"token punctuation\">###</span> Perfect Tests</span>\n\nPerfect Test with Pytest.\n\nAwesome test! coverage 98%! Write UT and IT.\n\n<span class=\"token url\"><span class=\"token operator\">!</span>[<span class=\"token content\">coverage98</span>](<span class=\"token url\">assets/gitpitch/img/coverage98.png</span>)</span>\n\n---?color=#02A8F4\n\n<span class=\"token title important\"><span class=\"token punctuation\">###</span> CI/CD</span>\n\nMany Badges!!\n\n<span class=\"token url\"><span class=\"token operator\">!</span>[<span class=\"token content\">morebadges</span>](<span class=\"token url\">assets/gitpitch/img/morebadges.png</span>)</span>\n\n<span class=\"token hr punctuation\">---</span>\n\n<span class=\"token title important\"><span class=\"token punctuation\">####</span> And AutoDeploy!</span>\n\nAuto Deploy using CI/CD\n\n<span class=\"token url\"><span class=\"token operator\">!</span>[<span class=\"token content\">autodeploy</span>](<span class=\"token url\">assets/gitpitch/img/autodeploy.png</span>)</span>\n\n<span class=\"token hr punctuation\">---</span>\n\n<span class=\"token title important\"><span class=\"token punctuation\">###</span> PyPI</span>\n\nAuto Deploy PyPI with CI/CD\n\n<span class=\"token code-snippet code keyword\">`pip install ebook-homebrew`</span>\n\n<span class=\"token url\"><span class=\"token operator\">!</span>[<span class=\"token content\">pypi</span>](<span class=\"token url\">assets/gitpitch/img/pypi.png</span>)</span>\n\n---?color=#B867C6\n\n<span class=\"token title important\"><span class=\"token punctuation\">###</span> Heroku</span>\n\nHeroku Deploy!\n\n<span class=\"token url\"><span class=\"token operator\">!</span>[<span class=\"token content\">heroku</span>](<span class=\"token url\">assets/gitpitch/img/heroku.png</span>)</span>\n\n---?color=#FF9000\n\n<span class=\"token title important\"><span class=\"token punctuation\">###</span> More Client</span>\n\n<span class=\"token list punctuation\">-</span> Flutter (Android &amp; iOS App) |\n<span class=\"token list punctuation\">-</span> Nim Client |\n<span class=\"token list punctuation\">-</span> Rust Client |\n<span class=\"token list punctuation\">-</span> Vue Client |\n\n<span class=\"token hr punctuation\">---</span>\n\n<span class=\"token title important\"><span class=\"token punctuation\">###</span> Flutter</span>\n\n<span class=\"token url\"><span class=\"token operator\">!</span>[<span class=\"token content\">Flutter</span>](<span class=\"token url\">assets/gitpitch/img/flutter-android.gif</span>)</span>\n\n<span class=\"token hr punctuation\">---</span>\n\n<span class=\"token title important\"><span class=\"token punctuation\">###</span> Vue Client</span>\n\n<span class=\"token url\"><span class=\"token operator\">!</span>[<span class=\"token content\">vue</span>](<span class=\"token url\">assets/gitpitch/img/vue.png</span>)</span>\n\n---?image=assets/gitpitch/img/journey.jpg\n\n@snap[silver-fox text-italics]\nEbook Homebrew's journey is not over yet..\n@snapend</code></pre></div>\n<h3 id=\"デフォルトの設定\" style=\"position:relative;\"><a href=\"#%E3%83%87%E3%83%95%E3%82%A9%E3%83%AB%E3%83%88%E3%81%AE%E8%A8%AD%E5%AE%9A\" aria-label=\"デフォルトの設定 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>デフォルトの設定</h3>\n<p>デフォルトの設定は<code class=\"language-text\">PITCHME.yaml</code>に書きます。</p>\n<p>今回は<a href=\"http://sanographix.github.io/azusa-colors/\" target=\"_blank\" rel=\"noopener noreferrer\">Azusa Colors</a>を参考に配色を決めさせていただきました！</p>\n<p>Azusaは結構LTとかで使わせてもらっています。</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">title</span> <span class=\"token punctuation\">:</span> <span class=\"token string\">\"What is Ebook Homebrew\"</span>\n\n<span class=\"token key atrule\">theme</span><span class=\"token punctuation\">:</span> template\n\n<span class=\"token key atrule\">theme-background</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span> <span class=\"token string\">\"#FFF5E3\"</span> <span class=\"token punctuation\">]</span>\n<span class=\"token key atrule\">theme-headline</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span> <span class=\"token string\">\"Raleway\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"#01BBD4\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"none\"</span> <span class=\"token punctuation\">]</span>\n<span class=\"token key atrule\">theme-byline</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span> <span class=\"token string\">\"Raleway\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"#464E70\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"none\"</span> <span class=\"token punctuation\">]</span>\n<span class=\"token key atrule\">theme-text</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span> <span class=\"token string\">\"Ubuntu\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"#464E70\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"none\"</span> <span class=\"token punctuation\">]</span>\n<span class=\"token key atrule\">theme-links</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span> <span class=\"token string\">\"#5289F7\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"#5254F7\"</span> <span class=\"token punctuation\">]</span>\n<span class=\"token key atrule\">theme-code</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span> <span class=\"token string\">\"Source Code Pro\"</span> <span class=\"token punctuation\">]</span>\n<span class=\"token key atrule\">theme-controls</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span> <span class=\"token string\">\"#464E70\"</span> <span class=\"token punctuation\">]</span>\n<span class=\"token key atrule\">theme-margins</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span> <span class=\"token string\">\"0\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"15px\"</span> <span class=\"token punctuation\">]</span>\n\n<span class=\"token key atrule\">logo</span><span class=\"token punctuation\">:</span> assets/gitpitch/img/logo.png\n\n<span class=\"token key atrule\">highlight</span><span class=\"token punctuation\">:</span> monokai\n\n<span class=\"token key atrule\">slide-number</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span>\n\n<span class=\"token key atrule\">footnote</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"© 2019 tubone-project24\"</span>\n\n\n<span class=\"token key atrule\">vertical-center</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span>\n\n<span class=\"token key atrule\">theme-override</span><span class=\"token punctuation\">:</span> assets/gitpitch/css/main.css\n\n<span class=\"token key atrule\">transition</span><span class=\"token punctuation\">:</span> concave</code></pre></div>\n<p>また、独自でCSSを当てることもできます。 <code class=\"language-text\">theme-override</code>で設定できます。</p>\n<h3 id=\"背景色を変える\" style=\"position:relative;\"><a href=\"#%E8%83%8C%E6%99%AF%E8%89%B2%E3%82%92%E5%A4%89%E3%81%88%E3%82%8B\" aria-label=\"背景色を変える permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>背景色を変える</h3>\n<p>背景色を変えるのは区切り線にパラメータをつけるだけです。</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">---?color=#B867C6</code></pre></div>\n<p><img src=\"https://i.imgur.com/tJFkIB5.png\" alt=\"Img\"></p>\n<h3 id=\"背景に画像をつける\" style=\"position:relative;\"><a href=\"#%E8%83%8C%E6%99%AF%E3%81%AB%E7%94%BB%E5%83%8F%E3%82%92%E3%81%A4%E3%81%91%E3%82%8B\" aria-label=\"背景に画像をつける permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>背景に画像をつける</h3>\n<p>背景に画像をつけるのも背景色を変えるようなイメージで区切り線にパラメータを入れます。</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">---?image=assets/gitpitch/img/journey.jpg</code></pre></div>\n<p><img src=\"https://i.imgur.com/UE6a3e1.png\" alt=\"Img\"></p>\n<h3 id=\"フォント色などを変える\" style=\"position:relative;\"><a href=\"#%E3%83%95%E3%82%A9%E3%83%B3%E3%83%88%E8%89%B2%E3%81%AA%E3%81%A9%E3%82%92%E5%A4%89%E3%81%88%E3%82%8B\" aria-label=\"フォント色などを変える permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>フォント、色などを変える</h3>\n<p>こんな感じで <code class=\"language-text\">@snap</code> <code class=\"language-text\">@snapend</code> で囲った範囲が適用されます。</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">@snap[silver-fox text-italics]\nEbook Homebrew's journey is not over yet..\n@snapend</code></pre></div>\n<p><img src=\"https://i.imgur.com/YlJxm1U.png\" alt=\"Img\"></p>\n<h3 id=\"引用文\" style=\"position:relative;\"><a href=\"#%E5%BC%95%E7%94%A8%E6%96%87\" aria-label=\"引用文 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>引用文</h3>\n<p>引用文は<code class=\"language-text\">@quote[hoge](fuga)</code></p>\n<p>hogeが引用文、fugaが人となります。</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">## Think about..\n\n@img[clip-img clean-img span-20](assets/gitpitch/img/author.png)\n\n@quote[I want to learn more!](tubone)</code></pre></div>\n<p><img src=\"https://i.imgur.com/v9iyA2y.png\" alt=\"Img\"></p>\n<h2 id=\"結論\" style=\"position:relative;\"><a href=\"#%E7%B5%90%E8%AB%96\" aria-label=\"結論 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>結論</h2>\n<p>そのままのMarkdownでもそれなりなプレゼンテーションができますが、カスタマイズも結構できます。LT用に作ってみようかなぁ・・。</p>","fields":{"slug":"2019/09/20/gitpitch"},"frontmatter":{"tags":["GitPitch","GitHub","GitHub Badges","Azusa Colors"],"templateKey":"blog-post","slug":"2019/09/20/gitpitch","id":null,"title":"GitPitchを使ってMarkdownからプレゼンテーションを作ってBadgeをレポジトリに貼る","url":"2019/09/20/gitpitch","date":"2019-09-19T15:26:30.987Z","description":"GitPitchを使ってMarkdownからプレゼンテーションを作ってBadgeをレポジトリに貼る","headerImage":"https://i.imgur.com/CBPn3gW.png","year":"2019","month":"09"}}},{"node":{"id":"d88f48da-c7b6-55d6-8c38-3f2a9485b068","html":"<p>とりあえずかっこよくしたい。</p>\n<p>とりあえず作ったWebページをかっこよくしたいと思い手軽に使えるparticles.jsをVue.jsで使ってみます。</p>\n<h2 id=\"table-of-contents\" style=\"position:relative;\"><a href=\"#table-of-contents\" aria-label=\"table of contents permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Table of Contents</h2>\n<div class=\"toc\">\n<ul>\n<li><a href=\"#npm\">npm</a></li>\n<li><a href=\"#%E7%B0%A1%E5%8D%98%E3%81%AA%E4%BD%BF%E3%81%84%E6%96%B9\">簡単な使い方</a></li>\n<li><a href=\"#%E5%AE%8C%E6%88%90\">完成！</a></li>\n</ul>\n</div>\n<h2 id=\"npm\" style=\"position:relative;\"><a href=\"#npm\" aria-label=\"npm permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>npm</h2>\n<p>particles.jsをVue.jsで簡単に使えるようにしたものがすでにnpmで公開されてました。</p>\n<p>今回はこちらを使います。</p>\n<p><a href=\"https://github.com/creotip/vue-particles\" target=\"_blank\" rel=\"noopener noreferrer\">vue-particles</a></p>\n<h2 id=\"簡単な使い方\" style=\"position:relative;\"><a href=\"#%E7%B0%A1%E5%8D%98%E3%81%AA%E4%BD%BF%E3%81%84%E6%96%B9\" aria-label=\"簡単な使い方 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>簡単な使い方</h2>\n<p>まず、main.tsでvue-particlesをimportします。</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre style=\"counter-reset: linenumber 0\" class=\"language-typescript line-numbers\"><code class=\"language-typescript\"><span class=\"token keyword\">import</span> Vue <span class=\"token keyword\">from</span> <span class=\"token string\">'vue'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> App <span class=\"token keyword\">from</span> <span class=\"token string\">'./App.vue'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> router <span class=\"token keyword\">from</span> <span class=\"token string\">'./router'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> BootstrapVue <span class=\"token keyword\">from</span> <span class=\"token string\">'bootstrap-vue'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token string\">'bootstrap/dist/css/bootstrap.css'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token string\">'bootstrap-vue/dist/bootstrap-vue.css'</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// @ts-ignore</span>\n<span class=\"token keyword\">import</span> VueParticles <span class=\"token keyword\">from</span> <span class=\"token string\">'vue-particles'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> store <span class=\"token keyword\">from</span> <span class=\"token string\">'./store/'</span><span class=\"token punctuation\">;</span>\n\nVue<span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span>BootstrapVue<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nVue<span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span>VueParticles<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nVue<span class=\"token punctuation\">.</span>config<span class=\"token punctuation\">.</span>productionTip <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">new</span> <span class=\"token class-name\">Vue</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  router<span class=\"token punctuation\">,</span>\n  store<span class=\"token punctuation\">,</span>\n  <span class=\"token function-variable function\">render</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>h<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">h</span><span class=\"token punctuation\">(</span>App<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">$mount</span><span class=\"token punctuation\">(</span><span class=\"token string\">'#app'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>importしたあとに、Vue.useします。</p>\n<p>次にApp.vueでparticles.jsを設定します。まずはTemplateにcomponentを設定します。</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre style=\"counter-reset: linenumber 0\" class=\"language-typescript line-numbers\"><code class=\"language-typescript\">      <span class=\"token operator\">&lt;</span>vue<span class=\"token operator\">-</span>particles\n              color<span class=\"token operator\">=</span><span class=\"token string\">\"#add8e6\"</span>\n              <span class=\"token operator\">:</span>particleOpacity<span class=\"token operator\">=</span><span class=\"token string\">\"0.7\"</span>\n              linesColor<span class=\"token operator\">=</span><span class=\"token string\">\"#add8e6\"</span>\n              <span class=\"token operator\">:</span>particlesNumber<span class=\"token operator\">=</span><span class=\"token string\">\"80\"</span>\n              shapeType<span class=\"token operator\">=</span><span class=\"token string\">\"circle\"</span>\n              <span class=\"token operator\">:</span>particleSize<span class=\"token operator\">=</span><span class=\"token string\">\"6\"</span>\n              <span class=\"token operator\">:</span>linesWidth<span class=\"token operator\">=</span><span class=\"token string\">\"2\"</span>\n              <span class=\"token operator\">:</span>lineLinked<span class=\"token operator\">=</span><span class=\"token string\">\"true\"</span>\n              <span class=\"token operator\">:</span>lineOpacity<span class=\"token operator\">=</span><span class=\"token string\">\"0.4\"</span>\n              <span class=\"token operator\">:</span>linesDistance<span class=\"token operator\">=</span><span class=\"token string\">\"150\"</span>\n              <span class=\"token operator\">:</span>moveSpeed<span class=\"token operator\">=</span><span class=\"token string\">\"4\"</span>\n              <span class=\"token operator\">:</span>hoverEffect<span class=\"token operator\">=</span><span class=\"token string\">\"true\"</span>\n              hoverMode<span class=\"token operator\">=</span><span class=\"token string\">\"grab\"</span>\n              <span class=\"token operator\">:</span>clickEffect<span class=\"token operator\">=</span><span class=\"token string\">\"true\"</span>\n              clickMode<span class=\"token operator\">=</span><span class=\"token string\">\"push\"</span>\n              retina_detect<span class=\"token operator\">=</span><span class=\"token string\">\"true\"</span>\n      <span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>vue<span class=\"token operator\">-</span>particles<span class=\"token operator\">></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>次にCSSですのでstyleで設定します。</p>\n<div class=\"gatsby-highlight\" data-language=\"css\"><pre style=\"counter-reset: linenumber 0\" class=\"language-css line-numbers\"><code class=\"language-css\"><span class=\"token selector\">#particles-js</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">background-image</span><span class=\"token punctuation\">:</span> <span class=\"token url\"><span class=\"token function\">url</span><span class=\"token punctuation\">(</span><span class=\"token string url\">\"https://raw.githubusercontent.com/tubone24/ebook-homebrew-vue-typescript-client/master/src/assets/bg.jpg\"</span><span class=\"token punctuation\">)</span></span><span class=\"token punctuation\">;</span>\n    <span class=\"token property\">background-size</span><span class=\"token punctuation\">:</span> cover<span class=\"token punctuation\">;</span>\n    <span class=\"token property\">position</span><span class=\"token punctuation\">:</span> absolute<span class=\"token punctuation\">;</span>\n    <span class=\"token property\">top</span><span class=\"token punctuation\">:</span> 0<span class=\"token punctuation\">;</span>\n    <span class=\"token property\">left</span><span class=\"token punctuation\">:</span> 0<span class=\"token punctuation\">;</span>\n    <span class=\"token property\">width</span><span class=\"token punctuation\">:</span> 100%<span class=\"token punctuation\">;</span>\n    <span class=\"token property\">height</span><span class=\"token punctuation\">:</span> 100%<span class=\"token punctuation\">;</span>\n    <span class=\"token property\">z-index</span><span class=\"token punctuation\">:</span> -999<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>z-indexを-999にしました。こうすることでほかのコンポーネントの下に滑り込ませられます。</p>\n<h2 id=\"完成\" style=\"position:relative;\"><a href=\"#%E5%AE%8C%E6%88%90\" aria-label=\"完成 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>完成！</h2>\n<p>これでかっこよいサイトになりました。</p>\n<p><img src=\"https://i.imgur.com/CafEJCU.png\" alt=\"Img\"></p>","fields":{"slug":"2019-09-12-particles-js"},"frontmatter":{"tags":["JavaScript","Vue.js","particle.js"],"templateKey":"blog-post","slug":"2019-09-12-particles-js","id":null,"title":"particles.jsをVue.jsで使ってかっこいいページを作る","url":"2019-09-12-particles-js","date":"2019-09-12T14:57:14.492Z","description":"particles.jsをVue.jsで使う方法","headerImage":"https://i.imgur.com/CafEJCU.png","year":"2019","month":"09"}}},{"node":{"id":"7c7484ef-7c2a-5338-a24e-f34c7482dd32","html":"<p>エラーをよく読もう・・</p>\n<p>前回書いた記事<a href=\"https://blog.tubone-project24.xyz/2019-09-03-chromedriver\" target=\"_blank\" rel=\"noopener noreferrer\">ChromeDriverがGoogleChrome v76 に対応していないらしい。</a>の解決編です。</p>\n<p>出てくるエラーでググってもそれっぽいものが出てこないので苦しい戦いでしたが、</p>\n<p>そもそもchromedriverを利用するプログラム<a href=\"https://nightwatchjs.org/\" target=\"_blank\" rel=\"noopener noreferrer\"><strong>Nightwatch.js</strong></a>に思考が至らなかったのがまずかったです。</p>\n<p>それでは解決編をどうぞ。</p>\n<h2 id=\"table-of-contents\" style=\"position:relative;\"><a href=\"#table-of-contents\" aria-label=\"table of contents permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Table of Contents</h2>\n<div class=\"toc\">\n<ul>\n<li><a href=\"#%E3%82%A8%E3%83%A9%E3%83%BC%E3%81%AE%E3%81%8A%E3%81%95%E3%82%89%E3%81%84\">エラーのおさらい</a></li>\n<li><a href=\"#%E3%82%82%E3%81%86%E5%B0%91%E3%81%97%E3%81%A1%E3%82%83%E3%82%93%E3%81%A8%E3%82%A8%E3%83%A9%E3%83%BC%E3%82%92%E8%A6%8B%E3%81%A6%E3%81%BF%E3%82%8B\">もう少しちゃんとエラーを見てみる</a></li>\n<li><a href=\"#chromedriver246628388%E3%81%AE%E8%AC%8E\">chromedriver=2.46.628388の謎</a></li>\n<li><a href=\"#nightwatchjs%E3%81%AEchrome%E3%83%86%E3%82%B9%E3%83%88%E3%81%AE%E6%8C%99%E5%8B%95\">Nightwatch.jsのChromeテストの挙動</a></li>\n<li><a href=\"#%E8%A9%A6%E3%81%97%E3%81%ABnode_module%E3%81%AE%E4%B8%AD%E3%81%AB%E5%85%A5%E3%81%A3%E3%81%A6%E3%81%84%E3%82%8Bchromedriver%E3%82%92%E6%9C%80%E6%96%B0%E3%81%AE%E3%82%82%E3%81%AE%E3%81%A8%E7%BD%AE%E3%81%8D%E6%8F%9B%E3%81%88%E3%82%8B\">試しにnode_moduleの中に入っているChromeDriverを最新のものと置き換える</a></li>\n<li><a href=\"#%E5%AE%9F%E8%A1%8C\">実行！</a></li>\n<li><a href=\"#%E3%81%82%E3%81%A8%E3%81%8C%E3%81%8D\">あとがき</a></li>\n</ul>\n</div>\n<h2 id=\"エラーのおさらい\" style=\"position:relative;\"><a href=\"#%E3%82%A8%E3%83%A9%E3%83%BC%E3%81%AE%E3%81%8A%E3%81%95%E3%82%89%E3%81%84\" aria-label=\"エラーのおさらい permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>エラーのおさらい</h2>\n<p>当方ではVue.js(TypeScript + Vuex)でフロントエンドアプリをこじんまり作っていてCircleCIでE2Eテストを回していましたが、急にFailedが出るようになり、CIが通らなくなりました。</p>\n<p>CircleCIで出ているエラーを見てみると次のようなエラーが出ていました。</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">{ value:\n   { message:\n      'session not created: Chrome version must be between 71 and 75\\n  (Driver info: chromedriver=2.46.628388 (4a34a70827ac54148e092aafb70504c4ea7ae926),platform=Linux 4.15.0-1043-aws x86_64) (WARNING: The server did not provide any stacktrace information)\\nCommand duration or timeout: 668 milliseconds\\nBuild info: version: \\'3.141.59\\', revision: \\'e82be7d358\\', time: \\'2018-11-14T08:25:53\\'\\nSystem info: host: \\'5d045d2f1712\\', ip: \\'192.168.32.3\\', os.name: \\'Linux\\', os.arch: \\'amd64\\', os.version: \\'4.15.0-1043-aws\\', java.version: \\'11.0.4\\'\\nDriver info: driver.version: unknown',\n     error: 'session not created' },\n  status: 33 }</code></pre></div>\n<p>本エラーを詳しく見ていくと、<strong>GoogleChromeのバージョンをv71～v75の間にしなさい</strong>というもので、いろいろなサイトを見るとChromeのバージョンアップに合わせて<strong>ChromeDriverのバージョンも上げないといけない</strong>、ということを知りました。</p>\n<p><a href=\"https://github.com/timgrossmann/InstaPy/issues/4800\" target=\"_blank\" rel=\"noopener noreferrer\">GitHub Issue #4800 Message: session not created: Chrome version must be between 71 and 75</a></p>\n<p>そこで、前回の記事内で下記のことを実施しました。</p>\n<ul>\n<li><a href=\"https://blog.tubone-project24.xyz/2019-09-03-chromedriver#chromedriver%E3%81%A8googlechrome%E3%81%AEversion%E3%82%92%E7%A2%BA%E8%AA%8D%E3%81%99%E3%82%8B\" target=\"_blank\" rel=\"noopener noreferrer\">ChromeDriverとGoogleChromeのVersionを確認する</a></li>\n<li><a href=\"https://blog.tubone-project24.xyz/2019-09-03-chromedriver#circleci%E3%81%AEdockerfile%E3%82%92%E7%A2%BA%E8%AA%8D%E3%81%97%E3%81%A6%E3%81%BF%E3%82%8B\" target=\"_blank\" rel=\"noopener noreferrer\">CircleCIのDockerfileを確認してみる</a></li>\n<li><a href=\"https://blog.tubone-project24.xyz/2019-09-03-chromedriver#chrome-beta%E3%81%AB%E5%A4%89%E3%81%88%E3%81%A6%E3%81%BF%E3%82%8B\" target=\"_blank\" rel=\"noopener noreferrer\">Chrome Betaに変えてみる (自前Build環境の作成)</a></li>\n</ul>\n<p>が、しかし結局直りませんでした。</p>\n<h2 id=\"もう少しちゃんとエラーを見てみる\" style=\"position:relative;\"><a href=\"#%E3%82%82%E3%81%86%E5%B0%91%E3%81%97%E3%81%A1%E3%82%83%E3%82%93%E3%81%A8%E3%82%A8%E3%83%A9%E3%83%BC%E3%82%92%E8%A6%8B%E3%81%A6%E3%81%BF%E3%82%8B\" aria-label=\"もう少しちゃんとエラーを見てみる permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>もう少しちゃんとエラーを見てみる</h2>\n<p>もう少しちゃんとエラーを見てみます。すると、あることに気が付きます。</p>\n<p><em><strong>ChromeBetaにバージョンアップしてChromeDriverもバージョンアップしたのにエラーメッセージに出ているChromeDriverのバージョンが想定のものと違う・・</strong></em></p>\n<p>自前Build環境の作成時に入れたChromeDriverのバージョンは<code class=\"language-text\">77.0.3865.40</code>でした。</p>\n<p>ちゃんとこちらはCIのログに出力されていまして、Chromeのバージョンとも合っています。</p>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"bash\"><pre style=\"counter-reset: linenumber 0\" class=\"language-bash line-numbers\"><code class=\"language-bash\">$ <span class=\"token comment\">#!/bin/bash -eo pipefail</span>\n  <span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"Node <span class=\"token variable\"><span class=\"token variable\">$(</span><span class=\"token function\">node</span> -v<span class=\"token variable\">)</span></span>\"</span>\n  <span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"NPM v<span class=\"token variable\"><span class=\"token variable\">$(</span><span class=\"token function\">npm</span> --version<span class=\"token variable\">)</span></span>\"</span>\n  chromedriver -v\n  google-chrome --version\n\nNode v10.16.3\nNPM v6.9.0\n<span class=\"gatsby-highlight-code-line\">ChromeDriver <span class=\"token number\">77.0</span>.3865.40 <span class=\"token punctuation\">(</span>f484704e052e0b556f8030b65b953dce96503217-refs/branch-heads/3865@<span class=\"token punctuation\">{</span>#442<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></span><span class=\"gatsby-highlight-code-line\">Google Chrome <span class=\"token number\">77.0</span>.3865.56 beta</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>ただエラーのほうでは <code class=\"language-text\">Driver info: chromedriver=2.46.628388</code> となっており明らかにバージョンが違います。</p>\n<h2 id=\"chromedriver246628388の謎\" style=\"position:relative;\"><a href=\"#chromedriver246628388%E3%81%AE%E8%AC%8E\" aria-label=\"chromedriver246628388の謎 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>chromedriver=2.46.628388の謎</h2>\n<p>ChromeDriverの<a href=\"https://chromedriver.chromium.org/downloads\" target=\"_blank\" rel=\"noopener noreferrer\">配布サイト</a>に行くと、2.46のChromeDriverは<strong>Supports Chrome v71-73</strong>なことがわかります。</p>\n<p>あれれ、おかしいぞ・・・。</p>\n<h2 id=\"nightwatchjsのchromeテストの挙動\" style=\"position:relative;\"><a href=\"#nightwatchjs%E3%81%AEchrome%E3%83%86%E3%82%B9%E3%83%88%E3%81%AE%E6%8C%99%E5%8B%95\" aria-label=\"nightwatchjsのchromeテストの挙動 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Nightwatch.jsのChromeテストの挙動</h2>\n<p>いよいよ怪しくなってきたので、エラーが出ていない箇所のCIログも追っていきます。</p>\n<p>すると <code class=\"language-text\">npm install</code> する際の動作ログに怪しい動作が見当たりました。</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">> chromedriver@2.46.0 install /home/circleci/workspace/node_modules/chromedriver\n> node install.js\n\nCurrent existing ChromeDriver binary is unavailable, proceding with download and extraction.\nDownloading from file:  https://chromedriver.storage.googleapis.com/2.46/chromedriver_linux64.zip\nSaving to file: /tmp/2.46/chromedriver/chromedriver_linux64.zip\nReceived 782K...\nReceived 1573K...\nReceived 2357K...\nReceived 3141K...\nReceived 3925K...\nReceived 4709K...\nReceived 5277K total.\nExtracting zip contents\nCopying to target path /home/circleci/workspace/node_modules/chromedriver/lib/chromedriver\nFixing file permissions\nDone. ChromeDriver binary available at /home/circleci/workspace/node_modules/chromedriver/lib/chromedriver/chromedriver</code></pre></div>\n<p>node_module内にChromeDriverをダウンロードしている??</p>\n<p><strong>まさか、Nightwatch.jsはこれを使っているのでは?? バージョンもあっているし</strong></p>\n<h2 id=\"試しにnode_moduleの中に入っているchromedriverを最新のものと置き換える\" style=\"position:relative;\"><a href=\"#%E8%A9%A6%E3%81%97%E3%81%ABnode_module%E3%81%AE%E4%B8%AD%E3%81%AB%E5%85%A5%E3%81%A3%E3%81%A6%E3%81%84%E3%82%8Bchromedriver%E3%82%92%E6%9C%80%E6%96%B0%E3%81%AE%E3%82%82%E3%81%AE%E3%81%A8%E7%BD%AE%E3%81%8D%E6%8F%9B%E3%81%88%E3%82%8B\" aria-label=\"試しにnode_moduleの中に入っているchromedriverを最新のものと置き換える permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>試しにnode_moduleの中に入っているChromeDriverを最新のものと置き換える</h2>\n<p>以前作った自前Bulid環境をふんだんに使ってみます。</p>\n<p>Dockerfileを次のように変更します。</p>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"dockerfile\"><pre style=\"counter-reset: linenumber 0\" class=\"language-dockerfile line-numbers\"><code class=\"language-dockerfile\"><span class=\"token comment\"># install chrome</span>\n\n<span class=\"gatsby-highlight-code-line\"><span class=\"token instruction\"><span class=\"token keyword\">RUN</span> curl --silent --show-error --location --fail --retry 3 --output /tmp/google-chrome-stable_current_amd64.deb https://dl.google.com/linux/direct/google-chrome-stable_current_amd64.deb <span class=\"token operator\">\\</span></span>    &amp;&amp; (sudo dpkg -i /tmp/google-chrome-stable_current_amd64.deb || sudo apt-get -fy install)  <span class=\"token operator\">\\</span>\n    &amp;&amp; rm -rf /tmp/google-chrome-stable_current_amd64.deb <span class=\"token operator\">\\</span>\n    &amp;&amp; google-chrome --version</span>\n\n<span class=\"token comment\">#  Install ChromeDriver</span>\n<span class=\"token instruction\"><span class=\"token keyword\">RUN</span> CHROME_VERSION=<span class=\"token string\">\"$(google-chrome --version)\"</span> <span class=\"token operator\">\\</span>\n    &amp;&amp; export CHROMEDRIVER_RELEASE=<span class=\"token string\">\"$(echo $CHROME_VERSION | sed 's/^Google Chrome //')\"</span> &amp;&amp; export CHROMEDRIVER_RELEASE=<span class=\"token variable\">${CHROMEDRIVER_RELEASE%%.*}</span> <span class=\"token operator\">\\</span>\n    &amp;&amp; CHROMEDRIVER_VERSION=$(curl --silent --show-error --location --fail --retry 4 --retry-delay 5 http://chromedriver.storage.googleapis.com/LATEST_RELEASE_<span class=\"token variable\">${CHROMEDRIVER_RELEASE}</span>) <span class=\"token operator\">\\</span>\n    &amp;&amp; curl --silent --show-error --location --fail --retry 4 --retry-delay 5 --output /tmp/chromedriver_linux64.zip <span class=\"token string\">\"http://chromedriver.storage.googleapis.com/$CHROMEDRIVER_VERSION/chromedriver_linux64.zip\"</span> <span class=\"token operator\">\\</span>\n    &amp;&amp; cd /tmp <span class=\"token operator\">\\</span>\n    &amp;&amp; unzip chromedriver_linux64.zip <span class=\"token operator\">\\</span>\n    &amp;&amp; rm -rf chromedriver_linux64.zip <span class=\"token operator\">\\</span>\n<span class=\"gatsby-highlight-code-line\">    &amp;&amp; sudo cp chromedriver /usr/local/bin/chromedriver <span class=\"token operator\">\\</span></span><span class=\"gatsby-highlight-code-line\">    &amp;&amp; sudo chmod +x chromedriver <span class=\"token operator\">\\</span></span>    &amp;&amp; sudo chmod +x /usr/local/bin/chromedriver <span class=\"token operator\">\\</span>\n    &amp;&amp; chromedriver --version</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<ul>\n<li>とりあえず、ChromeBetaではなく、安定版を入れるように変更しました。</li>\n<li>最新のChromeDriverを/tmp領域に実行権限を入れたまま放置するようにしました。</li>\n</ul>\n<p>続いてCI側です。</p>\n<p>CircleCIのconfig.ymlを次のように変えました。</p>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"yaml\"><pre style=\"counter-reset: linenumber 0\" class=\"language-yaml line-numbers\"><code class=\"language-yaml\">      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span>\n          <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Install dependencies\n          <span class=\"token key atrule\">command</span><span class=\"token punctuation\">:</span> npm install\n<span class=\"gatsby-highlight-code-line\">      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span></span><span class=\"gatsby-highlight-code-line\">          <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Fix ChromeDriver with nightwatch.js</span><span class=\"gatsby-highlight-code-line\">          <span class=\"token key atrule\">command</span><span class=\"token punctuation\">:</span> mv <span class=\"token punctuation\">-</span>f /tmp/chromedriver node_modules/chromedriver/lib/chromedriver/chromedriver</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<ul>\n<li>npm install後、node_modulesのChromeDriverを最新のもの(/tmpに入れたもの)と置き換えます。</li>\n</ul>\n<h2 id=\"実行\" style=\"position:relative;\"><a href=\"#%E5%AE%9F%E8%A1%8C\" aria-label=\"実行 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>実行！</h2>\n<p>なんとうまくいきました。</p>\n<p>直ったのでOKです。</p>\n<p><img src=\"https://i.imgur.com/71HlXYT.png\" alt=\"Img\"></p>\n<p>久しぶりにsuccessを見た・・。</p>\n<p><img src=\"https://i.imgur.com/FYjENBL.png\" alt=\"Img\"></p>\n<h2 id=\"あとがき\" style=\"position:relative;\"><a href=\"#%E3%81%82%E3%81%A8%E3%81%8C%E3%81%8D\" aria-label=\"あとがき permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>あとがき</h2>\n<p>Nightwatch.jsの動きが気になったのでもう少し深く見ていくとNightwatch.js自体はChromeDriverを依存パッケージとしては入れないようです。</p>\n<p><a href=\"https://github.com/nightwatchjs/nightwatch/blob/master/package.json\" target=\"_blank\" rel=\"noopener noreferrer\">Package.json</a></p>\n<p>代わりにChromeDriverを入れていたのは<code class=\"language-text\">vue-cli\n</code> のテストパッケージでした。</p>\n<p><a href=\"https://github.com/vuejs/vue-cli/blob/dev/packages/%40vue/cli-plugin-e2e-nightwatch/package.json\" target=\"_blank\" rel=\"noopener noreferrer\">Package.json</a></p>\n<p>また、最新のnpm installできる<a href=\"https://www.npmjs.com/package/chromedriver\" target=\"_blank\" rel=\"noopener noreferrer\">ChromeDriver</a>は<code class=\"language-text\">76.0.1\n</code>でしたので、もしかしたらnpm updateするだけでよかったのかもしれません。</p>\n<p>一応、依存パッケージのアップデートはCI契機(<a href=\"https://github.com/marketplace/dependabot-preview\" target=\"_blank\" rel=\"noopener noreferrer\">Dependabot Preview\n</a>)で動かすようにしていたのがあだになったかもしれませんねー。</p>","fields":{"slug":"2019-09-10-nightwatchjs-chromedriver"},"frontmatter":{"tags":["自動テスト","E2Eテスト","ChromeDriver","Nightwatch.js"],"templateKey":"blog-post","slug":"2019-09-10-nightwatchjs-chromedriver","id":null,"title":"Nightwatch.jsでE2Eテストを回したときにうまく動かないたった一つの理由","url":"2019-09-10-nightwatchjs-chromedriver","date":"2019-09-10T13:00:00.411Z","description":"ChromeDriverがGoogleChrome v76 に対応していないらしい。の続編","headerImage":"https://i.imgur.com/MyBxJCZ.png","year":"2019","month":"09"}}},{"node":{"id":"67bf548d-8279-506f-a1d2-a9c37a95ab7f","html":"<p>Hyper-vでも仮想マシンしたい!</p>\n<p>セキュリティのテストやトレーニング用に意図的に脆弱性を作った仮想マシン <strong>Metasploitable</strong> はVirtualBox用のVMですが、Hyper-vに入れてみます。</p>\n<h2 id=\"table-of-contents\" style=\"position:relative;\"><a href=\"#table-of-contents\" aria-label=\"table of contents permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Table of Contents</h2>\n<div class=\"toc\">\n<ul>\n<li><a href=\"#%E3%83%80%E3%82%A6%E3%83%B3%E3%83%AD%E3%83%BC%E3%83%89\">ダウンロード</a></li>\n<li><a href=\"#microsoft-virtual-machine-converter%E3%82%92%E3%83%80%E3%82%A6%E3%83%B3%E3%83%AD%E3%83%BC%E3%83%89%E3%81%99%E3%82%8B\">Microsoft Virtual Machine Converterをダウンロードする</a></li>\n<li><a href=\"#powershell%E3%82%92%E4%BD%BF%E3%81%A3%E3%81%A6%E5%A4%89%E6%8F%9B%E3%81%99%E3%82%8B\">Powershellを使って変換する</a></li>\n<li><a href=\"#hyper-v%E3%81%A7%E4%BB%AE%E6%83%B3%E3%83%9E%E3%82%B7%E3%83%B3%E3%82%92%E4%BD%9C%E3%82%8B\">Hyper-vで仮想マシンを作る</a></li>\n<li><a href=\"#%E8%B5%B7%E5%8B%95%E3%81%99%E3%82%8B\">起動する</a></li>\n</ul>\n</div>\n<h2 id=\"ダウンロード\" style=\"position:relative;\"><a href=\"#%E3%83%80%E3%82%A6%E3%83%B3%E3%83%AD%E3%83%BC%E3%83%89\" aria-label=\"ダウンロード permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ダウンロード</h2>\n<p><a href=\"https://sourceforge.net/projects/metasploitable/\" target=\"_blank\" rel=\"noopener noreferrer\">sourceforge</a>からMetasploitableをダウンロードします。</p>\n<p>ダウンロードしたZIPファイルを展開すると<strong>VMDK</strong>ファイルがありますので、これをHyper-vのディスクフォーマット<strong>VHDX</strong>にしていきます。</p>\n<p><img src=\"https://i.imgur.com/Hx7m0bS.png\" alt=\"Img\"></p>\n<h2 id=\"microsoft-virtual-machine-converterをダウンロードする\" style=\"position:relative;\"><a href=\"#microsoft-virtual-machine-converter%E3%82%92%E3%83%80%E3%82%A6%E3%83%B3%E3%83%AD%E3%83%BC%E3%83%89%E3%81%99%E3%82%8B\" aria-label=\"microsoft virtual machine converterをダウンロードする permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Microsoft Virtual Machine Converterをダウンロードする</h2>\n<p>Microsoft Virtual Machine Converterを使えば、VirtualboxのディスクフォーマットファイルをHyper-vのフォーマットに変換できます。</p>\n<p><a href=\"https://www.microsoft.com/en-us/download/details.aspx?id=42497\" target=\"_blank\" rel=\"noopener noreferrer\">MVMC</a></p>\n<p>MSIをダウンロードしてインストールします。</p>\n<p><img src=\"https://i.imgur.com/qi0xtKd.png\" alt=\"Img\"></p>\n<h2 id=\"powershellを使って変換する\" style=\"position:relative;\"><a href=\"#powershell%E3%82%92%E4%BD%BF%E3%81%A3%E3%81%A6%E5%A4%89%E6%8F%9B%E3%81%99%E3%82%8B\" aria-label=\"powershellを使って変換する permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Powershellを使って変換する</h2>\n<p>MVMCをインストールしたらPowershellを使って変換します。</p>\n<p>Powershellを管理者モードで開きます。</p>\n<p><img src=\"https://i.imgur.com/EIowtzV.png\" alt=\"Img\"></p>\n<p>下記コマンドを打ち、変換します。</p>\n<div class=\"gatsby-highlight\" data-language=\"powershell\"><pre style=\"counter-reset: linenumber 0\" class=\"language-powershell line-numbers\"><code class=\"language-powershell\"><span class=\"token function\">import-module</span> <span class=\"token string\">\"C:\\Program Files\\Microsoft Virtual Machine Converter\\MvmcCmdlet.psd1\"</span>\n \n<span class=\"token function\">ConvertTo-MvmcVirtualHardDisk</span> <span class=\"token operator\">-</span>SourceLiteralPath <span class=\"token string\">\"xxxx.vmdk\"</span> <span class=\"token operator\">-</span>DestinationLiteralPath <span class=\"token string\">\"xxxx.vhdx\"</span> <span class=\"token operator\">-</span>VhdFormat Vhdx</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>しばらく待つと、vhdxファイルができます。</p>\n<h2 id=\"hyper-vで仮想マシンを作る\" style=\"position:relative;\"><a href=\"#hyper-v%E3%81%A7%E4%BB%AE%E6%83%B3%E3%83%9E%E3%82%B7%E3%83%B3%E3%82%92%E4%BD%9C%E3%82%8B\" aria-label=\"hyper vで仮想マシンを作る permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Hyper-vで仮想マシンを作る</h2>\n<p>仮想マシンを作る方法は普通のHyper-vの仮想マシンを作る方法と同じです。</p>\n<p>仮想マシンのディスクを選択するところで、<strong>既存の仮想ハードディスクを使用する</strong>を選択し、先ほど作ったvhdxファイルを選択します。</p>\n<p><img src=\"https://i.imgur.com/n7h7LsX.png\" alt=\"Img\"></p>\n<h2 id=\"起動する\" style=\"position:relative;\"><a href=\"#%E8%B5%B7%E5%8B%95%E3%81%99%E3%82%8B\" aria-label=\"起動する permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>起動する</h2>\n<p>Metasploitableを起動します。</p>\n<p>無事起動できました！</p>\n<p><img src=\"https://i.imgur.com/oV13syg.png\" alt=\"Img\"></p>","fields":{"slug":"2019-09-08-metasploitable-hyperv"},"frontmatter":{"tags":["仮想化","Hyper-v","metasploitable","powerShell"],"templateKey":"blog-post","slug":"2019-09-08-metasploitable-hyperv","id":null,"title":"Hyper-vにMetasploitableの仮想マシンを立ててみる","url":"2019-09-08-metasploitable-hyperv","date":"2019-09-08T12:55:31.132Z","description":"Hyper-vにMetasploitableの仮想マシンを立ててみる","headerImage":"https://i.imgur.com/oV13syg.png","year":"2019","month":"09"}}},{"node":{"id":"e5ae1f72-6fa4-59fd-85ab-d35497c1e063","html":"<h1 id=\"結構きれい\" style=\"position:relative;\"><a href=\"#%E7%B5%90%E6%A7%8B%E3%81%8D%E3%82%8C%E3%81%84\" aria-label=\"結構きれい permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>結構きれい</h1>\n<p>仕事でBIツールを調べる機会があったので話題のGoogleデータポータルを使ってみました。</p>\n<h2 id=\"table-of-contents\" style=\"position:relative;\"><a href=\"#table-of-contents\" aria-label=\"table of contents permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Table of Contents</h2>\n<div class=\"toc\">\n<ul>\n<li><a href=\"#%E7%B5%90%E8%AB%96\">結論</a></li>\n</ul>\n</div>\n<p>Googleデータポータルは、Google AnalyticsやGCPにあるデータを可視化するBIツールです。</p>\n<p>さっそく、このブログのPVなどを可視化してみました。</p>\n<p><img src=\"https://i.imgur.com/GEbpBUi.png\" alt=\"Img\"></p>\n<h2 id=\"結論\" style=\"position:relative;\"><a href=\"#%E7%B5%90%E8%AB%96\" aria-label=\"結論 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>結論</h2>\n<p>かっこいい。</p>","fields":{"slug":"2019-09-04-google-data-portal"},"frontmatter":{"tags":["Googleデータポータル","BI","Google Analytics"],"templateKey":"blog-post","slug":"2019-09-04-google-data-portal","id":null,"title":"Googleデータポータルを触ってみる","url":"2019-09-04-google-data-portal","date":"2019-09-04T14:58:14.837Z","description":"Googleデータポータルを触ってみました","headerImage":"https://i.imgur.com/GEbpBUi.png","year":"2019","month":"09"}}},{"node":{"id":"5c5c82e0-5929-5260-901b-00577715968a","html":"<p>Vue.jsで書いているコードのCI(CircleCI)が通らなくなっていろいろ調べていると原因がわかってきました。</p>\n<p><em><strong>いろいろやってますが、結論失敗してます！！　読む時間がもったいない！</strong></em></p>\n<h2 id=\"table-of-contents\" style=\"position:relative;\"><a href=\"#table-of-contents\" aria-label=\"table of contents permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Table of Contents</h2>\n<div class=\"toc\">\n<ul>\n<li><a href=\"#chromedriver%E3%81%AF-chrome-v76%E3%81%AB%E9%9D%9E%E5%AF%BE%E5%BF%9C\">ChromeDriverは Chrome v76に非対応</a></li>\n<li><a href=\"#circleci%E3%81%AEdocker-container%E3%82%92%E4%BD%95%E3%81%A8%E3%81%8B%E3%81%97%E3%81%9F%E3%81%84\">CircleCIのDocker Containerを何とかしたい</a></li>\n<li><a href=\"#chromedriver%E3%81%A8googlechrome%E3%81%AEversion%E3%82%92%E7%A2%BA%E8%AA%8D%E3%81%99%E3%82%8B\">ChromeDriverとGoogleChromeのVersionを確認する</a></li>\n<li><a href=\"#run%E7%B5%90%E6%9E%9C\">Run結果</a></li>\n<li><a href=\"#circleci%E3%81%AEdockerfile%E3%82%92%E7%A2%BA%E8%AA%8D%E3%81%97%E3%81%A6%E3%81%BF%E3%82%8B\">CircleCIのDockerfileを確認してみる</a></li>\n<li><a href=\"#chrome-beta%E3%81%AB%E5%A4%89%E3%81%88%E3%81%A6%E3%81%BF%E3%82%8B\">Chrome Betaに変えてみる</a></li>\n<li><a href=\"#%E7%B5%90%E6%9E%9C\">結果</a></li>\n</ul>\n</div>\n<h2 id=\"chromedriverは-chrome-v76に非対応\" style=\"position:relative;\"><a href=\"#chromedriver%E3%81%AF-chrome-v76%E3%81%AB%E9%9D%9E%E5%AF%BE%E5%BF%9C\" aria-label=\"chromedriverは chrome v76に非対応 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ChromeDriverは Chrome v76に非対応</h2>\n<p>エラーメッセージが出ていました。</p>\n<p><img src=\"https://i.imgur.com/6WFqOEs.png\" alt=\"Img\"></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber 0\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token punctuation\">{</span> value:\n   <span class=\"token punctuation\">{</span> message:\n      <span class=\"token string\">'session not created: Chrome version must be between 71 and 75\\n  (Driver info: chromedriver=2.46.628388 (4a34a70827ac54148e092aafb70504c4ea7ae926),platform=Linux 4.15.0-1043-aws x86_64) (WARNING: The server did not provide any stacktrace information)\\nCommand duration or timeout: 668 milliseconds\\nBuild info: version: \\'</span><span class=\"token number\">3.141</span>.59<span class=\"token punctuation\">\\</span>', revision: <span class=\"token punctuation\">\\</span>'e82be7d358<span class=\"token punctuation\">\\</span>', time: <span class=\"token punctuation\">\\</span>'2018-11-14T08:25:53<span class=\"token punctuation\">\\</span>'<span class=\"token punctuation\">\\</span>nSystem info: host: <span class=\"token punctuation\">\\</span>'5d045d2f1712<span class=\"token punctuation\">\\</span>', ip: <span class=\"token punctuation\">\\</span>'192.168.32.3<span class=\"token punctuation\">\\</span>', os.name: <span class=\"token punctuation\">\\</span>'Linux<span class=\"token punctuation\">\\</span>', os.arch: <span class=\"token punctuation\">\\</span>'amd64<span class=\"token punctuation\">\\</span>', os.version: <span class=\"token punctuation\">\\</span>'4.15.0-1043-aws<span class=\"token punctuation\">\\</span>', java.version: <span class=\"token punctuation\">\\</span>'11.0.4<span class=\"token punctuation\">\\</span>'<span class=\"token punctuation\">\\</span>nDriver info: driver.version: unknown<span class=\"token string\">',\n     error: '</span>session not created' <span class=\"token punctuation\">}</span>,\n  status: <span class=\"token number\">33</span> <span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>ChromeのVersionを71～75の間にしなさいとのこと。</p>\n<h2 id=\"circleciのdocker-containerを何とかしたい\" style=\"position:relative;\"><a href=\"#circleci%E3%81%AEdocker-container%E3%82%92%E4%BD%95%E3%81%A8%E3%81%8B%E3%81%97%E3%81%9F%E3%81%84\" aria-label=\"circleciのdocker containerを何とかしたい permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>CircleCIのDocker Containerを何とかしたい</h2>\n<p>今回はCircleCIを使っているのでDockerfileを編集して、何とかならないか試してみます。</p>\n<h2 id=\"chromedriverとgooglechromeのversionを確認する\" style=\"position:relative;\"><a href=\"#chromedriver%E3%81%A8googlechrome%E3%81%AEversion%E3%82%92%E7%A2%BA%E8%AA%8D%E3%81%99%E3%82%8B\" aria-label=\"chromedriverとgooglechromeのversionを確認する permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ChromeDriverとGoogleChromeのVersionを確認する</h2>\n<p>CircleCIでどんなVersionのChromeDriverとGoogleChromeを使っているのか確認します。</p>\n<p>CircleCIの<a href=\"https://github.com/tubone24/ebook-homebrew-vue-typescript-client/blob/master/.circleci/config.yml\" target=\"_blank\" rel=\"noopener noreferrer\">config.yml</a>にバージョン出力を追加します。</p>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"yaml\"><pre style=\"counter-reset: linenumber 6\" class=\"language-yaml line-numbers\"><code class=\"language-yaml\">    <span class=\"token key atrule\">steps</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> checkout\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">restore_cache</span><span class=\"token punctuation\">:</span>\n          <span class=\"token key atrule\">key</span><span class=\"token punctuation\">:</span> projectname<span class=\"token punctuation\">-</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> .Branch <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">-</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> checksum \"package<span class=\"token punctuation\">-</span>lock.json\" <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span>\n          <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> System information\n          <span class=\"token key atrule\">command</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">|</span><span class=\"token scalar string\"></span>\n<span class=\"token scalar string\">            echo \"Node $(node -v)\"</span>\n<span class=\"token scalar string\">            echo \"NPM v$(npm --version)\"</span>\n<span class=\"token scalar string\">            chromedriver -v</span>\n<span class=\"token scalar string\">            google-chrome --version</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2 id=\"run結果\" style=\"position:relative;\"><a href=\"#run%E7%B5%90%E6%9E%9C\" aria-label=\"run結果 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Run結果</h2>\n<p>v76で統一されているなぁ・・。</p>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"bash\"><pre style=\"counter-reset: linenumber 0\" class=\"language-bash line-numbers\"><code class=\"language-bash\">Node v10.16.3\nNPM v6.9.0\n<span class=\"gatsby-highlight-code-line\">ChromeDriver <span class=\"token number\">76.0</span>.3809.126 <span class=\"token punctuation\">(</span>d80a294506b4c9d18015e755cee48f953ddc3f2f-refs/branch-heads/3809@<span class=\"token punctuation\">{</span>#1024<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></span><span class=\"gatsby-highlight-code-line\">Google Chrome <span class=\"token number\">76.0</span>.3809.132 </span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2 id=\"circleciのdockerfileを確認してみる\" style=\"position:relative;\"><a href=\"#circleci%E3%81%AEdockerfile%E3%82%92%E7%A2%BA%E8%AA%8D%E3%81%97%E3%81%A6%E3%81%BF%E3%82%8B\" aria-label=\"circleciのdockerfileを確認してみる permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>CircleCIのDockerfileを確認してみる</h2>\n<p><a href=\"https://github.com/tubone24/circleci-dockerfiles/blob/master/node/images/10.16.3-stretch/browsers/Dockerfile\" target=\"_blank\" rel=\"noopener noreferrer\">CircleCIのDockerfile</a>をみると、</p>\n<div class=\"gatsby-highlight\" data-language=\"dockerfile\"><pre style=\"counter-reset: linenumber 40\" class=\"language-dockerfile line-numbers\"><code class=\"language-dockerfile\"><span class=\"token comment\"># install chrome</span>\n\n<span class=\"token instruction\"><span class=\"token keyword\">RUN</span> curl --silent --show-error --location --fail --retry 3 --output /tmp/google-chrome-stable_current_amd64.deb https://dl.google.com/linux/direct/google-chrome-stable_current_amd64.deb <span class=\"token operator\">\\</span>\n    &amp;&amp; (sudo dpkg -i /tmp/google-chrome-stable_current_amd64.deb || sudo apt-get -fy install)  <span class=\"token operator\">\\</span>\n    &amp;&amp; rm -rf /tmp/google-chrome-stable_current_amd64.deb <span class=\"token operator\">\\</span>\n    &amp;&amp; sudo sed -i <span class=\"token string\">'s|HERE/chrome\"|HERE/chrome\" --disable-setuid-sandbox --no-sandbox|g'</span> <span class=\"token operator\">\\</span>\n        <span class=\"token string\">\"/opt/google/chrome/google-chrome\"</span> <span class=\"token operator\">\\</span>\n    &amp;&amp; google-chrome --version</span>\n\n<span class=\"token instruction\"><span class=\"token keyword\">RUN</span> CHROME_VERSION=<span class=\"token string\">\"$(google-chrome --version)\"</span> <span class=\"token operator\">\\</span>\n    &amp;&amp; export CHROMEDRIVER_RELEASE=<span class=\"token string\">\"$(echo $CHROME_VERSION | sed 's/^Google Chrome //')\"</span> &amp;&amp; export CHROMEDRIVER_RELEASE=<span class=\"token variable\">${CHROMEDRIVER_RELEASE%%.*}</span> <span class=\"token operator\">\\</span>\n    &amp;&amp; CHROMEDRIVER_VERSION=$(curl --silent --show-error --location --fail --retry 4 --retry-delay 5 http://chromedriver.storage.googleapis.com/LATEST_RELEASE_<span class=\"token variable\">${CHROMEDRIVER_RELEASE}</span>) <span class=\"token operator\">\\</span>\n    &amp;&amp; curl --silent --show-error --location --fail --retry 4 --retry-delay 5 --output /tmp/chromedriver_linux64.zip <span class=\"token string\">\"http://chromedriver.storage.googleapis.com/$CHROMEDRIVER_VERSION/chromedriver_linux64.zip\"</span> <span class=\"token operator\">\\</span>\n    &amp;&amp; cd /tmp <span class=\"token operator\">\\</span>\n    &amp;&amp; unzip chromedriver_linux64.zip <span class=\"token operator\">\\</span>\n    &amp;&amp; rm -rf chromedriver_linux64.zip <span class=\"token operator\">\\</span>\n    &amp;&amp; sudo mv chromedriver /usr/local/bin/chromedriver <span class=\"token operator\">\\</span>\n    &amp;&amp; sudo chmod +x /usr/local/bin/chromedriver <span class=\"token operator\">\\</span>\n    &amp;&amp; chromedriver --version</span>\n</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>どうやらsedでChromeのstableのバージョンと合わせているらしい。なるほど。</p>\n<p>Chrome stableからbetaに変えれば通るかもしれない・・。</p>\n<h2 id=\"chrome-betaに変えてみる\" style=\"position:relative;\"><a href=\"#chrome-beta%E3%81%AB%E5%A4%89%E3%81%88%E3%81%A6%E3%81%BF%E3%82%8B\" aria-label=\"chrome betaに変えてみる permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Chrome Betaに変えてみる</h2>\n<p>CircleCIは自前のDockerから環境を作り、CIを回すことができます。</p>\n<p>なので、Dockerfileを作り、個人Dockerレポジトリにpushし、config.ymlファイルを編集します。</p>\n<p><a href=\"https://github.com/tubone24/ebook-homebrew-vue-typescript-client/blob/master/docker/circleci/fix_chromedriver/Dockerfile\" target=\"_blank\" rel=\"noopener noreferrer\">こんな感じ</a>で書き換えたDockerfileを作ります。</p>\n<div class=\"gatsby-highlight\" data-language=\"dockerfile\"><pre style=\"counter-reset: linenumber 41\" class=\"language-dockerfile line-numbers\"><code class=\"language-dockerfile\"><span class=\"token comment\"># install chrome</span>\n\n<span class=\"token instruction\"><span class=\"token keyword\">RUN</span> curl --silent --show-error --location --fail --retry 3 --output /tmp/google-chrome-beta_current_amd64.deb https://dl.google.com/linux/direct/google-chrome-beta_current_amd64.deb <span class=\"token operator\">\\</span>\n    &amp;&amp; (sudo dpkg -i /tmp/google-chrome-beta_current_amd64.deb || sudo apt-get -fy install)  <span class=\"token operator\">\\</span>\n    &amp;&amp; rm -rf /tmp/google-chrome-beta_current_amd64.deb <span class=\"token operator\">\\</span>\n    &amp;&amp; google-chrome --version</span>\n\n<span class=\"token comment\"># Fix ChromeDriverVersion</span>\n<span class=\"token instruction\"><span class=\"token keyword\">RUN</span> curl --silent --show-error --location --fail --retry 4 --retry-delay 5 --output /tmp/chromedriver_linux64.zip <span class=\"token string\">\"https://chromedriver.storage.googleapis.com/77.0.3865.40/chromedriver_linux64.zip\"</span> <span class=\"token operator\">\\</span>\n    &amp;&amp; cd /tmp <span class=\"token operator\">\\</span>\n    &amp;&amp; unzip chromedriver_linux64.zip <span class=\"token operator\">\\</span>\n    &amp;&amp; rm -rf chromedriver_linux64.zip <span class=\"token operator\">\\</span>\n    &amp;&amp; sudo mv chromedriver /usr/local/bin/chromedriver <span class=\"token operator\">\\</span>\n    &amp;&amp; sudo chmod +x /usr/local/bin/chromedriver <span class=\"token operator\">\\</span>\n    &amp;&amp; chromedriver --version</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>ChromeのBeta版 <code class=\"language-text\">google-chrome-beta_current_amd64.deb</code> ChromeDriverの最新版<code class=\"language-text\">https://chromedriver.storage.googleapis.com/77.0.3865.40/chromedriver_linux64.zip</code>をダウンロードインストールするように変更します。</p>\n<p>続けて、<a href=\"https://cloud.docker.com/i\" target=\"_blank\" rel=\"noopener noreferrer\">DockerHub</a>にDocker個人レポジトリを作っておきます。CircleCIから確認できるように公開設定をpublicにしておきます。</p>\n<p><img src=\"https://i.imgur.com/8xlE18N.png\" alt=\"Img\"></p>\n<p>その後、Docker build &#x26; pushします。</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">docker</span> build -t circle-node:10.16.3-stretch-browsers-fix <span class=\"token builtin class-name\">.</span>\n$ <span class=\"token function\">docker</span> tag circle-node:10.16.3-stretch-browsers-fix tubone24/circleci:10.16.3-stretch-browsers-fi\n$ <span class=\"token function\">docker</span> push tubone24/circleci:10.16.3-stretch-browsers-fix</code></pre></div>\n<p>無事pushまでできたらCircleCIのconfig.ymlのImageを変更します。</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre style=\"counter-reset: linenumber 0\" class=\"language-yaml line-numbers\"><code class=\"language-yaml\"><span class=\"token key atrule\">version</span><span class=\"token punctuation\">:</span> <span class=\"token number\">2</span>\n<span class=\"token key atrule\">jobs</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">build</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">working_directory</span><span class=\"token punctuation\">:</span> ~/workspace\n    <span class=\"token key atrule\">docker</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> tubone24/circleci<span class=\"token punctuation\">:</span>10.16.3<span class=\"token punctuation\">-</span>stretch<span class=\"token punctuation\">-</span>browsers<span class=\"token punctuation\">-</span>fix</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>では、 <img src=\"https://i.imgur.com/w7LQ34r.png\" alt=\"rerun\"> しましょう！</p>\n<h2 id=\"結果\" style=\"position:relative;\"><a href=\"#%E7%B5%90%E6%9E%9C\" aria-label=\"結果 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>結果</h2>\n<p>ダメ見たいですね・・</p>\n<p>ここまでやったのに解決しない。</p>\n<p><img src=\"https://i.imgur.com/p2WKJeV.png\" alt=\"failed\"></p>","fields":{"slug":"2019-09-03-chromedriver"},"frontmatter":{"tags":["自動テスト","E2E Test","Selenium","GoogleChrome","ChromeDriver"],"templateKey":"blog-post","slug":"2019-09-03-chromedriver","id":null,"title":"ChromeDriverがGoogleChrome v76 に対応していないらしい。","url":"2019-09-03-chromedriver","date":"2019-09-03T13:09:22.595Z","description":"ChromeDriverがGoogleChrome v76 に対応していないらしい。","headerImage":"https://i.imgur.com/6WFqOEs.png","year":"2019","month":"09"}}},{"node":{"id":"14ace36b-e527-51a7-9f66-f0f993602294","html":"<p>最近Github Actionを触って便利さに気がついてしまったのでご紹介します。</p>\n<h2 id=\"table-of-contents\" style=\"position:relative;\"><a href=\"#table-of-contents\" aria-label=\"table of contents permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Table of Contents</h2>\n<div class=\"toc\">\n<ul>\n<li>\n<p><a href=\"#github-action%E3%81%A8%E3%81%AF\">Github Actionとは？</a></p>\n</li>\n<li>\n<p><a href=\"#github-action%E3%81%AE%E3%83%97%E3%83%AC%E3%83%93%E3%83%A5%E3%83%BC%E3%81%AB%E5%BF%9C%E5%8B%9F%E3%81%99%E3%82%8B\">Github Actionのプレビューに応募する</a></p>\n</li>\n<li>\n<p><a href=\"#workflow%E3%82%92%E8%A8%AD%E5%AE%9A%E3%81%99%E3%82%8B\">Workflowを設定する</a></p>\n<ul>\n<li><a href=\"#trigger%E8%A8%AD%E5%AE%9A\">Trigger設定</a></li>\n<li><a href=\"#matrix%E3%81%A7%E3%83%86%E3%82%B9%E3%83%88\">Matrixでテスト</a></li>\n<li><a href=\"#step%E3%81%AE%E8%A8%AD%E5%AE%9A\">Stepの設定</a></li>\n<li><a href=\"#ci%E8%B5%B7%E5%8B%95%E6%99%82%E3%81%AE%E5%8B%95%E3%81%8D\">CI起動時の動き</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%E7%B5%90%E8%AB%96\">結論</a></p>\n</li>\n</ul>\n</div>\n<h2 id=\"github-actionとは\" style=\"position:relative;\"><a href=\"#github-action%E3%81%A8%E3%81%AF\" aria-label=\"github actionとは permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Github Actionとは？</h2>\n<p>Github Actionとは、 <em><strong>built by you, run by us</strong></em> です。<a href=\"https://github.blog/2018-10-17-action-demos/\" target=\"_blank\" rel=\"noopener noreferrer\">（公式より）</a></p>\n<p>詰まるところGithub製のCIです。</p>\n<p>結構簡単に使えたのでご紹介します。</p>\n<h2 id=\"github-actionのプレビューに応募する\" style=\"position:relative;\"><a href=\"#github-action%E3%81%AE%E3%83%97%E3%83%AC%E3%83%93%E3%83%A5%E3%83%BC%E3%81%AB%E5%BF%9C%E5%8B%9F%E3%81%99%E3%82%8B\" aria-label=\"github actionのプレビューに応募する permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Github Actionのプレビューに応募する</h2>\n<p>Github Action自体はまだプレビュー版ですので、<a href=\"https://github.com/features/actions\" target=\"_blank\" rel=\"noopener noreferrer\">こちらのサイト</a>から\n利用申請をする必要があります。</p>\n<p>私は申し込みから一週間くらいで使えるようになりました。</p>\n<p>無事利用できるようになりますと、レポジトリにActionボタンが\n出てきます。</p>\n<p><img src=\"https://i.imgur.com/ZYya5eA.png\" alt=\"Img\"></p>\n<h2 id=\"workflowを設定する\" style=\"position:relative;\"><a href=\"#workflow%E3%82%92%E8%A8%AD%E5%AE%9A%E3%81%99%E3%82%8B\" aria-label=\"workflowを設定する permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Workflowを設定する</h2>\n<p>Github ActionはほかのCIと同じくYAMLファイルで定義します。</p>\n<p>今回はPythonのPytestでテストを回します。</p>\n<p>下記のようにPython環境の設定、のパッケージBuild、Pytestまでを設定します。</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre style=\"counter-reset: linenumber 0\" class=\"language-yaml line-numbers\"><code class=\"language-yaml\"><span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Python package\n\n<span class=\"token key atrule\">on</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>push<span class=\"token punctuation\">]</span>\n\n<span class=\"token key atrule\">jobs</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">build</span><span class=\"token punctuation\">:</span>\n\n    <span class=\"token key atrule\">runs-on</span><span class=\"token punctuation\">:</span> ubuntu<span class=\"token punctuation\">-</span>latest\n    <span class=\"token key atrule\">strategy</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">max-parallel</span><span class=\"token punctuation\">:</span> <span class=\"token number\">4</span>\n      <span class=\"token key atrule\">matrix</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">python-version</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token number\">3.6</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3.7</span><span class=\"token punctuation\">]</span>\n\n    <span class=\"token key atrule\">steps</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> actions/checkout@v1\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Set up Python $<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> matrix.python<span class=\"token punctuation\">-</span>version <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n      <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> actions/setup<span class=\"token punctuation\">-</span>python@v1\n      <span class=\"token key atrule\">with</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">python-version</span><span class=\"token punctuation\">:</span> $<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> matrix.python<span class=\"token punctuation\">-</span>version <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Install dependencies\n      <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">|</span><span class=\"token scalar string\">\n        python -m pip install --upgrade pip\n        pip install -r requirements.txt</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Setup ebook<span class=\"token punctuation\">-</span>homebrew\n      <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">|</span><span class=\"token scalar string\">\n        python setup.py install</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Test with pytest\n      <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">|</span><span class=\"token scalar string\">\n        pip install pytest\n        pip install -r requirements-test.txt\n        pytest --it</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Lint check\n      <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">|</span><span class=\"token scalar string\">\n        black ebook_homebrew setup.py --check</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id=\"trigger設定\" style=\"position:relative;\"><a href=\"#trigger%E8%A8%AD%E5%AE%9A\" aria-label=\"trigger設定 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Trigger設定</h3>\n<p>今回はpush時に動くようにしますので、</p>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"yaml\"><pre style=\"counter-reset: linenumber 0\" class=\"language-yaml line-numbers\"><code class=\"language-yaml\"><span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Python package\n\n<span class=\"gatsby-highlight-code-line\"><span class=\"token key atrule\">on</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>push<span class=\"token punctuation\">]</span></span>\n<span class=\"token key atrule\">jobs</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">build</span><span class=\"token punctuation\">:</span>\n</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>のように設定します。</p>\n<p>Triggerについては<a href=\"https://developer.github.com/actions/managing-workflows/workflow-configuration-options/\" target=\"_blank\" rel=\"noopener noreferrer\">こちら</a>をご確認ください。</p>\n<h3 id=\"matrixでテスト\" style=\"position:relative;\"><a href=\"#matrix%E3%81%A7%E3%83%86%E3%82%B9%E3%83%88\" aria-label=\"matrixでテスト permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Matrixでテスト</h3>\n<p>Matrixでテストする場合は下記のようにPythonのバージョンを複数設定します。</p>\n<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"yaml\"><pre style=\"counter-reset: linenumber 4\" class=\"language-yaml line-numbers\"><code class=\"language-yaml\"><span class=\"token key atrule\">jobs</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">build</span><span class=\"token punctuation\">:</span>\n\n    <span class=\"token key atrule\">runs-on</span><span class=\"token punctuation\">:</span> ubuntu<span class=\"token punctuation\">-</span>latest\n    <span class=\"token key atrule\">strategy</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">max-parallel</span><span class=\"token punctuation\">:</span> <span class=\"token number\">4</span>\n      <span class=\"token key atrule\">matrix</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">python-version</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token number\">3.6</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3.7</span><span class=\"token punctuation\">]</span>\n\n    <span class=\"token key atrule\">steps</span><span class=\"token punctuation\">:</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> actions/checkout@v1</span><span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Set up Python $<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> matrix.python<span class=\"token punctuation\">-</span>version <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id=\"stepの設定\" style=\"position:relative;\"><a href=\"#step%E3%81%AE%E8%A8%AD%E5%AE%9A\" aria-label=\"stepの設定 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Stepの設定</h3>\n<p>StepはほかのCIと同じような感じで設定します。</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre style=\"counter-reset: linenumber 13\" class=\"language-yaml line-numbers\"><code class=\"language-yaml\">    <span class=\"token key atrule\">steps</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> actions/checkout@v1\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Set up Python $<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> matrix.python<span class=\"token punctuation\">-</span>version <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n      <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> actions/setup<span class=\"token punctuation\">-</span>python@v1\n      <span class=\"token key atrule\">with</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">python-version</span><span class=\"token punctuation\">:</span> $<span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> matrix.python<span class=\"token punctuation\">-</span>version <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Install dependencies\n      <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">|</span><span class=\"token scalar string\">\n        python -m pip install --upgrade pip\n        pip install -r requirements.txt</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Setup ebook<span class=\"token punctuation\">-</span>homebrew\n      <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">|</span><span class=\"token scalar string\">\n        python setup.py install</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Test with pytest\n      <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">|</span><span class=\"token scalar string\">\n        pip install pytest\n        pip install -r requirements-test.txt\n        pytest --it</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Lint check\n      <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">|</span><span class=\"token scalar string\">\n        black ebook_homebrew setup.py --check</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3 id=\"ci起動時の動き\" style=\"position:relative;\"><a href=\"#ci%E8%B5%B7%E5%8B%95%E6%99%82%E3%81%AE%E5%8B%95%E3%81%8D\" aria-label=\"ci起動時の動き permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>CI起動時の動き</h3>\n<p>無事PushでCIが動くと各push、PRごとにActionに結果がでます。</p>\n<p><img src=\"https://i.imgur.com/dVJdYdh.png\" alt=\"Img\"></p>\n<p>さらに、実行ログも確認できます。</p>\n<p>もう普通のCIですね。</p>\n<p><img src=\"https://i.imgur.com/6T4kjdf.png\" alt=\"Img\"></p>\n<h2 id=\"結論\" style=\"position:relative;\"><a href=\"#%E7%B5%90%E8%AB%96\" aria-label=\"結論 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>結論</h2>\n<p>Github Actionを使えば、めんどっちいCIサーバー連携も不要で楽々です。</p>","fields":{"slug":"2019-09-02-github-action"},"frontmatter":{"tags":["GitHub","GitHubAction","CI"],"templateKey":"blog-post","slug":"2019-09-02-github-action","id":null,"title":"Github Actionを使って、簡単CIを作ってみる","url":"2019-09-02-github-action","date":"2019-09-02T11:33:53.870Z","description":"最近Github Actionを使って簡単CIを作ってみました。","headerImage":"https://i.imgur.com/6T4kjdf.png","year":"2019","month":"09"}}},{"node":{"id":"1b4f62f8-a2e8-5c7f-91bb-bd1d27748974","html":"<p>最近腰が痛すぎて仕事もプライベートもしんどいので購入しました。</p>\n<p><img src=\"https://i.imgur.com/H1OsWw1.jpg\" alt=\"img\"></p>\n<p><a href=\"https://amzn.to/3yaOo1W\" target=\"_blank\" rel=\"noopener noreferrer\">オムロン 温熱低周波治療器 HV-F312</a></p>\n<p>温熱もできる低周波治療器なのですこし期待です。</p>","fields":{"slug":"2019-09-01-omron-relux"},"frontmatter":{"tags":["健康","ぼやき","腰痛"],"templateKey":"blog-post","slug":"2019-09-01-omron-relux","id":null,"title":"オムロン HV-F312で腰の痛みをなくす","url":"2019-09-01-omron-relux","date":"2019-09-01T15:01:07.372Z","description":"痛い・・。腰が痛い。","headerImage":"https://i.imgur.com/H1OsWw1.jpg","year":"2019","month":"09"}}},{"node":{"id":"7a69f751-2ad2-565b-a7cf-9991ef3a74c6","html":"<h2 id=\"table-of-contents\" style=\"position:relative;\"><a href=\"#table-of-contents\" aria-label=\"table of contents permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Table of Contents</h2>\n<div class=\"toc\">\n<ul>\n<li>\n<p><a href=\"#%E3%81%AA%E3%81%9C%E3%81%93%E3%82%93%E3%81%AA%E3%81%93%E3%81%A8%E3%82%92\">なぜこんなことを・・・。</a></p>\n</li>\n<li>\n<p><a href=\"#%E7%99%BB%E5%A0%B4%E4%BA%BA%E7%89%A9\">登場人物</a></p>\n<ul>\n<li><a href=\"#netlify\">Netlify</a></li>\n<li><a href=\"#%E5%AE%9F%E3%81%AF%E3%81%99%E3%81%94%E3%81%8B%E3%81%A3%E3%81%9F-netlify-cms\">実はすごかった Netlify CMS</a></li>\n<li><a href=\"#gatsby\">Gatsby</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%E3%81%95%E3%81%A3%E3%81%9D%E3%81%8F%E4%BD%9C%E3%81%A3%E3%81%A6%E3%81%BF%E3%82%8B\">さっそく作ってみる</a></p>\n<ul>\n<li><a href=\"#netlify%E5%AF%BE%E5%BF%9C%E7%89%88%E3%81%AEgatsby-starter%E3%82%92%E3%83%80%E3%82%A6%E3%83%B3%E3%83%AD%E3%83%BC%E3%83%89%E3%81%99%E3%82%8B\">Netlify対応版のGatsby-starterをダウンロードする</a></li>\n<li><a href=\"#netlify%E3%81%AE%E3%82%A2%E3%82%AB%E3%82%A6%E3%83%B3%E3%83%88%E7%94%A8%E6%84%8F%E3%81%99%E3%82%8B\">Netlifyのアカウント用意する</a></li>\n<li><a href=\"#cms%E3%81%AE%E7%AE%A1%E7%90%86%E7%94%BB%E9%9D%A2%E3%82%92%E8%A8%AD%E5%AE%9A%E3%81%99%E3%82%8B\">CMSの管理画面を設定する</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%E5%AE%8C%E6%88%90\">完成</a></p>\n</li>\n<li>\n<p><a href=\"#%E7%B5%90%E8%AB%96\">結論</a></p>\n</li>\n</ul>\n</div>\n<h2 id=\"なぜこんなことを\" style=\"position:relative;\"><a href=\"#%E3%81%AA%E3%81%9C%E3%81%93%E3%82%93%E3%81%AA%E3%81%93%E3%81%A8%E3%82%92\" aria-label=\"なぜこんなことを permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>なぜこんなことを・・・。</h2>\n<p>今更にはなりますがNetlify CMSを使ってみたくなったのでGatsbyを使ってブログ作ってみました。</p>\n<h2 id=\"登場人物\" style=\"position:relative;\"><a href=\"#%E7%99%BB%E5%A0%B4%E4%BA%BA%E7%89%A9\" aria-label=\"登場人物 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>登場人物</h2>\n<h3 id=\"netlify\" style=\"position:relative;\"><a href=\"#netlify\" aria-label=\"netlify permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Netlify</h3>\n<p><a href=\"https://www.netlify.com/\" target=\"_blank\" rel=\"noopener noreferrer\">https://www.netlify.com/</a></p>\n<p>Netlifyとは静的ホスティングサービスですが、S3とは違いGithubのpush契機にBuildが走るCI機能などが充実していてこれでOK感ある。</p>\n<p>Identityという認証も用意されているのでCMSサイトも作れちゃう。</p>\n<p>個人的にはNetlity Buttonがデザインよくてかっこいいという印象がもともと強かったです。</p>\n<p><a href=\"https://app.netlify.com/start/deploy?repository=https://github.com/tubone24/blog\" target=\"_blank\" rel=\"noopener noreferrer\"><img src=\"https://www.netlify.com/img/deploy/button.svg\" alt=\"Deploy to Netlify\"></a></p>\n<h3 id=\"実はすごかった-netlify-cms\" style=\"position:relative;\"><a href=\"#%E5%AE%9F%E3%81%AF%E3%81%99%E3%81%94%E3%81%8B%E3%81%A3%E3%81%9F-netlify-cms\" aria-label=\"実はすごかった netlify cms permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>実はすごかった Netlify CMS</h3>\n<p><a href=\"https://www.netlifycms.org/\" target=\"_blank\" rel=\"noopener noreferrer\">https://www.netlifycms.org/</a></p>\n<p>NetlifyにGithubへのアクセスキーを持たせることで、CMS上でコンテンツを編集、GithubへのPushを一気にやってしまうことができます。\nさらに記事のWorkflowも<a href=\"http://scottchacon.com/2011/08/31/github-flow.html\" target=\"_blank\" rel=\"noopener noreferrer\">Github Flow</a> に乗っけることができるので、CMSで編集しながらにしてレポジトリはぐちゃぐちゃにならない。</p>\n<p>これ結構いいアイディア！</p>\n<h3 id=\"gatsby\" style=\"position:relative;\"><a href=\"#gatsby\" aria-label=\"gatsby permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Gatsby</h3>\n<p><a href=\"https://www.gatsbyjs.org/\" target=\"_blank\" rel=\"noopener noreferrer\">https://www.gatsbyjs.org/</a></p>\n<p>便利便利といったものの、一からCMSを作るのはそれなりに骨が折れます。</p>\n<p>と思っていたら最近はGatsbyというReactで作られたCMSがありました。すごい。</p>\n<p><img src=\"https://i.imgur.com/wVxAzAl.png\" alt=\"Imgur\"></p>\n<p><a href=\"https://www.gatsbyjs.org/\" target=\"_blank\" rel=\"noopener noreferrer\">公式</a>に載っていた図を見ると数多のDatasourceにGraphQLで接続し、Reactで静的なページを作るという感じ。</p>\n<p>MarkdownをGithubにPostすれば完全に求めている感じのことができそう。すごいすごい。</p>\n<h2 id=\"さっそく作ってみる\" style=\"position:relative;\"><a href=\"#%E3%81%95%E3%81%A3%E3%81%9D%E3%81%8F%E4%BD%9C%E3%81%A3%E3%81%A6%E3%81%BF%E3%82%8B\" aria-label=\"さっそく作ってみる permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>さっそく作ってみる</h2>\n<h3 id=\"netlify対応版のgatsby-starterをダウンロードする\" style=\"position:relative;\"><a href=\"#netlify%E5%AF%BE%E5%BF%9C%E7%89%88%E3%81%AEgatsby-starter%E3%82%92%E3%83%80%E3%82%A6%E3%83%B3%E3%83%AD%E3%83%BC%E3%83%89%E3%81%99%E3%82%8B\" aria-label=\"netlify対応版のgatsby starterをダウンロードする permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Netlify対応版のGatsby-starterをダウンロードする</h3>\n<p><a href=\"https://github.com/netlify-templates/gatsby-starter-netlify-cms\" target=\"_blank\" rel=\"noopener noreferrer\">https://github.com/netlify-templates/gatsby-starter-netlify-cms\n</a></p>\n<p>git cloneしてきます。</p>\n<p>とりあえずローカル上で動かしてみます。</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber 0\" class=\"language-bash line-numbers\"><code class=\"language-bash\">$ <span class=\"token function\">npm</span> <span class=\"token function\">install</span>\n$ <span class=\"token function\">npm</span> start</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p>するとコーヒー屋さん（？）のページが出てきます。</p>\n<p><img src=\"https://i.imgur.com/fRY1Ss4.png\" alt=\"Imgur\"></p>\n<p>このままだとコーヒーショップを経営することになるのでゴリゴリReact書いていい感じにしてください。</p>\n<p>CMSの要素は残す必要があるため、ComponentsのTemplateを編集するときはMarkdownで定義している要素に過不足なくするようご注意ください。</p>\n<p>私が慣れていないだけですが、GraphQLでエラーが出るとエラーがめっちゃ追いにくい・・・。</p>\n<h3 id=\"netlifyのアカウント用意する\" style=\"position:relative;\"><a href=\"#netlify%E3%81%AE%E3%82%A2%E3%82%AB%E3%82%A6%E3%83%B3%E3%83%88%E7%94%A8%E6%84%8F%E3%81%99%E3%82%8B\" aria-label=\"netlifyのアカウント用意する permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Netlifyのアカウント用意する</h3>\n<p>無事サイトができたら、Netlifyに挙げていきます。</p>\n<p><img src=\"https://i.imgur.com/P0E2109.png\" alt=\"Imgur\"></p>\n<p>アカウントを作ってGithubと連携するとDeployするレポジトリを選択できます。</p>\n<p>今回は<a href=\"https://github.com/tubone24/blog/\" target=\"_blank\" rel=\"noopener noreferrer\">blog</a>というレポジトリを作りましたのでそちらを連携させます。</p>\n<p>画面に沿って進んでいけば、特に追加の設定なくサイトがDeployできると思います。</p>\n<p>Deployできるとデプロイ先のURLが発行されます。</p>\n<p>独自ドメインを持っていましたらここで設定してしまえばいいと思います。</p>\n<p>参考: <a href=\"https://www.netlify.com/docs/custom-domains/\" target=\"_blank\" rel=\"noopener noreferrer\">Custom Domains\n</a></p>\n<p><img src=\"https://i.imgur.com/Z07HTMG.png\" alt=\"Imgur\"></p>\n<h3 id=\"cmsの管理画面を設定する\" style=\"position:relative;\"><a href=\"#cms%E3%81%AE%E7%AE%A1%E7%90%86%E7%94%BB%E9%9D%A2%E3%82%92%E8%A8%AD%E5%AE%9A%E3%81%99%E3%82%8B\" aria-label=\"cmsの管理画面を設定する permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>CMSの管理画面を設定する</h3>\n<p>無事にDeployできましたら、CMSの管理画面を設定します。</p>\n<p><img src=\"https://i.imgur.com/kOuCJAo.png\" alt=\"Imgur\"></p>\n<p>General => Site Membersから、アカウントを作成し登録します。</p>\n<p>できたら、作ったサイトの管理画面 <code class=\"language-text\">/admin</code> にアクセスします。</p>\n<p>設定がうまくいっていればログイン画面からコンテンツの編集画面が開けます。</p>\n<p><img src=\"https://i.imgur.com/LY84I80.png\" alt=\"Imgur\"></p>\n<p>CMSから記事を登録したい(GithubにCMSからPushしたい)時は追加でGitGatewayを設定します。</p>\n<p>Githubの<a href=\"https://github.com/settings/tokens/new\" target=\"_blank\" rel=\"noopener noreferrer\">PersonalAccessToken</a>から作成したAPIキーを設定してあげればよいです。</p>\n<p><img src=\"https://i.imgur.com/V2Aobi8.png\" alt=\"Imgur\"></p>\n<h2 id=\"完成\" style=\"position:relative;\"><a href=\"#%E5%AE%8C%E6%88%90\" aria-label=\"完成 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>完成</h2>\n<p>結構爆速。</p>\n<p>他の人のGatsbyを見るとTravisとか使ってCI回している・・。真似しよう・・。</p>\n<p><img src=\"https://i.imgur.com/mIcrB6K.png\" alt=\"Imgur\"></p>\n<h2 id=\"結論\" style=\"position:relative;\"><a href=\"#%E7%B5%90%E8%AB%96\" aria-label=\"結論 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>結論</h2>\n<p>Netlify CMSはすごいぞ！</p>\n<p><img src=\"https://i.imgur.com/mIcrB6K.png\" alt=\"Imgur\"></p>","fields":{"slug":"2019-09-01-netlify-and-gatsby"},"frontmatter":{"tags":["JavaScript","Gatsby","Netlify","Travis","React","Headless CMS"],"templateKey":"blog-post","slug":"2019-09-01-netlify-and-gatsby","id":null,"title":"Github + Gatsby + Netlify CMS で今更ブログを作る","url":"2019-09-01-netlify-and-gatsby","date":"2019-09-01T07:33:38.830Z","description":"今更にはなりますがNetlify CMSを使ってみたくなったのでGatsbyを使ってブログ作ってみました。","headerImage":"https://i.imgur.com/dovylqZ.png","year":"2019","month":"09"}}}],"pathPrefix":"pages","first":false,"last":false,"index":9,"pageCount":11,"additionalContext":{"totalCount":110}}},"staticQueryHashes":["2959249232"]}