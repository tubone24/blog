{"componentChunkName":"component---src-templates-index-tsx","path":"/pages/8","result":{"pageContext":{"totalCount":110,"group":[{"node":{"id":"ea7fb655-c7a7-558b-9677-e5b1fd4c9597","html":"<p>Slackにはスタンプ機能があり、回りくどい文章を書かずに感情を相手に適切に伝えることができます。</p>\n<p><img src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/97408/d830e01a-c642-c181-dff6-c7e7f41060ba.png\" alt=\"2019-10-23_22h49_10.png\"></p>\n<p>もっとスタンプの活用方法を考えてみたくなったので、スニペット化しました。</p>\n<h2 id=\"table-of-contents\" style=\"position:relative;\"><a href=\"#table-of-contents\" aria-label=\"table of contents permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Table of Contents</h2>\n<div class=\"toc\">\n<ul>\n<li><a href=\"#%E8%AC%9D%E7%BD%AA%E3%83%94%E3%83%A9%E3%83%9F%E3%83%83%E3%83%89\">謝罪ピラミッド</a></li>\n<li><a href=\"#%E3%82%A4%E3%83%B3%E3%83%99%E3%83%BC%E3%83%80%E3%82%B2%E3%83%BC%E3%83%A0\">インベーダゲーム</a></li>\n<li><a href=\"#%E7%A6%8F%E7%AC%91%E3%81%84\">福笑い</a></li>\n</ul>\n</div>\n<h2 id=\"謝罪ピラミッド\" style=\"position:relative;\"><a href=\"#%E8%AC%9D%E7%BD%AA%E3%83%94%E3%83%A9%E3%83%9F%E3%83%83%E3%83%89\" aria-label=\"謝罪ピラミッド permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>謝罪ピラミッド</h2>\n<p>最上位の謝罪ができる。\n見た目は汗をかきながら必死にする組体操なので、教育現場への疑問提起もできる。</p>\n<p>ダイバーシティーを意識して人種のバリエーションを持たせるのがコツ</p>\n<p><img src=\"https://raw.githubusercontent.com/tubone24/markdown-memo/master/src/loose/man-bowing-pyramid.png\" alt=\"preview\"></p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">:man-bowing: &lt; ごめん！\n                  :man-bowing::skin-tone-3:\n              :man-bowing::man-bowing::skin-tone-6:\n        :man-bowing::skin-tone-2::man-bowing::skin-tone-4::man-bowing::skin-tone-2::man-bowing::skin-tone-2:\n  　:man-bowing::skin-tone-2::man-bowing::skin-tone-3::man-bowing::skin-tone-6::man-bowing::man-bowing::skin-tone-2:\n:man-bowing::man-bowing::skin-tone-2::man-bowing::man-bowing::man-bowing::man-bowing::man-bowing::skin-tone-3:</code></pre></div>\n<h2 id=\"インベーダゲーム\" style=\"position:relative;\"><a href=\"#%E3%82%A4%E3%83%B3%E3%83%99%E3%83%BC%E3%83%80%E3%82%B2%E3%83%BC%E3%83%A0\" aria-label=\"インベーダゲーム permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>インベーダゲーム</h2>\n<p>あの有名なレトロゲーです。</p>\n<p>たまにはアーケードゲームに打ち込みたいもの。</p>\n<p><img src=\"https://raw.githubusercontent.com/tubone24/markdown-memo/master/src/loose/invador.png\" alt=\"img\"></p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">:space_invader: :space_invader: :space_invader: :space_invader: :space_invader:\n:space_invader:       :boom: :space_invader:\n\n\n\n           │\n\n           凸</code></pre></div>\n<h2 id=\"福笑い\" style=\"position:relative;\"><a href=\"#%E7%A6%8F%E7%AC%91%E3%81%84\" aria-label=\"福笑い permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>福笑い</h2>\n<p>Slackのスタンプになぜ顔のパーツがあるか、考えた結果思いついた。</p>\n<p>ちょっとだけいびつにするのがミソ。</p>\n<p>正月にやろう！</p>\n<p><img src=\"https://raw.githubusercontent.com/tubone24/markdown-memo/master/src/loose/hukuwarai.png\" alt=\"img\"></p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">:eye:   :eye: \n    :nose::skin-tone-4: \n    :lips:</code></pre></div>\n<h1 id=\"効果\" style=\"position:relative;\"><a href=\"#%E5%8A%B9%E6%9E%9C\" aria-label=\"効果 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>効果</h1>\n<p>チームのSlackで早速使ってみました。</p>\n<p><img src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/97408/59b923a6-fa60-8ccf-5634-5757c724f897.png\" alt=\"2019-10-23_22h52_03.png\"></p>\n<p><code class=\"language-text\">謝罪ピラミッド</code> で究極の謝罪ができたのではと思います。</p>\n<h1 id=\"最後に\" style=\"position:relative;\"><a href=\"#%E6%9C%80%E5%BE%8C%E3%81%AB\" aria-label=\"最後に permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>最後に</h1>\n<p>これからも思いつき次第下記noteに記載していきます!!</p>\n<p><a href=\"https://note.tubone-project24.xyz/loose/slack-stamp-snipet.html#%E8%AC%9D%E7%BD%AA%E3%83%94%E3%83%A9%E3%83%9F%E3%83%83%E3%83%89\" target=\"_blank\" rel=\"noopener noreferrer\">https://note.tubone-project24.xyz/loose/slack-stamp-snipet.html#%E8%AC%9D%E7%BD%AA%E3%83%94%E3%83%A9%E3%83%9F%E3%83%83%E3%83%89</a></p>\n<p>みんなもSlackスタンプ生活、始めよう！</p>","fields":{"slug":"2019/10/23/slack-stamp"},"frontmatter":{"tags":["Slack","Stamp","ぼやき"],"templateKey":"blog-post","slug":"2019/10/23/slack-stamp","id":null,"title":"究極の謝罪はSlackのスタンプを活用しよう！ ～明日から使えるSlackスタンプスニペット集～","url":"2019/10/23/slack-stamp","date":"2019-10-23T13:54:39.018Z","description":"Slackのスタンプを使って究極の謝罪をします","headerImage":"https://i.imgur.com/lYpsth4.png","year":"2019","month":"10"}}},{"node":{"id":"97460ab9-b8cf-5af3-b5e1-efe0e7870a1b","html":"<p>すごい風だった。</p>\n<p>台風が過ぎ去ったので、我が家の気象センサー(Netatmo)の情報を少し見ていきます。</p>\n<p>ヘッダー画像はAlexander Gerst\n(@Astro_Alex)さんのTwitterから拝借しました。こりゃすごい。</p>\n<blockquote class=\"twitter-tweet\"><p lang=\"en\" dir=\"ltr\">As if somebody pulled the planet&#39;s gigantic plug. Staring down the eye of yet another fierce storm. Category 5 Super Typhoon Trami is unstoppable and heading for Japan and Taiwan. Be safe down there! <a href=\"https://twitter.com/hashtag/TyphoonTrami?src=hash&amp;ref_src=twsrc%5Etfw\">#TyphoonTrami</a> <a href=\"https://t.co/4VmY2hhj2c\">pic.twitter.com/4VmY2hhj2c</a></p>&mdash; Alexander Gerst (@Astro_Alex) <a href=\"https://twitter.com/Astro_Alex/status/1044633209454174213?ref_src=twsrc%5Etfw\">September 25, 2018</a></blockquote>\n<h2 id=\"table-of-contents\" style=\"position:relative;\"><a href=\"#table-of-contents\" aria-label=\"table of contents permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Table of Contents</h2>\n<div class=\"toc\">\n<ul>\n<li>\n<p><a href=\"#zabbix%E3%81%AE%E7%8A%B6%E6%B3%81\">Zabbixの状況</a></p>\n</li>\n<li>\n<p><a href=\"#csv%E3%81%A7%E5%87%BA%E5%8A%9B%E3%81%99%E3%82%8B\">CSVで出力する</a></p>\n</li>\n<li>\n<p><a href=\"#netatmo-dashboard%E3%81%A7%E3%81%B1%E3%81%B1%E3%81%A3%E3%81%A8%E3%81%BF%E3%82%8B\">Netatmo Dashboardでぱぱっとみる</a></p>\n<ul>\n<li><a href=\"#%E3%81%A1%E3%82%87%E3%81%A3%E3%81%A8%E3%81%97%E3%81%9F%E6%B7%B1%E5%A0%80\">ちょっとした深堀</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%E7%B5%90%E8%AB%96\">結論</a></p>\n</li>\n</ul>\n</div>\n<h2 id=\"zabbixの状況\" style=\"position:relative;\"><a href=\"#zabbix%E3%81%AE%E7%8A%B6%E6%B3%81\" aria-label=\"zabbixの状況 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Zabbixの状況</h2>\n<p>我が家のNetatmoのセンシングはZabbixに連携するようにしてます。</p>\n<p>昔こちらのOSSを作りましたのでやってみたい人はやってみてください。</p>\n<p><img src=\"https://i.imgur.com/iqO8wUH.png\" alt=\"Img\"></p>\n<p><a href=\"https://github.com/tubone24/netatmo-zabbix\" target=\"_blank\" rel=\"noopener noreferrer\">netatmo-zabbix</a></p>\n<p>ただし、こちら、APIのたたきすぎなのかわからないのですがたびたびTimeoutしメトリックが欠けてしまう不具合があります。</p>\n<p>1日単位の確認は難しいそうだな・・・。</p>\n<p><img src=\"https://i.imgur.com/8SfKOwD.png\" alt=\"img\"></p>\n<p>別の方法を考えます。</p>\n<h2 id=\"csvで出力する\" style=\"position:relative;\"><a href=\"#csv%E3%81%A7%E5%87%BA%E5%8A%9B%E3%81%99%E3%82%8B\" aria-label=\"csvで出力する permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>CSVで出力する</h2>\n<p>Netatmoには手動でCSVに出力する機能がありますのでそれを使おうかと思います。</p>\n<p><img src=\"https://i.imgur.com/KB59nsj.png\" alt=\"im\"></p>\n<p>ただ、よく考えたらエクセルで出してもグラフを作るくらいしかしないので、Netatmo Dashboardで確認したほうがよいかもしれません。</p>\n<h2 id=\"netatmo-dashboardでぱぱっとみる\" style=\"position:relative;\"><a href=\"#netatmo-dashboard%E3%81%A7%E3%81%B1%E3%81%B1%E3%81%A3%E3%81%A8%E3%81%BF%E3%82%8B\" aria-label=\"netatmo dashboardでぱぱっとみる permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Netatmo Dashboardでぱぱっとみる</h2>\n<p>方針を転換して、Netatmo Dashboardから確認します。</p>\n<p>DIY技術の敗北なのかもしれません。</p>\n<h3 id=\"ちょっとした深堀\" style=\"position:relative;\"><a href=\"#%E3%81%A1%E3%82%87%E3%81%A3%E3%81%A8%E3%81%97%E3%81%9F%E6%B7%B1%E5%A0%80\" aria-label=\"ちょっとした深堀 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ちょっとした深堀</h3>\n<p><img src=\"https://i.imgur.com/eONLraE.png\" alt=\"img\"></p>\n<p>台風が近づくにつれ、気圧がぐんぐん下がっていくのがわかります。台風が通り過ぎると気圧が復活するのもおもしろい。また、風向が、東→北→西と台風の渦に合わせて移動しているのがわかります。</p>\n<p>何気に感動。</p>\n<p>当然、台風が近づくにつれて風が強くなり、通り過ぎると弱くなりました。</p>\n<p>気象について全く詳しくないのですが...。やはり台風の手前（この表現が正しいのか不明ですが）の方が風強いんですかね？</p>\n<h2 id=\"結論\" style=\"position:relative;\"><a href=\"#%E7%B5%90%E8%AB%96\" aria-label=\"結論 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>結論</h2>\n<p>せっかくIoTのセンサーを入れても使う人の技術や知識が薄いと何の使い道もなくなってしまうことが解りました。</p>","fields":{"slug":"2019/10/13/typhoon"},"frontmatter":{"tags":["netatmo","台風","IoT","センシング","ぼやき"],"templateKey":"blog-post","slug":"2019/10/13/typhoon","id":null,"title":"台風の時の我が家のセンサー(netatmo)の値をZabbixで見る","url":"2019/10/13/typhoon","date":"2019-10-12T17:56:20.467Z","description":"台風の時の我が家のセンサー(netatmo)をZabbixで見ましょう","headerImage":"https://i.imgur.com/hJl5vbb.jpg","year":"2019","month":"10"}}},{"node":{"id":"cdbf1337-f849-57c7-b510-cbbfeade839d","html":"<p>うまい.</p>\n<p>うまい。ラーメンは完全食である。</p>\n<p><img src=\"https://i.imgur.com/pKSA6gJ.jpg\" alt=\"img\"></p>","fields":{"slug":"2019/10/11/today-ramen"},"frontmatter":{"tags":["ぼやき","ラーメン"],"templateKey":"blog-post","slug":"2019/10/11/today-ramen","id":null,"title":"今日のラーメン","url":"2019/10/11/today-ramen","date":"2019-10-10T15:19:17.239Z","description":"今日のラーメン","headerImage":"https://i.imgur.com/pKSA6gJ.jpg","year":"2019","month":"10"}}},{"node":{"id":"d35564fd-04dc-5d22-b9a3-bdd23734b6dd","html":"<p>CIで回そう！</p>\n<p>前回まででついにAnsible + ServerspecでMacの構成管理ができたわけですが、まだ残ってることがあります。</p>\n<p>それが<strong>CIにのせる</strong>ことです。</p>\n<p><strong>は？</strong></p>\n<p>意味あるの？と思われた人も多いと思いますが、そこそこ意味のある活動になります。</p>\n<p>なぜなら…</p>\n<p><strong>一度プロビジョニングしたMacは初期化しない限り二度ときれいなMacにはならない</strong>からです。</p>\n<p>なんかの格言ぽいですが、常にクリーンなMacで作った構成管理を確かめてみたい、ということでCIに乗っけてしまいます。</p>\n<h2 id=\"table-of-contents\" style=\"position:relative;\"><a href=\"#table-of-contents\" aria-label=\"table of contents permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Table of Contents</h2>\n<div class=\"toc\">\n<ul>\n<li><a href=\"#macos-x-%E3%81%8C%E4%BD%BF%E3%81%88%E3%82%8Bci%E3%81%A3%E3%81%A6%E3%81%82%E3%82%8B%E3%81%AE\">MacOS X が使えるCIってあるの？</a></li>\n<li><a href=\"#azure-devops-build-pipeline\">Azure DevOps Build Pipeline</a></li>\n<li><a href=\"#yaml%E3%82%92%E6%9B%B8%E3%81%8F\">Yamlを書く</a></li>\n<li><a href=\"#%E7%B5%90%E8%AB%96\">結論</a></li>\n</ul>\n</div>\n<h2 id=\"macos-x-が使えるciってあるの\" style=\"position:relative;\"><a href=\"#macos-x-%E3%81%8C%E4%BD%BF%E3%81%88%E3%82%8Bci%E3%81%A3%E3%81%A6%E3%81%82%E3%82%8B%E3%81%AE\" aria-label=\"macos x が使えるciってあるの permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>MacOS X が使えるCIってあるの？</h2>\n<p>結論から先にかけばあります。</p>\n<p>私の大好きなCIのCircleCIだってMacOS XのOSイメージは用意されています。</p>\n<p>ですが、CircleCIの場合で<a href=\"https://circleci.jp/pricing/#build-os-x\" target=\"_blank\" rel=\"noopener noreferrer\">$39/Month</a>とお金がかかってしまいます…。(2019/10現在)</p>\n<p>こんな個人プロジェクトにお金を払うわけにはいきませんで、別のCIを考えます。</p>\n<h2 id=\"azure-devops-build-pipeline\" style=\"position:relative;\"><a href=\"#azure-devops-build-pipeline\" aria-label=\"azure devops build pipeline permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Azure DevOps Build Pipeline</h2>\n<p>MacOS Xが無料で使えるCIはいくつかあるのですが、今回はAzure DevOps Build Pipelineにしました。</p>\n<p>選定の理由はUIがかっこよくて見やすいのと、</p>\n<p><img src=\"https://i.imgur.com/5ckVCUf.png\" alt=\"Img\"></p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token punctuation\">-</span> <span class=\"token key atrule\">task</span><span class=\"token punctuation\">:</span> UseRubyVersion@0\n  <span class=\"token key atrule\">inputs</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">versionSpec</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'>= 2.4'</span>\n\n<span class=\"token punctuation\">-</span> <span class=\"token key atrule\">task</span><span class=\"token punctuation\">:</span> NodeTool@0 \n  <span class=\"token key atrule\">inputs</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">versionSpec</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'10.15.3'</span></code></pre></div>\n<p>とすることで、Build上必要なパッケージが利用可能になるからです。</p>\n<p>(今回はServerspecでRubyを使うのですが、Rubyも構成管理してるので本機能は不要でした…)</p>\n<h2 id=\"yamlを書く\" style=\"position:relative;\"><a href=\"#yaml%E3%82%92%E6%9B%B8%E3%81%8F\" aria-label=\"yamlを書く permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Yamlを書く</h2>\n<p>CIの定義を万と書いてきた私からしたら、つらい…とも思わないのですがCIを動かすための定義をYamlに書いていきます。\nrootディレクトリに<code class=\"language-text\">azure-pipelines.yml</code>を作り、定義を書いていきます。</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">trigger</span><span class=\"token punctuation\">:</span>\n<span class=\"token punctuation\">-</span> master\n\n<span class=\"token key atrule\">jobs</span><span class=\"token punctuation\">:</span>\n\n<span class=\"token punctuation\">-</span> <span class=\"token key atrule\">job</span><span class=\"token punctuation\">:</span> Run_Ansible_and_Serverspec\n  <span class=\"token key atrule\">pool</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">vmImage</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'macOS-10.14'</span>\n  <span class=\"token key atrule\">steps</span><span class=\"token punctuation\">:</span>\n  <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">task</span><span class=\"token punctuation\">:</span> UseRubyVersion@0\n    <span class=\"token key atrule\">inputs</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">versionSpec</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'>= 2.4'</span>\n\n  <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">task</span><span class=\"token punctuation\">:</span> NodeTool@0 \n    <span class=\"token key atrule\">inputs</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">versionSpec</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'10.15.3'</span>\n\n  <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">script</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">|</span><span class=\"token scalar string\">\n      /usr/bin/ruby -e \"$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)\"\n      brew install ansible</span>\n    <span class=\"token key atrule\">displayName</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'Install Ansible'</span>\n    \n  <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">script</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">|</span><span class=\"token scalar string\">\n      rm -rf /usr/local/bin/node</span>\n    <span class=\"token key atrule\">displayName</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'Uninstall default node'</span>\n    \n    \n  <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">script</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">|</span><span class=\"token scalar string\">\n      make setup TARGET=mac</span>\n    <span class=\"token key atrule\">displayName</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'Run Ansible'</span>\n    \n  <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">script</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">|</span><span class=\"token scalar string\">\n      make before-check TARGET=mac</span>\n    <span class=\"token key atrule\">displayName</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'Before Run Serverspec'</span>\n  <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">script</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">|</span><span class=\"token scalar string\">\n      make check TARGET=mac</span>\n    <span class=\"token key atrule\">displayName</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'Run Serverspec'</span></code></pre></div>\n<p>ScriptにMakefileで定義したコマンドを入れているだけです。</p>\n<p><img src=\"https://i.imgur.com/ZpMjdsY.png\" alt=\"img\"></p>\n<p>無事CIが通りました！</p>\n<h2 id=\"結論\" style=\"position:relative;\"><a href=\"#%E7%B5%90%E8%AB%96\" aria-label=\"結論 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>結論</h2>\n<p>Azure DevOps Build Pipelineで簡単にできました！</p>","fields":{"slug":"2019/10/11/azure-dev-pipeline"},"frontmatter":{"tags":["Auto Provisioning","Ansible","Serverspec","Mac","Azure Devops Build Pipeline"],"templateKey":"blog-post","slug":"2019/10/11/azure-dev-pipeline","id":null,"title":"Ansible + Serverspecを使ってMacの環境構築を自動でする (Azure DevOps Build Pipeline編)","url":"2019/10/11/azure-dev-pipeline","date":"2019-10-10T15:04:39.398Z","description":"Ansible + Serverspecを使ってMacの環境構築を自動化し、Azure DevOps Build PipelineでCIを回します。","headerImage":"https://i.imgur.com/9iGRHft.png","year":"2019","month":"10"}}},{"node":{"id":"8a01d7d3-11e1-554f-b5f2-661535dc48df","html":"<p>Serverspecで構築した環境を確認したい!!</p>\n<p>前回、Ansibleを使って、Macの環境を構築しました。一部べきとう性が保てない箇所があったりしたので、正しく設定値が入っているかServerspecを使ってMacの状態を確認していきます。</p>\n<h2 id=\"table-of-contents\" style=\"position:relative;\"><a href=\"#table-of-contents\" aria-label=\"table of contents permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Table of Contents</h2>\n<div class=\"toc\">\n<ul>\n<li>\n<p><a href=\"#serverspec%E3%81%A8%E3%81%AF\">Serverspecとは</a></p>\n</li>\n<li>\n<p><a href=\"#serverspec%E3%81%AE%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB\">Serverspecのインストール</a></p>\n</li>\n<li>\n<p><a href=\"#serverspec%E3%81%AE%E5%88%9D%E6%9C%9F%E5%8C%96\">Serverspecの初期化</a></p>\n</li>\n<li>\n<p><a href=\"#%E3%83%86%E3%82%B9%E3%83%88%E3%83%98%E3%83%AB%E3%83%91%E3%83%BC%E3%81%AE%E4%BD%9C%E6%88%90\">テストヘルパーの作成</a></p>\n</li>\n<li>\n<p><a href=\"#spec%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%83%86%E3%82%B9%E3%83%88%E3%82%B3%E3%83%BC%E3%83%89%E3%81%AE%E4%BD%9C%E6%88%90\">Specファイル（テストコード）の作成</a></p>\n<ul>\n<li><a href=\"#%E3%82%A2%E3%83%97%E3%83%AA%E3%81%8C%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB%E3%81%95%E3%82%8C%E3%81%A6%E3%81%84%E3%82%8B%E3%81%8B%E3%81%AE%E7%A2%BA%E8%AA%8D\">アプリがインストールされているかの確認</a></li>\n<li><a href=\"#%E3%82%B3%E3%83%9E%E3%83%B3%E3%83%89%E3%81%AE%E7%B5%90%E6%9E%9C%E3%82%92%E7%A2%BA%E8%AA%8D%E3%81%99%E3%82%8B\">コマンドの結果を確認する</a></li>\n<li><a href=\"#%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%81%AB%E6%96%87%E5%AD%97%E5%88%97%E3%81%8C%E5%90%AB%E3%81%BE%E3%82%8C%E3%81%A6%E3%81%84%E3%82%8B%E3%81%8B\">ファイルに文字列が含まれているか？</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#makefile%E3%81%A7%E4%B8%80%E7%99%BA%E5%AE%9F%E8%A1%8C\">Makefileで一発実行</a></p>\n</li>\n<li>\n<p><a href=\"#%E7%B5%90%E8%AB%96\">結論</a></p>\n</li>\n</ul>\n</div>\n<h2 id=\"serverspecとは\" style=\"position:relative;\"><a href=\"#serverspec%E3%81%A8%E3%81%AF\" aria-label=\"serverspecとは permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Serverspecとは</h2>\n<p><img src=\"https://i.imgur.com/E3tw8J2.png\" alt=\"Img\"></p>\n<p>Serverspecとはサーバーの自動テストツールです。</p>\n<p>せっかくAnsibleとかで自動でたくさんのサーバーをプロビジョニングしたのに、確認はテスト項目書片手に目で見て確認…みたいな頭の悪いことをしないために作られたツールです。</p>\n<p>RubyのRSpecベースでできているツールなのでRubyでテストを書いたことある人なら取っつきやすいのも特徴です。</p>\n<h2 id=\"serverspecのインストール\" style=\"position:relative;\"><a href=\"#serverspec%E3%81%AE%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB\" aria-label=\"serverspecのインストール permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Serverspecのインストール</h2>\n<p>まずServerspecを入れるディレクトリにServerspecをインストールします。</p>\n<p>あらかじめRubyが動く環境を作ったうえでbundle installしていきます。</p>\n<p>まずbundleのベースファイルを作っていきます。</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">bundle init</code></pre></div>\n<p>次に、GemfileにserverspecとRakeを指定しておきます。</p>\n<div class=\"gatsby-highlight\" data-language=\"ruby\"><pre class=\"language-ruby\"><code class=\"language-ruby\"><span class=\"token comment\"># frozen_string_literal: true</span>\n\nsource <span class=\"token string-literal\"><span class=\"token string\">\"https://rubygems.org\"</span></span>\n\ngit_source<span class=\"token punctuation\">(</span><span class=\"token symbol\">:github</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token operator\">|</span>repo_name<span class=\"token operator\">|</span> <span class=\"token string-literal\"><span class=\"token string\">\"https://github.com/</span><span class=\"token interpolation\"><span class=\"token delimiter punctuation\">#{</span><span class=\"token content\">repo_name</span><span class=\"token delimiter punctuation\">}</span></span><span class=\"token string\">\"</span></span> <span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\"># gem \"rails\"</span>\ngem <span class=\"token string-literal\"><span class=\"token string\">\"serverspec\"</span></span>\ngem <span class=\"token string-literal\"><span class=\"token string\">\"rake\"</span></span></code></pre></div>\n<p>そうしたら、bundle installしていきます。</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">bundle <span class=\"token function\">install</span> --path<span class=\"token operator\">=</span>vendor/bundle</code></pre></div>\n<h2 id=\"serverspecの初期化\" style=\"position:relative;\"><a href=\"#serverspec%E3%81%AE%E5%88%9D%E6%9C%9F%E5%8C%96\" aria-label=\"serverspecの初期化 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Serverspecの初期化</h2>\n<p>ServerspecがインストールできたらServerspecの初期化をしていきます。</p>\n<p>bundleで、</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">bundle <span class=\"token builtin class-name\">exec</span> serverspec-init</code></pre></div>\n<p>と実行すると、</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">Select OS type:\n \n  <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> UN*X\n  <span class=\"token number\">2</span><span class=\"token punctuation\">)</span> Windows\n \nSelect number: <span class=\"token number\">1</span>  <span class=\"token comment\"># MacなのでUnix系を選択</span>\n \nSelect a backend type:\n \n  <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> SSH\n  <span class=\"token number\">2</span><span class=\"token punctuation\">)</span> Exec <span class=\"token punctuation\">(</span>local<span class=\"token punctuation\">)</span> <span class=\"token comment\"># MacなのでLocal Execを選択</span>\n \nSelect number: <span class=\"token number\">2</span>\n \n + spec/\n + spec/localhost/\n + spec/localhost/sample_spec.rb\n + spec/spec_helper.rb\n + Rakefile\n + .rspec</code></pre></div>\n<p>とします。これで準備はOKです。</p>\n<h2 id=\"テストヘルパーの作成\" style=\"position:relative;\"><a href=\"#%E3%83%86%E3%82%B9%E3%83%88%E3%83%98%E3%83%AB%E3%83%91%E3%83%BC%E3%81%AE%E4%BD%9C%E6%88%90\" aria-label=\"テストヘルパーの作成 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>テストヘルパーの作成</h2>\n<p>Serverspecは上述したとおり、Ruby(RSpec)でできてるので、テスト用のヘルパーを作成し、テストに使う変数をspecファイル（テストコード）で利用できるようにしておきます。</p>\n<p>今回は <code class=\"language-text\">spec/spec_helper.rb</code> に、</p>\n<div class=\"gatsby-highlight\" data-language=\"ruby\"><pre class=\"language-ruby\"><code class=\"language-ruby\"><span class=\"token keyword\">require</span> <span class=\"token string-literal\"><span class=\"token string\">'serverspec'</span></span>\n\nset <span class=\"token symbol\">:backend</span><span class=\"token punctuation\">,</span> <span class=\"token symbol\">:exec</span>\n\n<span class=\"token comment\"># Load Variables for variables.yml</span>\n<span class=\"token keyword\">def</span> <span class=\"token method-definition\"><span class=\"token function\">load_configuration</span></span> <span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span>\n    configuration <span class=\"token operator\">=</span> <span class=\"token constant\">YAML</span><span class=\"token punctuation\">.</span>load_file <span class=\"token string-literal\"><span class=\"token string\">'variables.yml'</span></span>\n    configuration<span class=\"token punctuation\">[</span><span class=\"token string-literal\"><span class=\"token string\">'vars'</span></span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>key<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>map <span class=\"token keyword\">do</span> <span class=\"token operator\">|</span>package<span class=\"token operator\">|</span>\n      package<span class=\"token punctuation\">.</span>kind_of<span class=\"token operator\">?</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">Hash</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">?</span> package<span class=\"token punctuation\">[</span><span class=\"token string-literal\"><span class=\"token string\">'name'</span></span><span class=\"token punctuation\">]</span> <span class=\"token operator\">:</span> package\n    <span class=\"token keyword\">end</span>\n<span class=\"token keyword\">end</span>\n\n<span class=\"token comment\"># Load Homebrew packages</span>\n<span class=\"token keyword\">def</span> <span class=\"token method-definition\"><span class=\"token function\">homebrew_packages</span></span>\n    load_configuration <span class=\"token string-literal\"><span class=\"token string\">'homebrew_packages'</span></span>\n<span class=\"token keyword\">end</span>\n\n<span class=\"token keyword\">def</span> <span class=\"token method-definition\"><span class=\"token function\">git_conf</span></span>\n  load_configuration <span class=\"token string-literal\"><span class=\"token string\">'git_conf'</span></span>\n<span class=\"token keyword\">end</span></code></pre></div>\n<p>という感じでhelperを作り、別に <code class=\"language-text\">variables.yml</code> を作りました。</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">vars</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">homebrew_packages</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> git\n    <span class=\"token punctuation\">-</span> nodenv\n    <span class=\"token punctuation\">-</span> pyenv\n    <span class=\"token punctuation\">-</span> pyenv<span class=\"token punctuation\">-</span>virtualenv\n    <span class=\"token punctuation\">-</span> rbenv\n    <span class=\"token punctuation\">-</span> ruby<span class=\"token punctuation\">-</span>build\n    <span class=\"token punctuation\">-</span> tfenv\n    <span class=\"token punctuation\">-</span> awscli\n    <span class=\"token punctuation\">-</span> packer\n    <span class=\"token punctuation\">-</span> jq\n    <span class=\"token punctuation\">-</span> docker\n  <span class=\"token key atrule\">git_conf</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> tubone24\n    <span class=\"token punctuation\">-</span> hogehoge@gmail.com</code></pre></div>\n<h2 id=\"specファイルテストコードの作成\" style=\"position:relative;\"><a href=\"#spec%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%83%86%E3%82%B9%E3%83%88%E3%82%B3%E3%83%BC%E3%83%89%E3%81%AE%E4%BD%9C%E6%88%90\" aria-label=\"specファイルテストコードの作成 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Specファイル（テストコード）の作成</h2>\n<p>ここまで準備できたらいよいよSpecファイルを書いていきます。</p>\n<p>今回はHomebrewでインストールするパッケージの一覧とgit configで設定する名前、メール情報を変数化してます。</p>\n<p>helperでYamlに記載した変数をSpecで利用できるようになりました。</p>\n<h3 id=\"アプリがインストールされているかの確認\" style=\"position:relative;\"><a href=\"#%E3%82%A2%E3%83%97%E3%83%AA%E3%81%8C%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB%E3%81%95%E3%82%8C%E3%81%A6%E3%81%84%E3%82%8B%E3%81%8B%E3%81%AE%E7%A2%BA%E8%AA%8D\" aria-label=\"アプリがインストールされているかの確認 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>アプリがインストールされているかの確認</h3>\n<p>Homebrewで正しくアプリがインストールされているかの確認は、</p>\n<div class=\"gatsby-highlight\" data-language=\"ruby\"><pre class=\"language-ruby\"><code class=\"language-ruby\">describe package<span class=\"token punctuation\">(</span>hoge<span class=\"token punctuation\">)</span> <span class=\"token keyword\">do</span>\n  it <span class=\"token punctuation\">{</span> should be_installed <span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">end</span></code></pre></div>\n<p>とします。(hogeをテストしたいアプリ名にしてください)</p>\n<p>HomebrewでインストールしていればAssert OKとなるはずです。</p>\n<h3 id=\"コマンドの結果を確認する\" style=\"position:relative;\"><a href=\"#%E3%82%B3%E3%83%9E%E3%83%B3%E3%83%89%E3%81%AE%E7%B5%90%E6%9E%9C%E3%82%92%E7%A2%BA%E8%AA%8D%E3%81%99%E3%82%8B\" aria-label=\"コマンドの結果を確認する permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>コマンドの結果を確認する</h3>\n<p>コマンドの結果、例えばインストールしたアプリのバージョン確認は、</p>\n<div class=\"gatsby-highlight\" data-language=\"ruby\"><pre class=\"language-ruby\"><code class=\"language-ruby\">describe command<span class=\"token punctuation\">(</span><span class=\"token string-literal\"><span class=\"token string\">'pyenv versions'</span></span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">do</span>\n  its<span class=\"token punctuation\">(</span><span class=\"token symbol\">:stdout</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> should match <span class=\"token regex-literal\"><span class=\"token regex\">/py361/</span></span> <span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">end</span></code></pre></div>\n<p>とすることで実現できます。 上記では<code class=\"language-text\">pyenv versions</code> のコマンドの実行結果を比較してます。</p>\n<p>正規表現でマッチさせるため、例えば否定系は先読み否定を使い、</p>\n<div class=\"gatsby-highlight\" data-language=\"ruby\"><pre class=\"language-ruby\"><code class=\"language-ruby\">describe command<span class=\"token punctuation\">(</span><span class=\"token string-literal\"><span class=\"token string\">'git --version'</span></span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">do</span>\n  its<span class=\"token punctuation\">(</span><span class=\"token symbol\">:stdout</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> should match <span class=\"token regex-literal\"><span class=\"token regex\">/(?!Apple Git-98)/</span></span> <span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">end</span></code></pre></div>\n<p>と書けます。</p>\n<h3 id=\"ファイルに文字列が含まれているか\" style=\"position:relative;\"><a href=\"#%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%81%AB%E6%96%87%E5%AD%97%E5%88%97%E3%81%8C%E5%90%AB%E3%81%BE%E3%82%8C%E3%81%A6%E3%81%84%E3%82%8B%E3%81%8B\" aria-label=\"ファイルに文字列が含まれているか permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ファイルに文字列が含まれているか？</h3>\n<p>今回作ったレポジトリには入れてませんが、configファイルに文字列が含まれているかということもServerspecで確認できます。</p>\n<div class=\"gatsby-highlight\" data-language=\"ruby\"><pre class=\"language-ruby\"><code class=\"language-ruby\">describe file<span class=\"token punctuation\">(</span><span class=\"token string-literal\"><span class=\"token string\">'/etc/sysconfig/clock'</span></span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">do</span>\n  its<span class=\"token punctuation\">(</span><span class=\"token symbol\">:content</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> should match <span class=\"token regex-literal\"><span class=\"token regex\">/ZONE=\"Asia\\/Tokyo\"/</span></span> <span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">end</span></code></pre></div>\n<p>このようにすることで、ファイルが存在することとファイルに指定した文字列が記載されてるかをテストできます。</p>\n<p>詳しくは公式Docを御確認ください。</p>\n<h2 id=\"makefileで一発実行\" style=\"position:relative;\"><a href=\"#makefile%E3%81%A7%E4%B8%80%E7%99%BA%E5%AE%9F%E8%A1%8C\" aria-label=\"makefileで一発実行 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Makefileで一発実行</h2>\n<p>最後にMakefileを作って終わりです。</p>\n<p>下記の通りに定義を作りました。</p>\n<p>Rubyのbundle installがあるため、before-checkという定義も作ってます。</p>\n<div class=\"gatsby-highlight\" data-language=\"makefile\"><pre class=\"language-makefile\"><code class=\"language-makefile\">TARGET <span class=\"token operator\">=</span> <span class=\"token variable\">$1</span>\nCD_SERVERSPEC <span class=\"token operator\">=</span> cd serverspec/<span class=\"token variable\">$</span><span class=\"token punctuation\">{</span>TARGET<span class=\"token punctuation\">}</span>\n\n<span class=\"token target symbol\">before-check</span><span class=\"token punctuation\">:</span>\n\t<span class=\"token operator\">@</span><span class=\"token variable\">$</span><span class=\"token punctuation\">{</span>CD_SERVERSPEC<span class=\"token punctuation\">}</span> &amp;&amp; \\\n\tbundle install --path<span class=\"token operator\">=</span>vendor/bundle\n\n<span class=\"token target symbol\">check</span><span class=\"token punctuation\">:</span>\n\t<span class=\"token operator\">@</span><span class=\"token variable\">$</span><span class=\"token punctuation\">{</span>CD_SERVERSPEC<span class=\"token punctuation\">}</span> &amp;&amp; \\\n\tbundle exec rake</code></pre></div>\n<h2 id=\"結論\" style=\"position:relative;\"><a href=\"#%E7%B5%90%E8%AB%96\" aria-label=\"結論 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>結論</h2>\n<p>Macの構成管理をAnsibleで行い確認をServerspecで行なうところまで無事できました！</p>\n<p>次回はもうすることないかと思いきや、こいつをCIにのっけてみようかと思います!!</p>\n<p>もうめちゃくちゃだよ。</p>","fields":{"slug":"2019/10/08/serverspec"},"frontmatter":{"tags":["Auto Provisioning","Ansible","Serverspec","Mac"],"templateKey":"blog-post","slug":"2019/10/08/serverspec","id":null,"title":"Ansible + Serverspecを使ってMacの環境構築を自動でする (Serverspec編)","url":"2019/10/08/serverspec","date":"2019-10-09T11:34:59.707Z","description":"Ansible + Serverspecを使ってMacの環境構築を自動でします。","headerImage":"https://i.imgur.com/9iGRHft.png","year":"2019","month":"10"}}},{"node":{"id":"6af419c2-486b-58a8-8bdd-e326334e7e16","html":"<p>毎回Macの環境構築めんどくさい。</p>\n<p>開発用MacBookの構成管理がしたくなり、AnsibleとServerspecを使って作りました。</p>\n<p>記事が長くなりそうなので、今回は前半戦ということでAnsibleの設定について解説します。</p>\n<h2 id=\"table-of-contents\" style=\"position:relative;\"><a href=\"#table-of-contents\" aria-label=\"table of contents permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Table of Contents</h2>\n<div class=\"toc\">\n<ul>\n<li>\n<p><a href=\"#ansible\">Ansible</a></p>\n<ul>\n<li>\n<p><a href=\"#mac%E3%81%A7ansible%E3%82%92%E4%BD%BF%E3%81%86\">MacでAnsibleを使う</a></p>\n</li>\n<li>\n<p><a href=\"#inventory%E3%82%92%E8%A8%AD%E5%AE%9A%E3%81%99%E3%82%8B\">Inventoryを設定する</a></p>\n</li>\n<li>\n<p><a href=\"#role%E3%82%92%E8%A8%AD%E5%AE%9A\">Roleを設定</a></p>\n<ul>\n<li><a href=\"#homebrew\">Homebrew</a></li>\n<li><a href=\"#path%E3%81%AE%E9%80%9A%E3%81%97%E6%96%B9\">PATHの通し方</a></li>\n<li><a href=\"#shell\">shell</a></li>\n<li><a href=\"#%E5%A4%89%E6%95%B0%E3%81%AE%E7%AE%A1%E7%90%86\">変数の管理</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#playbook%E3%81%AE%E8%A8%AD%E5%AE%9A\">playbookの設定</a></p>\n</li>\n</ul>\n</li>\n<li>\n<p><a href=\"#makefile%E3%81%A7%E4%B8%80%E7%99%BA%E5%AE%9F%E8%A1%8C\">Makefileで一発実行</a></p>\n</li>\n<li>\n<p><a href=\"#%E7%B5%90%E8%AB%96\">結論</a></p>\n</li>\n</ul>\n</div>\n<h2 id=\"ansible\" style=\"position:relative;\"><a href=\"#ansible\" aria-label=\"ansible permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Ansible</h2>\n<p><img src=\"https://i.imgur.com/oBucHNe.png\" alt=\"Img\"></p>\n<p>Ansibleとは<strong>Python</strong>製の<strong>OSS構成管理ツール</strong>です。</p>\n<p>便利なモジュールが多数用意されており、パッケージのインストール、コンフィグの書き換え、サービスの立ち上げ、有効化etc.. さまざまな構成を<strong>Yaml形式</strong>でパパっとかけることがポイントです。</p>\n<p>また、<strong>冪等（べきとう）性</strong>、つまり何回実行しても結果が変わらないことを保証したり、<strong>エージェントレス</strong>で構成管理対象のサーバーに事前インストールが必要ないことが評価されている点です。</p>\n<h3 id=\"macでansibleを使う\" style=\"position:relative;\"><a href=\"#mac%E3%81%A7ansible%E3%82%92%E4%BD%BF%E3%81%86\" aria-label=\"macでansibleを使う permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>MacでAnsibleを使う</h3>\n<p>ローカル環境であるMacの構成管理にもAnsibleが使えます。</p>\n<p>ansible_connectionというパラメータをlocalにすることで、localhost上のマシンに対してコマンドが発行できるのでそれをうまく使います。</p>\n<p>また、Macでパッケージをインストールするときにたびたびお世話になる<strong>Homebrew</strong>もAnsibleのモジュールにちゃんと用意されていますのでそちらを使います。</p>\n<p>Homebrewでのインストールは次のように定義します。</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'Install Git'</span>\n  <span class=\"token key atrule\">homebrew</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'git'</span>\n    <span class=\"token key atrule\">state</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'present'</span></code></pre></div>\n<p>簡単そうですね。では早速作っていきましょう。</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">├─ansible\n│  └─mac\n│      ├─inventory\n|      |  ├─default\n│      │  └─group_vars\n│      │      └─local\n│      ├─playbooks\n│      └─roles\n│          └─dev-tools\n│              ├─tasks\n|              |   |\n|              |   └─main.yml\n|              |   └─hoge.yml\n│              └─vars\n|                 └─main.yml</code></pre></div>\n<p>Ansibleのディレクトリ構成は上記のようにしてます。</p>\n<p>Ansibleのplaybookを作るにはざっくり3つの手順を取ります。</p>\n<ol>\n<li>接続先情報をまとめたInventoryを設定</li>\n<li>実際の構成情報を記載したRoleを設定</li>\n<li>InventoryとRoleをひとまとめにしたplaybookを設定</li>\n</ol>\n<p>では早速Inventoryの設定から進めていきます。</p>\n<h3 id=\"inventoryを設定する\" style=\"position:relative;\"><a href=\"#inventory%E3%82%92%E8%A8%AD%E5%AE%9A%E3%81%99%E3%82%8B\" aria-label=\"inventoryを設定する permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Inventoryを設定する</h3>\n<p>Inventoryは複数のサーバーをグルーピングして、同時にプロビジョンするためにサーバーの接続情報をまとめておくコンフィグです。</p>\n<p>今回はMacに適用するため、接続先情報はlocalとなります。</p>\n<p>inventoryをコマンドで指定しない場合にdefalutで設定される<code class=\"language-text\">defalut</code>ファイルに下記を設定します。</p>\n<p><a href=\"https://github.com/tubone24/mac-auto-setup/blob/master/ansible/mac/inventory/default\" target=\"_blank\" rel=\"noopener noreferrer\">inventory/defalut</a> に、</p>\n<div class=\"gatsby-highlight\" data-language=\"ini\"><pre class=\"language-ini\"><code class=\"language-ini\"><span class=\"token section\"><span class=\"token punctuation\">[</span><span class=\"token section-name selector\">local</span><span class=\"token punctuation\">]</span></span>\nlocalhost</code></pre></div>\n<p>これで、特にInventoryを指定しない場合は<code class=\"language-text\">localhost</code>として接続がされます。また、InventoryGroupとして<code class=\"language-text\">local</code>を指定しているため、<code class=\"language-text\">group_vars/local</code>にlocalとして共通の変数を定義できます。</p>\n<p>今回は複数サーバーで共有させる変数が見当たらないので特に設定しません。</p>\n<p><a href=\"https://github.com/tubone24/mac-auto-setup/blob/master/ansible/mac/inventory/group_vars/local/ansible.yml\" target=\"_blank\" rel=\"noopener noreferrer\">inventory/group_vars/local/ansible.yml</a> に、</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">ansible_connection</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'local'</span></code></pre></div>\n<p>と設定しておけばいいです。</p>\n<h3 id=\"roleを設定\" style=\"position:relative;\"><a href=\"#role%E3%82%92%E8%A8%AD%E5%AE%9A\" aria-label=\"roleを設定 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Roleを設定</h3>\n<p>次にRoleを設定していきます。</p>\n<p>今回は特にRoleを分ける必要もないのですが、たとえば、</p>\n<ul>\n<li>開発者のMac</li>\n<li>デザイナーのMac</li>\n<li>運用者のMac</li>\n</ul>\n<p>とそれぞれインストールするアプリが異なる場合、全員に共通して入れたい設定やAさんは開発者兼デザイナーで両方のアプリが入れたいなどの要求もある場合はそれぞれ、</p>\n<ul>\n<li>dev-tools</li>\n<li>design-tools</li>\n<li>ops-tools</li>\n</ul>\n<p>みたくRoleをわけておくのがセオリーです。</p>\n<p>さて、今回は開発者用のRoleだけつくればいいことにしますので、</p>\n<p>dev-toolsだけ用意します。</p>\n<p>また、各RoleにはTaskというプロビジョニングの実行単位があります。</p>\n<p>例えば、Pythonを入れるTask、Node.jsを入れるTaskという具合です。</p>\n<p>AnsibleではTasksディレクトリのmain.ymlが読み込まれるため、<strong>各Taskごとに分けたYaml</strong>を<strong>main.ymlでInclude</strong>して上げればいいわけです。</p>\n<p>roles/dev-tools/tasks/main.ymlに、</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token punctuation\">-</span> <span class=\"token key atrule\">include</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'tools.yml'</span>\n<span class=\"token punctuation\">-</span> <span class=\"token key atrule\">include</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'git.yml'</span>\n<span class=\"token punctuation\">-</span> <span class=\"token key atrule\">include</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'nodejs.yml'</span>\n<span class=\"token punctuation\">-</span> <span class=\"token key atrule\">include</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'terraform.yml'</span>\n<span class=\"token punctuation\">-</span> <span class=\"token key atrule\">include</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'python.yml'</span>\n<span class=\"token punctuation\">-</span> <span class=\"token key atrule\">include</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'ruby.yml'</span>\n<span class=\"token punctuation\">-</span> <span class=\"token key atrule\">include</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'docker.yml'</span></code></pre></div>\n<p>とIncludeさせるだけです。かんたんです。</p>\n<h4 id=\"homebrew\" style=\"position:relative;\"><a href=\"#homebrew\" aria-label=\"homebrew permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Homebrew</h4>\n<p>上記にも書いたとおり、AnsibleではHomebrewモジュールが用意されているため、</p>\n<p><a href=\"https://github.com/tubone24/mac-auto-setup/blob/master/ansible/mac/roles/dev-tools/tasks/nodejs.yml\" target=\"_blank\" rel=\"noopener noreferrer\">roles/dev-tools/tasks/nodejs.yml</a></p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'Install nodenv'</span>\n  <span class=\"token key atrule\">homebrew</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'nodenv'</span>\n    <span class=\"token key atrule\">state</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'present'</span></code></pre></div>\n<p>と記載すればインストールが実現できます。</p>\n<p>また、用意されているモジュールを使うことで、すでにインストール、設定済みでも、</p>\n<p>エラーにならずプロビジョニングが終了しますのでなるべく使えるモジュールがないか探しましょう。</p>\n<h4 id=\"pathの通し方\" style=\"position:relative;\"><a href=\"#path%E3%81%AE%E9%80%9A%E3%81%97%E6%96%B9\" aria-label=\"pathの通し方 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>PATHの通し方</h4>\n<p>構成のなかでいくつかPATHを通す必要があり、bash_profileに環境変数のexportを記載する必要がでてきました。</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># bash_profileに書きたい</span>\n<span class=\"token builtin class-name\">export</span> <span class=\"token assign-left variable\">PYENV_ROOT</span><span class=\"token operator\">=</span><span class=\"token string\">\"<span class=\"token variable\">${<span class=\"token environment constant\">HOME</span>}</span>/.pyenv\"</span>\n<span class=\"token builtin class-name\">export</span> <span class=\"token assign-left variable\"><span class=\"token environment constant\">PATH</span></span><span class=\"token operator\">=</span><span class=\"token variable\">${PYENV_ROOT}</span>/bin:<span class=\"token variable\">${PYENV_ROOT}</span>/shims:<span class=\"token variable\">${<span class=\"token environment constant\">PATH</span>}</span>\n\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">[</span> -d <span class=\"token string\">\"<span class=\"token variable\">${PYENV_ROOT}</span>\"</span> <span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> <span class=\"token keyword\">then</span>\n    <span class=\"token builtin class-name\">eval</span> <span class=\"token string\">\"<span class=\"token variable\"><span class=\"token variable\">$(</span>pyenv init -<span class=\"token variable\">)</span></span>\"</span>\n    <span class=\"token builtin class-name\">eval</span> <span class=\"token string\">\"<span class=\"token variable\"><span class=\"token variable\">$(</span>pyenv virtualenv-init -<span class=\"token variable\">)</span></span>\"</span>\n<span class=\"token keyword\">fi</span></code></pre></div>\n<p>そのようなときに役立つのが<strong>inlinefile</strong>と<strong>blockinline</strong>です。</p>\n<p><a href=\"https://github.com/tubone24/mac-auto-setup/blob/master/ansible/mac/roles/dev-tools/tasks/python.yml\" target=\"_blank\" rel=\"noopener noreferrer\">roles/dev-tools/tasks/python.yml</a></p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token comment\"># inlinefile</span>\n<span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'Add PATH'</span>\n  <span class=\"token key atrule\">lineinfile</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">dest</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'~/.bash_profile'</span>\n    <span class=\"token key atrule\">line</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'{{ item }}'</span>\n  <span class=\"token key atrule\">with_items</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token string\">'export PYENV_ROOT=\"${HOME}/.pyenv\"'</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token string\">'export PATH=${PYENV_ROOT}/bin:${PYENV_ROOT}/shims:${PATH}'</span>\n\n<span class=\"token comment\"># blockinline</span>\n<span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'Setup pyenv-virtualenv'</span>\n  <span class=\"token key atrule\">blockinfile</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">dest</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'~/.bash_profile'</span>\n    <span class=\"token key atrule\">block</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">|</span><span class=\"token scalar string\">\n      if [ -d \"${PYENV_ROOT}\" ]; then\n        eval \"$(pyenv init -)\"\n        eval \"$(pyenv virtualenv-init -)\"\n      fi</span></code></pre></div>\n<p>のように呼び出すだけでbash_profileに<strong>冪等性を保ったまま、コンフィグを書き込むこと</strong>ができます。</p>\n<p>inlinefileとblockinlineの違いは一行か複数行かということです。</p>\n<p>blockinlineで複数行を記載するとblockの中身の順番が<strong>担保</strong>されます。</p>\n<h4 id=\"shell\" style=\"position:relative;\"><a href=\"#shell\" aria-label=\"shell permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>shell</h4>\n<p>モジュールが見あたらなく、プロビジョニングができないときは仕方なくshellモジュールを使うことができます。</p>\n<p><a href=\"https://github.com/tubone24/mac-auto-setup/blob/master/ansible/mac/roles/dev-tools/tasks/python.yml\" target=\"_blank\" rel=\"noopener noreferrer\">roles/dev-tools/tasks/python.yml</a></p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'Install Python 3.6.1'</span>\n  <span class=\"token key atrule\">shell</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'pyenv install 3.6.1'</span>\n  <span class=\"token key atrule\">ignore_errors</span><span class=\"token punctuation\">:</span> yes</code></pre></div>\n<p>ただし、冪等性は保たれないため、すでに環境ができていた場合、エラーになってしまう可能性があります。</p>\n<p>少し乱暴ですが、<strong>ignore_errors: yes</strong> を使うことでエラーがでても読み飛ばして次のタスクに進むことができます。</p>\n<p>今回はignore_errors: yesした部分をServerspecで確認する形でOKとしてます。</p>\n<h4 id=\"変数の管理\" style=\"position:relative;\"><a href=\"#%E5%A4%89%E6%95%B0%E3%81%AE%E7%AE%A1%E7%90%86\" aria-label=\"変数の管理 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>変数の管理</h4>\n<p>変数を管理したくなったらvarsに記載することでtask側でも呼び出すことができます。</p>\n<p><a href=\"https://github.com/tubone24/mac-auto-setup/blob/master/ansible/mac/roles/dev-tools/vars/main.yml\" target=\"_blank\" rel=\"noopener noreferrer\">vars/main.yml</a> に、</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">git</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"foobar\"</span>\n  <span class=\"token key atrule\">mail</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"hoge@example.com\"</span></code></pre></div>\n<p>と記載し、</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'Set git name'</span>\n  <span class=\"token key atrule\">shell</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'git config --global user.name \"{{ git.name }}\"'</span>\n\n<span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'Set git mail'</span>\n  <span class=\"token key atrule\">shell</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'git config --global user.email \"{{ git.mail }}\"'</span></code></pre></div>\n<p>と宣言すれば利用できます。</p>\n<h3 id=\"playbookの設定\" style=\"position:relative;\"><a href=\"#playbook%E3%81%AE%E8%A8%AD%E5%AE%9A\" aria-label=\"playbookの設定 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>playbookの設定</h3>\n<p>Ansible最後はplaybookです。</p>\n<p>とはいったものの、roleとinventoryを紐づければいいだけですので、</p>\n<p><a href=\"https://github.com/tubone24/mac-auto-setup/blob/master/ansible/mac/playbooks/my-mac.yml\" target=\"_blank\" rel=\"noopener noreferrer\">playbooks/my-mac.yml</a></p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token punctuation\">-</span> <span class=\"token key atrule\">hosts</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'local'</span>\n  <span class=\"token key atrule\">roles</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token string\">'dev-tools'</span></code></pre></div>\n<p>とすれば出来上がりです。</p>\n<p>これで、</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">ansible-playbook playbooks/my-mac.yml</code></pre></div>\n<p>のように実行すればansibleの実行が可能です。</p>\n<h2 id=\"makefileで一発実行\" style=\"position:relative;\"><a href=\"#makefile%E3%81%A7%E4%B8%80%E7%99%BA%E5%AE%9F%E8%A1%8C\" aria-label=\"makefileで一発実行 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Makefileで一発実行</h2>\n<p>仕上げにMakefileをディレクトリルートに作り、煩わしいコマンドから解放されましょう。</p>\n<p><a href=\"https://github.com/tubone24/mac-auto-setup/blob/master/Makefile\" target=\"_blank\" rel=\"noopener noreferrer\">Makefile</a>に、</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">TARGET = $1\nCD_ANSIBLE = cd ansible/${TARGET}\nCD_SERVERSPEC = cd serverspec/${TARGET}\n\nsetup:\n\t@${CD_ANSIBLE} &amp;&amp; \\\n\tansible-playbook playbooks/my-mac.yml</code></pre></div>\n<p>のように設定しました。</p>\n<p>これで、</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">make</span> setup <span class=\"token assign-left variable\">TARGET</span><span class=\"token operator\">=</span>mac</code></pre></div>\n<p>で実行可能になりました。</p>\n<h2 id=\"結論\" style=\"position:relative;\"><a href=\"#%E7%B5%90%E8%AB%96\" aria-label=\"結論 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>結論</h2>\n<p>長くなったのでServerspecは次項で話します。</p>\n<p>Ansibleはディレクトリが複雑なイメージがありますが、意味を理解すれば簡単です。</p>\n<p>みなさまもMacの構成管理にトライしてみてください。</p>","fields":{"slug":"2019/10/6/mac-auto-setup"},"frontmatter":{"tags":["Auto Provisioning","Ansible","Serverspec","Mac"],"templateKey":"blog-post","slug":"2019/10/6/mac-auto-setup","id":null,"title":"Ansible + Serverspecを使ってMacの環境構築を自動でする (Ansible編)","url":"2019/10/6/mac-auto-setup","date":"2019-10-06T02:20:10.067Z","description":"Ansible + Serverspecを使ってMacの環境構築を自動でします","headerImage":"https://i.imgur.com/9iGRHft.png","year":"2019","month":"10"}}},{"node":{"id":"2862fb87-40d8-5c33-b8c4-2c331c3a001f","html":"<p>10/1は天下一品の日！</p>\n<p>タイトル通りです。毎年ルーティーンでやっているのですが10/1は天下一品祭りなので、食べてきました。</p>\n<p>およそ2時間くらい並びましたが何とか食べることができました。</p>\n<p><img src=\"https://i.imgur.com/KlSNdJv.jpg\" alt=\"Img\"></p>\n<p><strong>唐揚げラーメン定食こってりニンニク入り＋ハイボール</strong></p>\n<p>うまい！異常なし。</p>\n<h2 id=\"table-of-contents\" style=\"position:relative;\"><a href=\"#table-of-contents\" aria-label=\"table of contents permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Table of Contents</h2>\n<div class=\"toc\">\n<ul>\n<li><a href=\"#%E3%82%82%E3%82%89%E3%81%88%E3%82%8B%E7%84%A1%E6%96%99%E5%88%B8\">もらえる無料券</a></li>\n<li><a href=\"#%E7%B5%90%E8%AB%96\">結論</a></li>\n</ul>\n</div>\n<h2 id=\"もらえる無料券\" style=\"position:relative;\"><a href=\"#%E3%82%82%E3%82%89%E3%81%88%E3%82%8B%E7%84%A1%E6%96%99%E5%88%B8\" aria-label=\"もらえる無料券 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>もらえる無料券</h2>\n<p>10/1はラーメン無料券がもらえます。もらってきました。</p>\n<p><img src=\"https://i.imgur.com/dWCY2vN.jpg\" alt=\"Img\"></p>\n<h2 id=\"結論\" style=\"position:relative;\"><a href=\"#%E7%B5%90%E8%AB%96\" aria-label=\"結論 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>結論</h2>\n<p>来年も行きます。</p>","fields":{"slug":"2019/10/01/ramen"},"frontmatter":{"tags":["ぼやき","ラーメン","天下一品","デブ活"],"templateKey":"blog-post","slug":"2019/10/01/ramen","id":null,"title":"10/1は天下一品の日","url":"2019/10/01/ramen","date":"2019-10-01T14:19:30.826Z","description":"天下一品食ってきました。","headerImage":"https://i.imgur.com/KlSNdJv.jpg","year":"2019","month":"10"}}},{"node":{"id":"faaddc6b-9403-5dc3-92e7-60b621265957","html":"<p>くっそかんたんにFormできた。</p>\n<p>Netlifyに簡単にFormを作る機能が用意されているので利用用途ないですが、Gatsby.jsで作ったBlogにFormを作ってみようかと思います。</p>\n<p><a href=\"https://www.netlify.com/docs/form-handling/\" target=\"_blank\" rel=\"noopener noreferrer\">https://www.netlify.com/docs/form-handling/</a></p>\n<p>特に必要なわけではないので技術選定とかはしませんが、一般的にForm付きのページを作る際、</p>\n<ul>\n<li>PHPでゴリゴリ書く</li>\n<li>Google Formを使う</li>\n</ul>\n<p>の選択肢があるかと思います。</p>\n<p>せっかくGatsby.jsで静的サイトに仕上げてるのでPHPで書くのだけはやめたいです。</p>\n<p>そんなときにNetlify FormやGoogle Formは役立つのかもしれませんね。</p>\n<h2 id=\"table-of-contents\" style=\"position:relative;\"><a href=\"#table-of-contents\" aria-label=\"table of contents permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Table of Contents</h2>\n<div class=\"toc\">\n<ul>\n<li>\n<p><a href=\"#gatsbyjs%E3%81%A7form%E7%94%A8%E3%83%9A%E3%83%BC%E3%82%B8%E3%82%92%E5%80%8B%E5%88%A5%E3%81%AB%E4%BD%9C%E3%82%8B\">Gatsby.jsでForm用ページを個別に作る</a></p>\n</li>\n<li>\n<p><a href=\"#bot%E9%99%A4%E3%81%91\">Bot除け</a></p>\n<ul>\n<li><a href=\"#data-netlify-honeypot\">data-netlify-honeypot</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%E5%86%85%E5%AE%B9%E3%81%AE%E7%A2%BA%E8%AA%8D\">内容の確認</a></p>\n</li>\n<li>\n<p><a href=\"#%E7%B5%90%E8%AB%96\">結論</a></p>\n</li>\n</ul>\n</div>\n<h2 id=\"gatsbyjsでform用ページを個別に作る\" style=\"position:relative;\"><a href=\"#gatsbyjs%E3%81%A7form%E7%94%A8%E3%83%9A%E3%83%BC%E3%82%B8%E3%82%92%E5%80%8B%E5%88%A5%E3%81%AB%E4%BD%9C%E3%82%8B\" aria-label=\"gatsbyjsでform用ページを個別に作る permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Gatsby.jsでForm用ページを個別に作る</h2>\n<p>せっかくのReactなのでコンポーネントにしてもよいのですが、Formなんて1ページしか使わないので\n再利用性を考えずページとして作っちゃいます。</p>\n<p>Gatsby.jsではpagesに入れたJavaScriptは固定ページとして動作しますので、ここではcontact.jsという名前でFormページを作ります。（お問い合わせページですね）</p>\n<p>公式Docを読むとFormタグを打つ際にattributeにdata-netlify=trueとするだけらしいですね。こりりゃ簡単。</p>\n<p>早速作ってみます。</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> ReactGA <span class=\"token keyword\">from</span> <span class=\"token string\">'react-ga'</span><span class=\"token punctuation\">;</span>\n\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Contact</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token operator\">&lt;</span>div className<span class=\"token operator\">=</span><span class=\"token string\">\"container\"</span><span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>div\n          className<span class=\"token operator\">=</span><span class=\"token string\">\"row\"</span>\n          style<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span>\n            <span class=\"token literal-property property\">margin</span><span class=\"token operator\">:</span> <span class=\"token number\">15</span><span class=\"token punctuation\">,</span>\n          <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n        <span class=\"token operator\">></span>\n          <span class=\"token operator\">&lt;</span>Sidebar<span class=\"token operator\">/</span><span class=\"token operator\">></span>\n          <span class=\"token operator\">&lt;</span>div className<span class=\"token operator\">=</span><span class=\"token string\">\"col order-2\"</span><span class=\"token operator\">></span>\n            <span class=\"token operator\">&lt;</span>h1<span class=\"token operator\">></span>Contact Form<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>h1<span class=\"token operator\">></span>\n            <span class=\"token operator\">&lt;</span>p<span class=\"token operator\">></span>Please your Comment<span class=\"token punctuation\">.</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>p<span class=\"token operator\">></span>\n            <span class=\"token operator\">&lt;</span>form\n              name<span class=\"token operator\">=</span><span class=\"token string\">\"contact\"</span>\n              method<span class=\"token operator\">=</span><span class=\"token string\">\"post\"</span>\n              action<span class=\"token operator\">=</span><span class=\"token string\">\"/thanks/\"</span>\n              data<span class=\"token operator\">-</span>netlify<span class=\"token operator\">=</span><span class=\"token string\">\"true\"</span>\n              data<span class=\"token operator\">-</span>netlify<span class=\"token operator\">-</span>honeypot<span class=\"token operator\">=</span><span class=\"token string\">\"bot-field\"</span>\n            <span class=\"token operator\">></span>\n              <span class=\"token punctuation\">{</span><span class=\"token comment\">/* The `form-name` hidden field is required to support form submissions without JavaScript */</span><span class=\"token punctuation\">}</span>\n              <span class=\"token operator\">&lt;</span>input type<span class=\"token operator\">=</span><span class=\"token string\">\"hidden\"</span> name<span class=\"token operator\">=</span><span class=\"token string\">\"form-name\"</span> value<span class=\"token operator\">=</span><span class=\"token string\">\"contact\"</span><span class=\"token operator\">/</span><span class=\"token operator\">></span>\n              <span class=\"token operator\">&lt;</span>p hidden<span class=\"token operator\">></span>\n                <span class=\"token operator\">&lt;</span>label<span class=\"token operator\">></span>\n                  Don’t fill <span class=\"token keyword\">this</span> <span class=\"token literal-property property\">out</span><span class=\"token operator\">:</span><span class=\"token punctuation\">{</span><span class=\"token string\">' '</span><span class=\"token punctuation\">}</span>\n                  <span class=\"token operator\">&lt;</span>input name<span class=\"token operator\">=</span><span class=\"token string\">\"bot-field\"</span> onChange<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleChange<span class=\"token punctuation\">}</span><span class=\"token operator\">/</span><span class=\"token operator\">></span>\n                <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>label<span class=\"token operator\">></span>\n              <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>p<span class=\"token operator\">></span>\n              <span class=\"token operator\">&lt;</span>p<span class=\"token operator\">></span>\n                <span class=\"token operator\">&lt;</span>label<span class=\"token operator\">></span>\n                  Your name<span class=\"token operator\">:</span><span class=\"token operator\">&lt;</span>br<span class=\"token operator\">/</span><span class=\"token operator\">></span>\n                  <span class=\"token operator\">&lt;</span>input type<span class=\"token operator\">=</span><span class=\"token string\">\"text\"</span> name<span class=\"token operator\">=</span><span class=\"token string\">\"name\"</span> <span class=\"token keyword\">class</span><span class=\"token operator\">=</span><span class=\"token string\">\"form-control\"</span> maxLength<span class=\"token operator\">=</span><span class=\"token string\">\"30\"</span> minLength<span class=\"token operator\">=</span><span class=\"token string\">\"2\"</span> required placeholder<span class=\"token operator\">=</span><span class=\"token string\">\"Enter your name\"</span><span class=\"token operator\">/</span><span class=\"token operator\">></span>\n\n                <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>label<span class=\"token operator\">></span>\n              <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>p<span class=\"token operator\">></span>\n              <span class=\"token operator\">&lt;</span>p<span class=\"token operator\">></span>\n                <span class=\"token operator\">&lt;</span>label<span class=\"token operator\">></span>\n                  Your email<span class=\"token operator\">:</span><span class=\"token operator\">&lt;</span>br<span class=\"token operator\">/</span><span class=\"token operator\">></span>\n                  <span class=\"token operator\">&lt;</span>input type<span class=\"token operator\">=</span><span class=\"token string\">\"email\"</span> name<span class=\"token operator\">=</span><span class=\"token string\">\"email\"</span> <span class=\"token keyword\">class</span><span class=\"token operator\">=</span><span class=\"token string\">\"form-control\"</span> aria<span class=\"token operator\">-</span>describedby<span class=\"token operator\">=</span><span class=\"token string\">\"emailHelp\"</span> pattern<span class=\"token operator\">=</span><span class=\"token string\">\"^[a-zA-Z0-9.!#$%&amp;'*+\\/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\\.[a-zA-Z0-9-]+)*$\"</span> required placeholder<span class=\"token operator\">=</span><span class=\"token string\">\"Enter your email\"</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n                  <span class=\"token operator\">&lt;</span>small id<span class=\"token operator\">=</span><span class=\"token string\">\"emailHelp\"</span> className<span class=\"token operator\">=</span><span class=\"token string\">\"form-text text-muted\"</span><span class=\"token operator\">></span>We'll never share your email <span class=\"token keyword\">with</span> anyone <span class=\"token keyword\">else</span><span class=\"token punctuation\">.</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>small<span class=\"token operator\">></span>\n                <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>label<span class=\"token operator\">></span>\n              <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>p<span class=\"token operator\">></span>\n              <span class=\"token operator\">&lt;</span>p<span class=\"token operator\">></span>\n                <span class=\"token operator\">&lt;</span>label<span class=\"token operator\">></span>\n                  <span class=\"token literal-property property\">Message</span><span class=\"token operator\">:</span><span class=\"token operator\">&lt;</span>br<span class=\"token operator\">/</span><span class=\"token operator\">></span>\n                  <span class=\"token operator\">&lt;</span>textarea name<span class=\"token operator\">=</span><span class=\"token string\">\"message\"</span> <span class=\"token keyword\">class</span><span class=\"token operator\">=</span><span class=\"token string\">\"form-control\"</span> placeholder<span class=\"token operator\">=</span><span class=\"token string\">\"Something writing...\"</span><span class=\"token operator\">/</span><span class=\"token operator\">></span>\n                <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>label<span class=\"token operator\">></span>\n              <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>p<span class=\"token operator\">></span>\n              <span class=\"token operator\">&lt;</span>p<span class=\"token operator\">></span>\n                <span class=\"token operator\">&lt;</span>label<span class=\"token operator\">></span>\n                  <span class=\"token literal-property property\">File</span><span class=\"token operator\">:</span><span class=\"token operator\">&lt;</span>br <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n                  <span class=\"token operator\">&lt;</span>input type<span class=\"token operator\">=</span><span class=\"token string\">\"file\"</span> name<span class=\"token operator\">=</span><span class=\"token string\">\"attachment\"</span> <span class=\"token keyword\">class</span><span class=\"token operator\">=</span><span class=\"token string\">\"btn btn-info\"</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n                <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>label<span class=\"token operator\">></span>\n              <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>p<span class=\"token operator\">></span>\n              <span class=\"token operator\">&lt;</span>p<span class=\"token operator\">></span>\n                <span class=\"token operator\">&lt;</span>button type<span class=\"token operator\">=</span><span class=\"token string\">\"submit\"</span> <span class=\"token keyword\">class</span><span class=\"token operator\">=</span><span class=\"token string\">\"btn btn-primary\"</span><span class=\"token operator\">></span>Send<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>button<span class=\"token operator\">></span>\n              <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>p<span class=\"token operator\">></span>\n            <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>form<span class=\"token operator\">></span>\n          <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>このような形でFormタグにattributeを追加するだけです。</p>\n<p>どうやらNetlifyでビルド済みのHTMLをアップロードする際、タグを解析してからアップロードしてるらしい。</p>\n<p>なので、ほかにもFormを使う際はname属性を変えて、別のFormということを示す必要があります。\n　\nもちろん、タグには通常のHTML同様、Bootstrapやラベル、patternを当てることもできますので、</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">&lt;button type=\"submit\" class=\"btn btn-primary\">Send&lt;/button> &lt;!-- btn classの設定 --></code></pre></div>\n<p>のような形や、</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>label</span><span class=\"token punctuation\">></span></span>Your email:<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>br</span><span class=\"token punctuation\">/></span></span>\n <span class=\"token comment\">&lt;!-- ラベルを使ったり・・ --></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>email<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>email<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>form-control<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">aria-describedby</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>emailHelp<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">pattern</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>^[a-zA-Z0-9.!#$%&amp;<span class=\"token punctuation\">'</span>*+\\/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\\.[a-zA-Z0-9-]+)*$<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">required</span> <span class=\"token attr-name\">placeholder</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Enter your email<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n　<span class=\"token comment\">&lt;!-- patternやrequired, placeholderも設定可能 --></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>small</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>emailHelp<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>form-text text-muted<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>We'll never share your email with anyone else.<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>small</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>label</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>のような形で直感的なFormを作ることもできます。</p>\n<h2 id=\"bot除け\" style=\"position:relative;\"><a href=\"#bot%E9%99%A4%E3%81%91\" aria-label=\"bot除け permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Bot除け</h2>\n<p>Netlify FormではいわゆるスパムBot除けとして2種類のオプションが用意されてます。</p>\n<ol>\n<li>いわゆる人間だったらこのフォームに何も入れるなという隠れフォームを作る（data-netlify-honeypot）</li>\n<li>reCaptureを設定する</li>\n</ol>\n<p>今回はお手軽に実装したいため、1番で進めます。</p>\n<h3 id=\"data-netlify-honeypot\" style=\"position:relative;\"><a href=\"#data-netlify-honeypot\" aria-label=\"data netlify honeypot permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>data-netlify-honeypot</h3>\n<p>data-netlify-honeypotの設定はFormのattributeに、data-netlify-honeypot=隠れフォームのnameを設定します。</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>form</span>\n  <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>contact<span class=\"token punctuation\">\"</span></span>\n  <span class=\"token attr-name\">method</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>post<span class=\"token punctuation\">\"</span></span>\n  <span class=\"token attr-name\">action</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/thanks/<span class=\"token punctuation\">\"</span></span>\n  <span class=\"token attr-name\">data-netlify</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>true<span class=\"token punctuation\">\"</span></span>\n  <span class=\"token attr-name\">data-netlify-honeypot</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>bot-field<span class=\"token punctuation\">\"</span></span>\n <span class=\"token punctuation\">></span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>hidden<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>form-name<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>contact<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span> <span class=\"token attr-name\">hidden</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>label</span><span class=\"token punctuation\">></span></span>\n    Don’t fill this out:{' '}\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>bot-field<span class=\"token punctuation\">\"</span></span> <span class=\"token special-attr\"><span class=\"token attr-name\">onChange</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token value javascript language-javascript\"><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleChange<span class=\"token punctuation\">}</span><span class=\"token operator\">/</span></span></span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>label</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>そして実際に隠れフォームを設定します。</p>\n<p>hiddenにしてるため、ふつう人間が入力することはないですが、念のため、フォームに何も入れるなというラベルを貼っておきます。</p>\n<p>こうすることで、bot-fieldに何らかしら値が入ってた場合、Form内容がNetlifyに登録されないようになります。</p>\n<h2 id=\"内容の確認\" style=\"position:relative;\"><a href=\"#%E5%86%85%E5%AE%B9%E3%81%AE%E7%A2%BA%E8%AA%8D\" aria-label=\"内容の確認 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>内容の確認</h2>\n<p>内容の確認はNetlify=>Forms=>Activity Formsから簡単にできます。</p>\n<p><img src=\"https://i.imgur.com/uWmwQRq.png\" alt=\"Img\"></p>\n<p>また、Formが送信されたときにメールor Slack or Webhookを流す機能もあります。</p>\n<p><img src=\"https://i.imgur.com/BnS7iSC.png\" alt=\"Img\"></p>\n<p>これでお問い合わせを見逃すことがなくなりますね！</p>\n<h2 id=\"結論\" style=\"position:relative;\"><a href=\"#%E7%B5%90%E8%AB%96\" aria-label=\"結論 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>結論</h2>\n<p>以前、PHPで頑張ってFormを作ってましたが、最近はこんなに簡単にFormが作れるのかと感心しました。</p>","fields":{"slug":"2019/09/30/netlify-form"},"frontmatter":{"tags":["JavaScript","Netlify","Netlify Form","Gatsby.js","React","Contact Form"],"templateKey":"blog-post","slug":"2019/09/30/netlify-form","id":null,"title":"Netlify Formを使って、簡易Contact Formを作ってみる","url":"2019/09/30/netlify-form","date":"2019-09-30T03:47:34.524Z","description":"Netlify Formを使って、簡易Contact Formを作ってみます。","headerImage":"https://i.imgur.com/uWmwQRq.png","year":"2019","month":"09"}}},{"node":{"id":"2cd86b2e-715c-53c6-a9e0-95ad06eccfbe","html":"<p>毎日大変だった。</p>\n<p>GitHubへのコントリビュートをすることをいわゆる<strong>草</strong>といいますがとりあえず30日生やし続けてたので振り返りがてら感想を書きます。</p>\n<p><img src=\"https://i.imgur.com/Ystc15x.png\" alt=\"Img\"></p>\n<h2 id=\"table-of-contents\" style=\"position:relative;\"><a href=\"#table-of-contents\" aria-label=\"table of contents permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Table of Contents</h2>\n<div class=\"toc\">\n<ul>\n<li><a href=\"#%E3%81%AA%E3%82%93%E3%81%A7%E3%82%84%E3%81%A3%E3%81%9F%E3%81%AE\">なんで？やったの？</a></li>\n<li><a href=\"#%E8%87%AA%E5%88%86%E6%B5%81write-code-every-day\">自分流Write Code Every Day</a></li>\n<li><a href=\"#%E3%82%88%E3%81%8B%E3%81%A3%E3%81%9F%E3%81%93%E3%81%A8\">よかったこと</a></li>\n<li><a href=\"#%E5%BE%AE%E5%A6%99%E3%81%A0%E3%81%A3%E3%81%9F%E3%81%93%E3%81%A8\">微妙だったこと</a></li>\n<li><a href=\"#%E6%AC%A1%E3%81%AA%E3%82%8B%E7%9B%AE%E6%A8%99\">次なる目標</a></li>\n</ul>\n</div>\n<h2 id=\"なんでやったの\" style=\"position:relative;\"><a href=\"#%E3%81%AA%E3%82%93%E3%81%A7%E3%82%84%E3%81%A3%E3%81%9F%E3%81%AE\" aria-label=\"なんでやったの permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>なんで？やったの？</h2>\n<p><a href=\"https://johnresig.com/blog/write-code-every-day/\" target=\"_blank\" rel=\"noopener noreferrer\">Write Code Every Day</a>というお話があります。</p>\n<p>要は毎日<strong>意味のある</strong>コードを書きましょうということで、自身のスキルをあげるためにとりくんでみました。</p>\n<p>というのも、本業でも少しはコードを書くのですが、一般的なエンジニアに比べると書く量も時間も少ないのが悩みで、明らかにエンジニアとしての力が不足していると最近感じたからです。</p>\n<h2 id=\"自分流write-code-every-day\" style=\"position:relative;\"><a href=\"#%E8%87%AA%E5%88%86%E6%B5%81write-code-every-day\" aria-label=\"自分流write code every day permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>自分流Write Code Every Day</h2>\n<p><strong>本家のWrite Code Every Day</strong>ですが、実は結構きびしいです。本家の<strong>John Resig</strong>さんの記事を引用すると・・</p>\n<blockquote>\n<p>I must write code every day. I can write docs, or blog posts, or other things but it must be in addition to the code that I write.</p>\n</blockquote>\n<p><strong>(毎日コードを書け！ ドキュメントやブログはもちろん書いていいけど、コードを書いたついでに書け！)</strong></p>\n<blockquote>\n<p>It must be useful code. No tweaking indentation, no code re-formatting, and if at all possible no refactoring. (All these things are permitted, but not as the exclusive work of the day.)</p>\n</blockquote>\n<p><strong>(意味のある使えるコードを書け！インデントとかリフォーマットで草生やすな。できればリファクタも草にカウントするな！)</strong></p>\n<blockquote>\n<p>All code must be written before midnight.</p>\n</blockquote>\n<p><strong>(夜の0時になる前に草はやせ！)</strong></p>\n<blockquote>\n<p>The code must be Open Source and up on Github. <strong>(GitHubにOSSとしてコードを展開しろ！)</strong></p>\n<p><cite><a href=\"https://johnresig.com/blog/write-code-every-day/\" target=\"_blank\" rel=\"noopener noreferrer\">Write Code Every Day</a></cite></p>\n</blockquote>\n<p>毎日おはようからおやすみまで働く我々にはあまりにも厳しすぎるので<strong>テーラリング</strong>します。</p>\n<p>私の<strong>Write Code Every Day</strong>は・・</p>\n<ul>\n<li>毎日草を生やすため、<strong>必ず1回以上はコミット</strong>しよう</li>\n<li><strong>ブログの記載</strong>もコミットとしてOK</li>\n<li>ブランチを切ったら必ずその日のうちに<strong>master</strong>まで持っていこう</li>\n<li>朝WIPでPushしたコードは<strong>その日のうちに動くよう</strong>にしよう</li>\n<li>インデントやリフォーマットはコミットとしないが、<strong>リファクタやCSSなどのレイアウト修正はOK</strong></li>\n<li>コメント、READMEは<strong>英語</strong>で書く</li>\n<li>土日は<strong>本家Write Code Every Day</strong>を守る</li>\n</ul>\n<p>としました。</p>\n<p>まず、社畜さんが日々のつまらなく疲れる業務や終わらない会議、生産性のない飲み会に費やす時間の合間にGitHubと向き合うだけでもすごいので、ブログ記事を書くなどでもアウトプットをすればよいことにしてます。</p>\n<p>また、一人でコードを書いていると孤独に耐えられなくなるためCIのチェックをレポジトリに入れることが重要なのですが、ちゃんと一日のアウトプットをCIに通すため、MasterPRをその日に出すようにしました。</p>\n<p><del>できるだけ英語を使うことを心掛けて、会社で褒められるTOEICの点数を上げます。</del></p>\n<h2 id=\"よかったこと\" style=\"position:relative;\"><a href=\"#%E3%82%88%E3%81%8B%E3%81%A3%E3%81%9F%E3%81%93%E3%81%A8\" aria-label=\"よかったこと permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>よかったこと</h2>\n<p>下記に記載したいいことがありました。</p>\n<ul>\n<li>毎日技術に触れることができること</li>\n<li>無理にでも何か作ったりブログを書いたりすること</li>\n<li>ブログのコミットがOKなため、常にブログのネタになるか考えてコードを書く癖がつくこと</li>\n<li>どんなに眠くても酔っていてもPCに向き合う根性が付いたこと</li>\n</ul>\n<h2 id=\"微妙だったこと\" style=\"position:relative;\"><a href=\"#%E5%BE%AE%E5%A6%99%E3%81%A0%E3%81%A3%E3%81%9F%E3%81%93%E3%81%A8\" aria-label=\"微妙だったこと permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>微妙だったこと</h2>\n<p>微妙なことも結構あります。</p>\n<ul>\n<li>慢性的な寝不足</li>\n<li>アニメを見る時間がない</li>\n<li>ギターを弾く時間がない</li>\n<li>体を動かさないのでデブになる</li>\n</ul>\n<h2 id=\"次なる目標\" style=\"position:relative;\"><a href=\"#%E6%AC%A1%E3%81%AA%E3%82%8B%E7%9B%AE%E6%A8%99\" aria-label=\"次なる目標 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>次なる目標</h2>\n<p>次は60日連続で草を生やすことを目標にします。</p>\n<p>微妙なことをいかに改善するかが成功の秘訣だと思っているので頑張ります。</p>","fields":{"slug":"2019/09/27/github-weed"},"frontmatter":{"tags":["GitHub","ぼやき","草","weed","Write Code Every Day"],"templateKey":"blog-post","slug":"2019/09/27/github-weed","id":null,"title":"GitHubに30日間草を生やし続けた感想","url":"2019/09/27/github-weed","date":"2019-09-27T10:41:02.386Z","description":"GitHubにいわゆる草を生やし続けた感想を書きます","headerImage":"https://i.imgur.com/Ystc15x.png","year":"2019","month":"09"}}},{"node":{"id":"a8ef3ea5-5c51-50e4-b754-c938fda02122","html":"<p>JSON Resumeを使ってさくさくっとそれっぽい職務経歴書を作ってみます。</p>\n<p><a href=\"https://jsonresume.org/\" target=\"_blank\" rel=\"noopener noreferrer\">JSON resume</a>というものがあるようです。</p>\n<p>今回はこちらを使って職務経歴を返すAPIを<a href=\"https://apiwithgithub.com/\" target=\"_blank\" rel=\"noopener noreferrer\">API with GitHub</a>で作りつつ、Resumeを作りたいと思います。</p>\n<h2 id=\"table-of-contents\" style=\"position:relative;\"><a href=\"#table-of-contents\" aria-label=\"table of contents permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Table of Contents</h2>\n<div class=\"toc\">\n<ul>\n<li><a href=\"#json-resume%E3%81%A8%E3%81%AF\">JSON Resumeとは？</a></li>\n<li><a href=\"#api-with-github%E3%81%AE%E8%A8%AD%E5%AE%9A\">API With GitHubの設定</a></li>\n<li><a href=\"#json-resume%E3%81%A7%E3%81%8C%E3%81%A4%E3%81%8C%E3%81%A4%E6%9B%B8%E3%81%84%E3%81%A6%E3%81%84%E3%81%8F\">JSON Resumeでがつがつ書いていく</a></li>\n<li><a href=\"#api%E3%81%8C%E3%81%A7%E3%81%8D%E3%81%9F%E3%82%89%E5%AE%9F%E9%9A%9B%E3%82%A2%E3%82%AF%E3%82%BB%E3%82%B9%E3%81%97%E3%81%A6%E3%81%BF%E3%82%8B\">APIができたら実際アクセスしてみる</a></li>\n<li><a href=\"#%E3%81%8A%E3%81%BE%E3%81%91\">おまけ</a></li>\n<li><a href=\"#%E7%B5%90%E8%AB%96\">結論</a></li>\n</ul>\n</div>\n<h2 id=\"json-resumeとは\" style=\"position:relative;\"><a href=\"#json-resume%E3%81%A8%E3%81%AF\" aria-label=\"json resumeとは permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>JSON Resumeとは？</h2>\n<p>JSON Resumeとは、JSON形式で職務経歴を記載するオープンソースのスキーマー定義です。</p>\n<p>OSSプロジェクトですので、<a href=\"https://github.com/jsonresume/resume-schema\" target=\"_blank\" rel=\"noopener noreferrer\">こちら</a>からIssueやPRを出すことができます。足りないスキーマがあれば積極的にコントリビュートしてみては？</p>\n<p>今回は<a href=\"https://qiita.com/kai_kou/items/779bdcdfc7ea5def3dfc\" target=\"_blank\" rel=\"noopener noreferrer\">APIs With GitHubとJSON-Resumeでサクッとプロフィールを返すAPIをつくる</a>を参考にまずJSON ResumeのAPIを作ろうと思います。</p>\n<h2 id=\"api-with-githubの設定\" style=\"position:relative;\"><a href=\"#api-with-github%E3%81%AE%E8%A8%AD%E5%AE%9A\" aria-label=\"api with githubの設定 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>API With GitHubの設定</h2>\n<p>API With GitHubはGitHubのJSONファイルの編集画面と、rawgithubusercontent.comを使ってJSONファイルをHTTPで返却するLINKを作成するお手軽Webサービスです。</p>\n<p>固定値のJSONを返すだけならこいつでサクサク作っちゃえばええやん。さっそく使っていきます。</p>\n<p><a href=\"https://apiwithgithub.com/\" target=\"_blank\" rel=\"noopener noreferrer\">API With GitHub</a>にアクセスするとGitHubアカウントとの連携を求められるので同意してしまいます。</p>\n<p>そうすると、Repositoryを作る画面に進みますので迷わず新しいレポジトリを作ります。</p>\n<p><img src=\"https://i.imgur.com/6Lti5I8.png\" alt=\"Img\"></p>\n<p>あとは普通にレポジトリを新規作成する手順で作っていきます。</p>\n<p><img src=\"https://i.imgur.com/d4nmRXZ.png\" alt=\"Img\"></p>\n<p>Make APIボタンを押すと・・・。</p>\n<p><img src=\"https://i.imgur.com/W3Paou3.png\" alt=\"Img\"></p>\n<p>新規JSONファイルを作る画面に進みます。</p>\n<p><img src=\"https://i.imgur.com/vzhzqiI.png\" alt=\"Img\"></p>\n<p>JSON ResumeのJSONは <code class=\"language-text\">resume.json</code>がデフォルトなので <code class=\"language-text\">resume.json</code>で作ります。</p>\n<p><img src=\"https://i.imgur.com/ay4H67M.png\" alt=\"Img\"></p>\n<p>resume.jsonを作ったばかりだと空のオブジェクトしかないのでJSONを作っていきます。</p>\n<p>項目追加はAppend, Insertがあり、ObjectとArrayと値(String, Number, Bool)を直感的に入力できます。さてこれでJSON Resumeを作る準備はできました。</p>\n<h2 id=\"json-resumeでがつがつ書いていく\" style=\"position:relative;\"><a href=\"#json-resume%E3%81%A7%E3%81%8C%E3%81%A4%E3%81%8C%E3%81%A4%E6%9B%B8%E3%81%84%E3%81%A6%E3%81%84%E3%81%8F\" aria-label=\"json resumeでがつがつ書いていく permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>JSON Resumeでがつがつ書いていく</h2>\n<p>JSON Resumeの<a href=\"https://jsonresume.org/schema/\" target=\"_blank\" rel=\"noopener noreferrer\">公式Doc</a>にもスキーマが載っていますが、完全なスキーマはGitHubにある<a href=\"https://github.com/jsonresume/resume-schema/blob/v1.0.0/examples/valid/complete.json\" target=\"_blank\" rel=\"noopener noreferrer\">Examples</a>を見たほうがよいです。</p>\n<p>こんな感じのお手本↓</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"basics\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Richard Hendriks\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"label\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Programmer\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"image\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"email\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"richard.hendriks@mail.com\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"phone\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"(912) 555-4321\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"url\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"http://richardhendricks.example.com\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"summary\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Richard hails from Tulsa. He has earned degrees from the University of Oklahoma and Stanford. (Go Sooners and Cardinal!) Before starting Pied Piper, he worked for Hooli as a part time software developer. While his work focuses on applied information theory, mostly optimizing lossless compression schema of both the length-limited and adaptive variants, his non-work interests range widely, everything from quantum computing to chaos theory. He could tell you about it, but THAT would NOT be a “length-limited” conversation!\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"location\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token property\">\"address\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"2712 Broadway St\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"postalCode\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"CA 94115\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"city\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"San Francisco\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"countryCode\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"US\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"region\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"California\"</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"profiles\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n      <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">\"network\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Twitter\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"username\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"neutralthoughts\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"url\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"\"</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">\"network\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"SoundCloud\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"username\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"dandymusicnl\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"url\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"https://soundcloud.example.com/dandymusicnl\"</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"work\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Pied Piper\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"location\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Palo Alto, CA\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"description\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Awesome compression company\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"position\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"CEO/President\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"url\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"http://piedpiper.example.com\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"startDate\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"2013-12-01\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"endDate\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"2014-12-01\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"summary\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Pied Piper is a multi-platform technology based on a proprietary universal compression algorithm that has consistently fielded high Weisman Scores™ that are not merely competitive, but approach the theoretical limit of lossless compression.\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"highlights\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n        <span class=\"token string\">\"Build an algorithm for artist to detect if their music was violating copy right infringement laws\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"Successfully won Techcrunch Disrupt\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"Optimized an algorithm that holds the current world record for Weisman Scores\"</span>\n      <span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"volunteer\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token property\">\"organization\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"CoderDojo\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"position\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Teacher\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"url\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"http://coderdojo.example.com/\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"startDate\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"2012-01-01\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"endDate\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"2013-01-01\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"summary\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Global movement of free coding clubs for young people.\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"highlights\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n        <span class=\"token string\">\"Awarded 'Teacher of the Month'\"</span>\n      <span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"education\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token property\">\"institution\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"University of Oklahoma\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"area\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Information Technology\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"studyType\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Bachelor\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"startDate\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"2011-06-01\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"endDate\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"2014-01-01\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"gpa\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"4.0\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"courses\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n        <span class=\"token string\">\"DB1101 - Basic SQL\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"CS2011 - Java Introduction\"</span>\n      <span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"awards\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token property\">\"title\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Digital Compression Pioneer Award\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"date\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"2014-11-01\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"awarder\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Techcrunch\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"summary\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"There is no spoon.\"</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"publications\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Video compression for 3d media\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"publisher\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Hooli\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"releaseDate\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"2014-10-01\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"url\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"http://en.wikipedia.org/wiki/Silicon_Valley_(TV_series)\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"summary\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Innovative middle-out compression algorithm that changes the way we store data.\"</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"skills\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Web Development\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"level\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Master\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"keywords\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n        <span class=\"token string\">\"HTML\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"CSS\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"Javascript\"</span>\n      <span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Compression\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"level\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Master\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"keywords\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n        <span class=\"token string\">\"Mpeg\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"MP4\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"GIF\"</span>\n      <span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"languages\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token property\">\"language\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"English\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"fluency\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Native speaker\"</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"interests\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Wildlife\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"keywords\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n        <span class=\"token string\">\"Ferrets\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"Unicorns\"</span>\n      <span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"references\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Erlich Bachman\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"reference\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"It is my pleasure to recommend Richard, his performance working as a consultant for Main St. Company proved that he will be a valuable addition to any company.\"</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"projects\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Miss Direction\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"description\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"A mapping engine that misguides you\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"highlights\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span> \n        <span class=\"token string\">\"Won award at AIHacks 2016\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"Built by all women team of newbie programmers\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"Using modern technologies such as GoogleMaps, Chrome Extension and Javascript\"</span>\n      <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"keywords\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n        <span class=\"token string\">\"GoogleMaps\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Chrome Extension\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Javascript\"</span>\n      <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"startDate\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"2016-08-24\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"endDate\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"2016-08-24\"</span><span class=\"token punctuation\">,</span> \n      <span class=\"token property\">\"url\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"missdirection.example.com\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"roles\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span> \n        <span class=\"token string\">\"Team lead\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Designer\"</span>\n      <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"entity\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Smoogle\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"application\"</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"meta\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"canonical\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"https://raw.githubusercontent.com/jsonresume/resume-schema/master/resume.json\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"version\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"v1.0.0\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"lastModified\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"2017-12-24T15:53:00\"</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>海外だとボランティアや学歴欄へのGPA記載とかがあるんですねー。</p>\n<p>なんとなく生きているマンにはきついキツい。</p>\n<p>軽く項目を解説すると、</p>\n<ul>\n<li>\n<p>basics</p>\n<ul>\n<li>名前や連絡先など基本情報。</li>\n<li>電話番号や詳細な住所載せていない海外兄貴は多かった。記載しない項目は空文字\"\"にしている海外兄貴が多い。(nullにしている兄貴はほとんどいなかった)</li>\n<li>海外兄貴のJSON Resumeを見るとSummeryには経験年数の他、大学の専攻や経験した言語、関わったプロジェクトなどさまざま書いている</li>\n</ul>\n</li>\n<li>\n<p>profiles</p>\n<ul>\n<li>いわゆるSNSのリンク</li>\n</ul>\n</li>\n<li>\n<p>work</p>\n<ul>\n<li>言わずもがな、職務経歴</li>\n<li>現在も続けている職場の場合はendDateを空文字\"\"にする</li>\n<li>highlights欄に箇条書きでポイントを書いておく(初めてPythonでAPI作成、デザイナーとして従事など)</li>\n</ul>\n</li>\n<li>\n<p>volunteer</p>\n<ul>\n<li>言わずもがな、ボランティア経験</li>\n<li>海外の就職支援サイト<a href=\"https://www.thebalancecareers.com/how-to-include-volunteer-work-on-your-resume-2063297\" target=\"_blank\" rel=\"noopener noreferrer\">TheBaranceCareer</a>を参考にするとボランティアは **イベントの計画、資金集め、問題解決などの重要なスキルを紹介する優れた方法であり、他の有給の仕事の経験と確実に統合されるべきです。**とのこと</li>\n<li><del>私はボランティアはほとんどしたことないです。たばこの吸い殻を拾う活動は1度参加したことありますが、それっきりです。</del></li>\n</ul>\n</li>\n<li>\n<p>education</p>\n<ul>\n<li>学歴</li>\n<li>学士はBachelor、修士はMaster、博士はDoctor</li>\n<li>海外ではちゃんと勉強しているかどうかGPAも重要視するみたいです。またもや<a href=\"https://www.thebalancecareers.com/when-to-include-your-gpa-on-your-resume-2059859\" target=\"_blank\" rel=\"noopener noreferrer\">TheBaranceCarrer</a>を参考にすると3.5以上あると就職に有利、3.0を下回る場合は書かないほうがいいらしいです。（大学サボりがここにきてつらくなってきた）</li>\n<li>副専攻とかってどう書けばいいんだろう・・</li>\n</ul>\n</li>\n<li>\n<p>awards</p>\n<ul>\n<li>受賞歴</li>\n<li>海外兄貴のResumeを見ると会社の月間売上一位みたいなのも書いていた</li>\n<li>会社内で表彰された場合はawarderをCompanyにする</li>\n</ul>\n</li>\n<li>\n<p>publications</p>\n<ul>\n<li>出版歴</li>\n<li>機械学習系海外兄貴のものをみると論文の寄稿が目立った（かっこいい）</li>\n</ul>\n</li>\n<li>\n<p>skills</p>\n<ul>\n<li>スキル</li>\n<li>配列になっているので好きなだけ書ける<del>アピールしまくる</del></li>\n<li>level欄は熟達度をMaster, Advanced, Intermediate, Beginnerで記載</li>\n</ul>\n</li>\n<li>\n<p>languages</p>\n<ul>\n<li>使える言語</li>\n<li>ネイティブの場合Native Speaker、それ以外のレベルはスキルと同じ</li>\n</ul>\n</li>\n<li>\n<p>interests</p>\n<ul>\n<li>いわゆる趣味欄</li>\n<li>重要性がいまいちわからん・・。</li>\n<li>生き物が好き的な話を書いている海外兄貴は多い。イメージ戦略か？</li>\n</ul>\n</li>\n<li>\n<p>references</p>\n<ul>\n<li>いわゆる推薦人</li>\n<li>海外だと第三者である推薦人（referee）に連絡をし過去の働きぶりなどを聞くらしい</li>\n<li>だいたい過去の上司、それも2人は最低書くべきらしいですね</li>\n</ul>\n</li>\n<li>\n<p>projects</p>\n<ul>\n<li>プロジェクト欄</li>\n<li>どれくらいの売り上げや貢献をしたか、数値で表しましょう！</li>\n<li>ここの欄は<a href=\"https://work.chron.com/describe-projects-resume-3241.html\" target=\"_blank\" rel=\"noopener noreferrer\">結構重要</a>らしい。うまく書くことで、自分のスキルセットと経験がどれくらい貴社にマッチしているか示せるチャンス！</li>\n</ul>\n</li>\n<li>\n<p>meta</p>\n<ul>\n<li>一応JSON ResumeはAPIなので、URLや改版、更新日などメタ情報を記載しましょう</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"apiができたら実際アクセスしてみる\" style=\"position:relative;\"><a href=\"#api%E3%81%8C%E3%81%A7%E3%81%8D%E3%81%9F%E3%82%89%E5%AE%9F%E9%9A%9B%E3%82%A2%E3%82%AF%E3%82%BB%E3%82%B9%E3%81%97%E3%81%A6%E3%81%BF%E3%82%8B\" aria-label=\"apiができたら実際アクセスしてみる permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>APIができたら実際アクセスしてみる</h2>\n<p>上記の項目を無事に記載できたら...</p>\n<p><img src=\"https://i.imgur.com/PSokx4v.png\" alt=\"Img\"></p>\n<p>LinkからAPIにアクセスしてみましょう!!!</p>\n<p><img src=\"https://i.imgur.com/wF82uti.png\" alt=\"Img\"></p>\n<p>ちゃんとJSON ResumeがAPIで返却されました！</p>\n<h2 id=\"おまけ\" style=\"position:relative;\"><a href=\"#%E3%81%8A%E3%81%BE%E3%81%91\" aria-label=\"おまけ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>おまけ</h2>\n<p>JSON ResumeにはHTMLのテンプレートで記載内容をきれいなResumeにするCLIが用意されています。</p>\n<p><a href=\"https://github.com/jsonresume/resume-cli\" target=\"_blank\" rel=\"noopener noreferrer\">resume-cli\n</a></p>\n<p>こちらを利用すれば・・</p>\n<p><img src=\"https://i.imgur.com/IIzgYrK.png\" alt=\"Img\"></p>\n<p>かっこいい!!!感じでResumeがサクサク作れてしまいます。</p>\n<h2 id=\"結論\" style=\"position:relative;\"><a href=\"#%E7%B5%90%E8%AB%96\" aria-label=\"結論 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>結論</h2>\n<p>よく考えたら、海外向けのResumeを作るほど海外志向ないのでただの海外就活サイトの読み漁りになりました。</p>","fields":{"slug":"2019/09/24/json-resume"},"frontmatter":{"tags":["JSON Resume","GitHub Pages","Resume","CV"],"templateKey":"blog-post","slug":"2019/09/24/json-resume","id":null,"title":"JSON Resume + API With GitHubを使って、さくっと職務経歴書チックなもののAPIなど作ってみる","url":"2019/09/24/json-resume","date":"2019-09-24T10:41:02.386Z","description":"JSON Resume + API With GitHubを使って、さくっと職務経歴書チックなもののAPIなど作ってみます","headerImage":"https://i.imgur.com/eQ7uBsO.png","year":"2019","month":"09"}}}],"pathPrefix":"pages","first":false,"last":false,"index":8,"pageCount":11,"additionalContext":{"totalCount":110}}},"staticQueryHashes":["2959249232"]}