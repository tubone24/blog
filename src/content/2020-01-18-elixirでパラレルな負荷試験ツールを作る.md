---
slug: 2020/1/24/elixir-loadtest
title: Elixirでパラレルな負荷試験ツールを作る
date: 2020-01-24T02:18:13.067Z
description: ElixirでAPIの負荷試験ツールを作りましたというお話
tags:
  - Elixir
  - Load Test
headerImage: 'https://i.imgur.com/QmIHfeR.jpg'
templateKey: blog-post
---
Elixirを使ってAPIの負荷試験ツールを作りましたな話です。

## Table of Contents

```toc

```

## 負荷試験について本気出して考えてみた

業務の中で、負荷試験について考える機会が多かった年始明けでしたので、せっかくなのでよりいい負荷試験ツールを自作してみようかと思いました。

負荷といえば並列なリクエスト、並列といえばやっぱ~~ジャイアンツ~~Elixirということで、Elixirで実装することにしました。

## ElixirでHttpリクエストをするならHttpoison

[Httpoison](https://hex.pm/packages/httpoison)はElixirで使えるHttpクライアントです。

使い方もとっても簡単で、get、postは下記のように実施できます。

```elixir
# GET
HTTPoison.get!("http://example.com",[],[{:timeout, :infinity}, {:recv_timeout, :infinity}])

# POST
payload = Poison.encode!(%{"contentType" => "image/png", "key" => "value"})

HTTPoison.post!("http://example.com", payload, [],[{:timeout, :infinity}, {:recv_timeout, :infinity}])
```
