---
slug: 2022/01/08/personal-task
title: 2022å¹´ã¯ã‚‚ã£ã¨ç”Ÿç”£çš„ã«éã”ã™ãŸã‚ã«GitHub Projectã‚’ä½¿ã£ãŸToDoç®¡ç†ã‚„ã‚Šã¾ã™!!!
date: 2022-01-08T09:06:06.213Z
description: GitHub Projectã‚’ä½¿ã£ãŸToDoç®¡ç†ã§ã¡ã‚‡ã£ã¨ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã™ã‚‹ã“ã¨ã§å¤§å¹…ã«ä½¿ã„ã‚„ã™ããªã£ãŸã®ã§ãã®ã”ç´¹ä»‹ã€‚
tags:
  - GitHub
  - GitHubActions
  - ToDo
headerImage: https://i.imgur.com/LnpjYNN.png
templateKey: blog-post
---
ã‚ã‘ã¾ã—ã¦ãŠã‚ã§ã¨ã†ã”ã–ã„ã¾ã™ã€‚

## Table of Contents

```toc

```

## ToDoæ›¸ã„ã¦ç”Ÿç”£çš„ãªç”Ÿæ´»ã«ãªã‚ã†

ã‚ã‘ã¾ã—ã¦ãŠã‚ã§ã¨ã†ã”ã–ã„ã¾ã™ãƒ¼ã€‚æ˜¨å¹´ã¯è‰²ã€…ãªäººã«ãŠä¸–è©±ã«ãªã‚Šã¾ã—ãŸã®ã§ä»Šå¹´ã¯äººã«è²¢çŒ®ã—ã¦ã„ããŸã„ã¨æ€ã£ã¦ã„ã‚‹ç­†è€…ã§ã™ã€‚

ãã®ãŸã‚ã«ã‚‚æ™‚é–“ã®æ»å‡ºãŒé‡è¦ã«ãªã£ã¦ãã‚‹ã‹ã¨æ€ã„ã¾ã™ãŒã€ã‚ˆã‚Šç”Ÿç”£æ€§ã®é«˜ã„æ—¥å¸¸ã‚’é€ã‚‹ãŸã‚ã«ã¯ã‚„ã¯ã‚Š**ToDoãƒªã‚¹ãƒˆ**ãªã®ã§ã¯ãªã„ã§ã—ã‚‡ã†ã‹ï¼Ÿ

ã¿ãªã•ã‚“ã€**ToDoãƒªã‚¹ãƒˆ**ã€ä½¿ã£ã¦ã¾ã™ã‹ï¼Ÿ

ã‹ã‚Œã“ã‚Œç­†è€…ã¯ã€ä½•åº¦ã‚‚ToDoãƒªã‚¹ãƒˆã‚’ä½œã£ã¦ç”Ÿç”£çš„ãªç”Ÿæ´»ã‚’é€ã‚ã†ã¨ã—ã¦ã¾ã™ãŒã€ã†ã¾ãã„ã£ãŸè©¦ã—ãŒã‚ã‚Šã¾ã›ã‚“ã€‚

ãã‚“ãªç­†è€…ãŒãªãœToDoãƒªã‚¹ãƒˆãŒç¶šã‹ãªã„ã®ã‹ã‚’åˆ†æã—è‡ªåˆ†ã«ã´ã£ãŸã‚Šã®ToDoã‚¢ãƒ—ãƒªã‚’ä½œã‚Šã€é‹ç”¨ã—ã¾ã™ã€‚

ã“ã®ã¾ã¾ã ã¨**èƒ¡æ•£è‡­ã„ãƒ“ã‚¸ãƒã‚¹æ›¸ã¿ãŸã„ãª**å®£ä¼æ–‡å¥ã«ãªã£ã¦ã—ã¾ã£ã¦ã¾ã™ãŒã€å®‰å¿ƒã—ã¦ãã ã•ã„ã€‚ãã‚“ãªã«èƒ¡æ•£è‡­ã„å†…å®¹ã¯å‡ºã¦ã“ãªã„ã¯ãšã§ã™ã€‚(ã»ã¼GitHub Actionsã®Tipsã¿ãŸã„ãªè¨˜äº‹ã§ã™ã€‚)

## æœ€å¼·ã®ToDoãƒªã‚¹ãƒˆã¨ã¯ï¼Ÿ

ã¾ãšã¯ã€ä¸–ã®ä¸­ã®ToDoãƒªã‚¹ãƒˆã‚¢ãƒ—ãƒªã«ã¤ã„ã¦åˆ†æã—ã¦ã„ãã¾ã—ã‚‡ã†ã€‚

ä¸–ã®ä¸­ã«ã¯ç‰çŸ³æ··äº¤ã®ToDoãƒªã‚¹ãƒˆã‚¢ãƒ—ãƒªã§æº¢ã‚Œã‹ãˆã£ã¦ã¾ã™ãŒã€ç­†è€…ãŒæ€ã†ã«**ãƒã‚¤ãƒ†ã‚£ãƒ–ã‚¢ãƒ—ãƒªå°‚ç”¨ã®ToDoãƒªã‚¹ãƒˆ**ã¯ã¾ãšé–‹ã‹ãªããªã‚Šã¾ã™ã€‚

ãã‚‚ãã‚‚ãƒ‘ã‚½ã‚³ãƒ³ã§ä»•äº‹ã—ã¦ã‚‹ã‚±ãƒ¼ã‚¹ãŒå¤šã„ã®ã§ãƒ‘ã‚½ã‚³ãƒ³ã§ã‚‚ã‚¹ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ³ã§ã‚‚æ“ä½œã§ããªã„ã¨ä½¿ã‚ãªããªã‚Šã¾ã™ã€‚ãã‚Œã«ã‚¹ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ³é–‹ã„ãŸã‚‰Twitterè¦‹ã¡ã‚ƒã†ã§ã—ã‚‡ã€‚

ã¾ãŸã€ã‚¿ã‚¹ã‚¯æœŸæ—¥ã‚„ä¾å­˜é–¢ä¿‚ã€ã‚«ãƒ†ã‚´ãƒªã€ã‚¿ã‚°ãªã©ã€1ã¤ã®ToDoã‚’æ›¸ããŸã‚ã«ã‚„ãŸã‚‰è¨˜è¼‰æ¬„ãŒå¤šã„ToDoã‚¢ãƒ—ãƒªã‚‚é©å½“ã«ãªã‚ŠãŒã¡ãªã§ãŠã™ã™ã‚ã§ãã¾ã›ã‚“ã€‚å¾Œã€…ã®æŒ¯ã‚Šè¿”ã‚Šåˆ†æãªã‚“ã‹ã«ã¯ã„ã„ã‚“ã§ã™ãŒã€ã‚ã‚“ã©ãã•ã„ã§ã™ã‚ˆã­ã€‚

ã¾ãŸã‚¿ã‚¹ã‚¯ã®æœŸæ—¥ã«å¿œã˜ãŸãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼æ©Ÿèƒ½ãŒã‚ã‚‹ã¨ç¶šã‘ã‚‹æ°—ã«ãªã‚Šãã†ã§ã™ã€‚ãŸã ã€ãƒªãƒã‚¤ãƒ³ãƒ‰ã¯Slackã«é€ã‚‰ãªã„ã¨æ„å‘³ãŒã‚ã‚Šã¾ã›ã‚“ã€‚Gmailã¯ã¾ãšè¦‹ã¾ã›ã‚“ã€‚

ã¾ã¨ã‚ã‚‹ã¨ã€

1. ãƒ‘ã‚½ã‚³ãƒ³ã§ã‚‚ã‚¹ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ³ã§ã‚‚ä½¿ãˆã‚‹
2. å…¥åŠ›æ¬„ãŒã‚·ãƒ³ãƒ—ãƒ«(ã‚ã‹ã‚Šãã£ã¦ã„ã‚‹ã“ã¨ã¯è‡ªå‹•ã§å…¥åŠ›ã—ã¦ã»ã—ã„)
3. ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼ãŒã‚ã‚‹(Slack)

ã¨ãªã‚Šã¾ã™ã€‚

## é¸ã°ã‚ŒãŸã®ã¯GitHub Projectã§ã—ãŸã€‚

ã¨ã„ã†ã“ã¨ã§ä»Šå›ç§ã«é¸ã°ã‚ŒãŸã®ã¯[GitHub Project](https://docs.github.com/ja/issues/organizing-your-work-with-project-boards/managing-project-boards/about-project-boards)ã§ã—ãŸã€‚

ãˆï¼Ÿã€€ãã‚Œã£ã¦**ã‚«ãƒ³ãƒãƒ³ã§ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç®¡ç†ã™ã‚‹ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢é–‹ç™ºã®ã‚¿ã‚¹ã‚¯ç®¡ç†ãƒ„ãƒ¼ãƒ«**ã§ã—ã‚‡ï¼Ÿã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã‹ãªã„ã‚ˆã†ãªå€‹äººã®ToDoã«ä½¿ãˆã‚‹ã®ï¼Ÿã¨æ€ã£ãŸã‚ãªãŸã€‚

**ãã®é€šã‚Šã§ã™ã€‚ä½¿ãˆã¾ã›ã‚“ã€‚**

**ãã®ã¾ã¾ã§ã¯ä½¿ã„å‹æ‰‹ãŒæ‚ªã™ãã¾ã™ã€‚**

ãŒã€GitHub Projectã«ã¯**GitHub Actions**ã¨ã„ã†æœ€å¼·ã®CIãŒã¤ã„ã¦ã¾ã™ã®ã§ã“ã¡ã‚‰ã‚’ä½¿ã†ã“ã¨ã§åŠ‡çš„ã«ä½¿ã„ã‚„ã™ã„ToDoã‚¢ãƒ—ãƒªã«ãªã‚Šã¾ã™ã€‚

ã¾ãšã€GitHub Projectã¯ãƒ‘ã‚½ã‚³ãƒ³ã§ã‚‚ã‚¹ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ³ã§ã‚‚åˆ©ç”¨å¯èƒ½ãªã®ã§ã€ä½•ã‚‚å®Ÿè£…ã—ãªãã¦ã‚‚ **1. ãƒ‘ã‚½ã‚³ãƒ³ã§ã‚‚ã‚¹ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ³ã§ã‚‚ä½¿ãˆã‚‹** ã¯ã‚¯ãƒªã‚¢ã¨ãªã‚Šã¾ã™ã€‚ã‚ã‚ŠãŒãŸã„ã€‚

ä»Šå›ã¯GitHub Issueã‚’åŸºè»¸ã«é‹ç”¨ã—ãŸã„ã®ã§Projectã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã¯[Automated Kanban](https://docs.github.com/ja/issues/organizing-your-work-with-project-boards/managing-project-boards/about-project-boards#templates-for-project-boards)ã‚’é¸æŠã—ã¾ã—ãŸã€‚ã“ã‚Œã§ã€**IssueãŒã‚¯ãƒ­ãƒ¼ã‚ºã•ã‚ŒãŸéš›ã«Projectå´ã§ã‚‚ã‚¿ã‚¹ã‚¯ã‚’å‹æ‰‹ã«Done**ã«ã—ã¦ãã‚Œã¾ã™ã€‚

![img](https://i.imgur.com/fWMy7hV.png)

## ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º1 Issueã¨Projectã‚’è‡ªå‹•ã§ç´ã¥ã‘ã‚‹

GitHub Projectã¯GitHub IssueãŠã‚ˆã³Pull Requestã¨ç´ã¥ã‘ã—ã¦é‹ç”¨ã§ãã‚‹ã®ã§ã™ãŒã€**Issueã‚’åˆ‡ã£ãŸéš›ã«Projectã®ToDoã«è‡ªå‹•ç´ã¥ã‘ã•ã‚Œã¾ã›ã‚“ã€‚** (Automated Kanbanã§ã¯Issue Closeã§Doneã«ã—ã¦ãã‚Œã‚‹ã®ã«é€†ã®ã“ã¨ã¯ã—ã¦ãã‚Œãªã„ã‚“ã ...)

Issueã‚’åˆ‡ã£ãŸéš›**æ‰‹å‹•**ã§ã€æŒ‡å®šã—ãŸProjectã«ç´ã¥ã‘ã‚’è¡Œãªã†å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚1ã¤ã®Repositoryã«å¯¾ã—ã¦è¤‡æ•°ã®ProjectãŒå­˜åœ¨ã™ã‚‹ã‚±ãƒ¼ã‚¹ãŒã‚ã‚‹ã®ã§ã‚ã‚‹æ„å‘³ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢é–‹ç™ºçš„ã«ã¯æ­£å½“ãªå‹•ãã¨æ€ã„ã¾ã™ãŒã€å€‹äººToDoã«ã¯è·ãŒé‡ã™ãã¾ã™ã€‚ã‚ã–ã‚ã–æ¯å›æ‰‹å‹•ã§ç´ã¥ã‘ã‚‹ã®ã¯ã¤ã‚‰ã™ãã¾ã™ã€‚

ãã“ã§åƒ•ã¯GitHub Actionsã€‚ (ã‚‚ã“ã¿ã¡é¢¨)

ã¡ã‚‡ã£ã¨Webä¸Šã§æ¢ã—ãŸã¨ã“ã‚ã€ãªã‚“ã¨ã™ã§ã«[alex-page/github-project-automation-plus](https://github.com/marketplace/actions/github-project-automation)ã¨ã„ã†ä¾¿åˆ©ãªActionsãŒç”¨æ„ã•ã‚Œã¦ã„ã‚‹ã®ã§ã€ã“ã¡ã‚‰ã‚’GitHub Actionsã§ä½¿ãˆã°ã‹ã‚“ãŸã‚“ã«å®Ÿç¾ã§ãã¾ã™ã€‚ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ã€‚

```yaml
name: Move new issues into MyToDo
on:
  issues:
    types: [opened]

jobs:
  automate-project-columns:
    runs-on: ubuntu-latest
    steps:
      - uses: alex-page/github-project-automation-plus@v0.3.0
        with:
          project: MyToDo
          column: To do
          repo-token: ${{ secrets.GH_TOKEN }}
```

ä½¿ã„æ–¹ã¯å…¬å¼ã®READMEã‚’è¦‹ã¦ã‚‚ã‚‰ãˆã‚Œã°ã¨æ€ã„ã¾ã™ãŒã€ãƒã‚¤ãƒ³ãƒˆã¨ã—ã¦ã¯ã€onå¥ã«ã¯Issueã®Openã‚’æŒ‡å®šã™ã‚‹ã“ã¨ã¨repo-tokenã¯GitHub Actionsã§ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ä½¿ãˆã‚‹**secrets.GITHUB_TOKEN**ã ã¨Projectã®æ“ä½œæ¨©é™ãŒãªã„ã®ã§**admin:orgã®R/Wæ¨©é™**ã‚’ã¤ã‘ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

(å°‚ç”¨ã«[PAT](https://docs.github.com/ja/authentication/keeping-your-account-and-data-secure/creating-a-personal-access-token)ã‚’å†ç™ºè¡Œã—ã¦secretsã«è¨­å®šã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚)

ã“ã‚Œã§ã€New Issueã‹ã‚‰Issueã‚’åˆ‡ã‚‹ã ã‘ã§ã€Projectç®¡ç†ãŒã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸï¼

## ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º2 ãƒ©ãƒ™ãƒ«ã‚’æ´»ç”¨ã™ã‚‹

GitHub Issues, Projectã«ã¯[Label](https://docs.github.com/ja/issues/using-labels-and-milestones-to-track-work/managing-labels)ã¨ã„ã†æ¦‚å¿µãŒã‚ã‚Šã¾ã™ã€‚

ã‚ˆãã€Bugã¨ã‹Featureã¨ã‹ã¤ã„ã¦ã„ã‚‹ã‚ã‚Œã§ã™ã€‚

![label](https://i.imgur.com/zeWmlIk.png)

ã“ã‚Œã‚’ToDoã«æ´»ç”¨ã™ã‚‹ã“ã¨ã§ToDoç®¡ç†ã‚’ã‚„ã‚Šã‚„ã™ãã—ã¾ã™ã€‚

![img](https://i.imgur.com/RsOQAlV.png)

ã“ã®ã‚ˆã†ã«Labelç®¡ç†ã™ã‚‹ã“ã¨ã§ã€ã‚¿ã‚¹ã‚¯ã®å„ªå…ˆåº¦ã‚„ä½œæ¥­å ´æ‰€ã®ã‚«ãƒ†ã‚´ãƒ©ã‚¤ã‚ºã‚’è¡Œãªã„ã‚„ã™ãã§ãã¾ã—ãŸï¼

## ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º3 æœŸæ—¥ã‚’ç®¡ç†ã—ãŸã„

ã‚ã‚‹æ„å‘³GitHub Project ToDoã‚¢ãƒ—ãƒªåˆ©ç”¨æœ€å¤§ã®æ¬ ç‚¹ã ã¨ãŠã‚‚ã„ã¾ã™ãŒã€**æœŸæ—¥ã®ç®¡ç†**ãŒã‚„ã‚Šã«ãã„ã§ã™ã€‚

ä¸€å¿œMilestoneã¨ã„ã†æ©Ÿèƒ½ã‚’ä½¿ã£ã¦ãƒªãƒªãƒ¼ã‚¹æ—¥ã‚’è¨­å®šã—ã€ãã¡ã‚‰ã«Issueã‚’ç´ã¥ã‘ã‚‹ã“ã¨ã§ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç®¡ç†ãŒã§ãã‚‹ã‚ˆã†ã«ãªã£ã¦ãŠã‚Šã¾ã™ãŒã€**Milestoneã‚’æ¯å›ä½œã£ã¦ç´ã¥ã‘ã‚‹**ã®ã¯ã¨ã¦ã‚‚å¤§å¤‰ã§ã™ã€‚(ã‚„ã¯ã‚ŠGitHub Actionsã§ToDoç®¡ç†ã¯ç„¡ç†ãŒã‚ã£ãŸã¨æ„Ÿã˜ã–ã‚‹ã‚’å¾—ã¾ã›ã‚“ã€‚)

![img](https://i.imgur.com/ZXzTyx3.png)

Milestoneã‚’è¨­å®šã•ãˆã™ã‚Œã°ã€æœŸæ—¥è¡¨ç¤ºãŒã§ãã¾ã™ã—å¾Œã€…å®Ÿæ–½ã—ã‚ˆã†ã¨æ€ã£ã¦ã„ã‚‹ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼ã«ã‚‚æ´»ç”¨ã§ããã†ã§ã™ã€‚

ä»Šå›ã¯ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º2ã§å°‚ç”¨ã®æœŸé™Labelã‚’ä½œã£ãŸã®ã§ã“ã¡ã‚‰ã‚’æ´»ç”¨ã—ã¦ã„ãã¾ã™ã€‚

æ¬¡ã®ã‚ˆã†ãªãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚’è€ƒãˆã¾ã™ã€‚

1. æœŸé™Labelã‚’ã¤ã‘ã‚‹
2. Labelã‚’ã¤ã‘ãŸæ™‚åˆ»ã‹ã‚‰ãƒ©ãƒ™ãƒ«ã®å¯¾è±¡æœŸé™ã‚’ç®—å‡ºã—ã€Milestoneã‚’ä½œã‚‹
3. ä½œã£ãŸMilestoneã‚’Issueã«ã¤ã‘ã‚‹

ã§ã€ã“ã‚Œã‚‚GitHub Actionsã§ä½œã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

ä»Šå›ã¯ã¡ã‚‡ã£ã¨å‹‰å¼·ã®ãŸã‚ã«[actions/github-script](https://github.com/marketplace/actions/github-script)ã‚’ä½¿ã£ã¦å®Ÿè£…ã—ã¾ã—ãŸã€‚

GitHub Scriptã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§GitHubã®Contextã‚„Eventã‚’å–å¾—ã€Issueã‚„Milestoneã‚’æ›´æ–°ã§ãã‚‹[Octokit](https://octokit.github.io/rest.js/v18)ãŒimportä¸è¦ã§ãã®ã¾ã¾ä½¿ãˆã‚‹ã®ã§ã‹ãªã‚Šä¾¿åˆ©ãªã®ã§ã™ãŒã€GitHub Actionsã®YAMLä¸Šã§ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ãã“ã¨ã«ãªã‚Šã€YAMLä¸Šã§ã¯GitHub Script(JavaScript)ã®**ã‚¨ãƒ‡ã‚£ã‚¿ãƒ¼ã®è£œå®Œ**ãŒåŠ¹ã‹ãšé–‹ç™ºä½“é¨“ãŒæ‚ªã™ãã¦ç™ºç‹‚ä»•æ›ã‘ãŸã®ã§è¤‡é›‘ãªå®Ÿè£…ã‚’ã™ã‚‹ã¨ãã¯ã¾ã˜ã§åˆ©ç”¨ã‚’ãŠã™ã™ã‚ã—ã¾ã›ã‚“!!!æ™®é€šã«ã‚¹ã‚¯ãƒªãƒ—ãƒˆæ›¸ã„ã¦checkoutã—ãŸã»ã†ãŒãƒã‚·ã§ã™ã€‚

ã‚ã¨ã€GitHub Scriptã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãŒå°‘ãªã™ãã§ã™ã€‚

ãªã‚“ã®APIãŒã‚ã‚‹ã®ã‹ã¾ã‚‹ã§ã‚ã‹ã‚Šã¾ã›ã‚“ã€‚[Octokit](https://octokit.github.io/rest.js/v18)ã®APIã¨åŒã˜ã ã‚ã†ã¨æ€ã£ã¦ä½¿ãŠã†ã¨ã™ã‚‹ã¨ãã‚“ãªãƒ¡ã‚½ãƒƒãƒ‰ã‚ã‚Šã¾ã›ã‚“ã‚¨ãƒ©ãƒ¼å‡ºã‚‹ã—ã„ã¡ã„ã¡ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’console.logã—ã¦å®Ÿè£…ã•ã‚Œã¦ã„ã‚‹ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ç¢ºèªã™ã‚‹ä½œæ¥­ã§æ™‚é–“ã‚’æµªè²»ã—ã¾ã—ãŸ...ã€‚

```yaml
name: Create Milestone For Labeled
on:
  issues:
    types:
      - labeled

jobs:
  create_milestone:
    runs-on: ubuntu-latest
    steps:
      - name: create milestone
        uses: actions/github-script@v3
        with:
          github-token: ${{ secrets.GH_TOKEN }}
          script: |
            const label = context.payload.label.name
            const date = new Date(Date.now() + ((new Date().getTimezoneOffset() + (9 * 60)) * 60 * 1000));
            const nextDayOffset = 7 - date.getDay()
            let due_on
            let endDate
            if(label.indexOf('Today') !== -1) {
              due_on = date.toISOString()
              endDate = (date.getFullYear()) + "/" + (date.getMonth() + 1) + "/" + date.getDate()
            } else if(label.indexOf('Tommorrow') !== -1) {
              date.setDate(date.getDate() + 1)
              due_on = date.toISOString()
              endDate = (date.getFullYear()) + "/" + (date.getMonth() + 1) + "/" + date.getDate()
            } else if(label.indexOf('NextWeekend') !== -1) {
              date.setDate(date.getDate() + 7 + nextDayOffset)
              due_on = date.toISOString()
              endDate = (date.getFullYear()) + "/" + (date.getMonth() + 1) + "/" + date.getDate()
            } else if(label.indexOf('Weekend') !== -1) {
                date.setDate(date.getDate() + nextDayOffset)
                due_on = date.toISOString()
                endDate = (date.getFullYear()) + "/" + (date.getMonth() + 1) + "/" + date.getDate()
            } else if(label.indexOf('NextMonth') !== -1) {
              date.setDate(date.getDate() + 30)
              due_on = date.toISOString()
              endDate = (date.getFullYear()) + "/" + (date.getMonth() + 1) + "/" + date.getDate()
            } else {
              // nothing to do
              return
            }
            let milestoneNumber
            try {
              const result = await github.issues.createMilestone({
              owner: context.repo.owner,
              repo: context.repo.repo,
              title: endDate,
              due_on: due_on,
              description: endDate + 'ã¾ã§ã«ç‰‡ä»˜ã‘ã‚‹'
              })
              milestoneNumber = result.data.number
            } catch(e) {
              console.log(e)
              if (e && e.errors && e.errors[0].resource === 'Milestone' && e.errors[0].code === 'already_exists') {
                console.log('skip create milestone')
                const resp = await github.issues.listMilestones({
                  owner: context.repo.owner,
                  repo: context.repo.repo,
                  sort: 'due_on',
                  direction: 'desc',
                  per_page: 100,
                })
                if (resp.data.filter(m => m.title === endDate).length !== 0) {
                  milestoneNumber = resp.data.filter(m => m.title === endDate)[0].number
                } else {
                  console.log(resp)
                }
              } else {
                console.log(e)
                throw(e)
              }
            }
            await github.issues.update({
              owner: context.repo.owner,
              repo: context.repo.repo,
              issue_number: context.issue.number,
              milestone: milestoneNumber,
            })
```

ã‹ãªã‚Šæ„šç›´ã§ã™ãŒã€onå¥ã§IssueãŒlabeledã®éš›ã«Labelåã‚’å–å¾—ã—ã€ToDayã¨ã‹NextWeekendã¨ã‹ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’æ‹¾ã„ä¸Šã’ç¾åœ¨æ™‚åˆ»ã‹ã‚‰MilestoneæœŸé™ã‚’ç®—å‡ºã—ã¾ã™ã€‚

ãã®å¾Œä½œæˆã—ãŸMilestoneã‚’Issueã«ç´ã¥ã‘ã‚‹ã‚ã‘ã§ã™ãŒã€ã™ã§ã«åŒåã®Milestoneã‚’ä½œæˆã—ã¦ã„ã‚‹ã¨ãã€ã¤ã¾ã‚ŠåŒä¸€æ—¥ã®æœŸé™ã‚¿ã‚¹ã‚¯ã‚’ã™ã§ã«ä½œã£ã¦ã„ã‚‹å ´åˆã‚‚ã‚ã‚‹ã®ã§ãã“ã‚‰ã¸ã‚“ã®ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ãŒã‚„ã‚„ã“ã—ã„æ„Ÿã˜ã«ãªã£ã¦ã„ã¾ã™ã€‚

ç¹°ã‚Šè¿”ã—ã«ãªã‚Šã¾ã™ãŒã€**10è¡Œä»¥ä¸Šã®å‡¦ç†ã‚’è¨˜è¼‰ã™ã‚‹ã¨ãã¯GitHub Scriptä½¿ã‚ãšã€ãã£ã¡ã‚Šå®Ÿè£…ã—ãŸã»ã†ãŒè‰²ã€…å¹¸ã›ã«ãªã‚Œã¾ã™ã€‚**

ã¨ã‚‚ã‹ãã€ã“ã®GitHub Actionsã®ãŠã‹ã’ã§æœŸé™ãƒ©ãƒ™ãƒ«ã‚’è¨­å®šã™ã‚‹ã ã‘ã§ã€Milestoneã‚‚è¨­å®šã•ã‚Œã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸï¼

### ä½™è«‡

ä½™è«‡ã§ã™ãŒã€ä¸Šè¨˜ã®ã‚³ãƒ¼ãƒ‰ã€elseã«ä½•ã‚‚ã—ãªã„ã£ã¦ã‚³ãƒ¡ãƒ³ãƒˆã—ã¦ã„ã‚‹ã®ã«returnã—ã¦ã¾ã™ã­ã€‚ğŸ’¦ğŸ’¦ğŸ’¦ğŸ’¦

```javascript
} else {
  // nothing to do
  return
}
```

<blockquote class="twitter-tweet"><p lang="ja" dir="ltr">ãªã‚“ã ã“ã‚Œ <a href="https://t.co/SyHgBW3VAp">pic.twitter.com/SyHgBW3VAp</a></p>&mdash; K.Saito (@SightSeekerTw) <a href="https://twitter.com/SightSeekerTw/status/1479362069422292992?ref_src=twsrc%5Etfw">January 7, 2022</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>

ã¨ã„ã†Tweetã‚‚è©±é¡Œã«ãªã‚Šã¾ã—ãŸãŒã€çµæ§‹è‡ªåˆ†ã¯ä½•ã‚‚ã—ãªã„elseæ›¸ã„ãŸã‚Šã—ã¾ã™ã€‚ãŒãã“ã‚‰ã¸ã‚“ã®è­°è«–ã¯å®—æ•™æˆ¦äº‰ãªã®ã§ãªã‚“ã¨ã‚‚ç©ã‚„ã‹ã«ã„ããŸã„ã‚‚ã®ã§ã™ã€‚

ä»Šå›ã®ç§ã®å®Ÿè£…ã¯returnã—ã¦ã„ã‚‹ã®ã§ã‚³ãƒ¡ãƒ³ãƒˆã‹ã‚‰ã—ã¦ã ã‚ã§ã™ã‘ã©ã­..ã€‚

## ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º4 æºœã¾ã£ã¦ã—ã¾ã£ãŸMilestoneã‚’å®šæœŸçš„ã«Closeã™ã‚‹

ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º3ã§æœŸé™ã‚¿ã‚¹ã‚¯ãŒç™ºç”Ÿã™ã‚‹ãŸã³ã«Milestoneã‚’ä½œã‚‹é‹ç”¨ã«ã—ã¦ã—ã¾ã£ãŸã“ã¨ã§ã€Milestoneã«éå»ã®ä¸è¦ãªæ—¥ä»˜ã®ã‚‚ã®ãŒOpenã—ç¶šã‘ã‚‹çŠ¶æ…‹ã«ãªã£ã¦ã—ã¾ã„ã¾ã—ãŸã€‚

è¦–èªæ€§ã‚‚æ‚ªãç²¾ç¥è¡›ç”Ÿä¸Šã‚‚æ‚ªã„ã®ã§ã€æœŸæ—¥ã‚’éãã¦ã„ã¦ã‹ã¤ã€ç´ã¥ãã‚¿ã‚¹ã‚¯ã™ã¹ã¦Doneã«ãªã£ã¦ã„ã‚‹Milestoneã¯è‡ªå‹•çš„ã«Closeã™ã‚‹ã‚ˆã†ã«ã—ã¾ã™ã€‚

ã“ã¡ã‚‰ã‚‚GitHub Actionsã§å®Ÿè£…ã—ã¾ã™ã€‚ãŸã ã—ã€ä»Šå›ã¯å‰å›ã®åçœã‚’æ´»ã‹ã—[actions/github-script](https://github.com/marketplace/actions/github-script)ã¯ä½¿ã„ã¾ã›ã‚“ã€‚Pythonã§ä½œã‚Šã¾ã—ãŸã€‚

ã¾ãšã¯Pythonã®ã‚³ãƒ¼ãƒ‰ã§ã™ãŒã€GitHubã¸ã®ã‚¢ã‚¯ã‚»ã‚¹ã¯[PyGithub](https://github.com/PyGithub/PyGithub)ã‚’ä½¿ã„ã¾ã—ãŸã€‚

```python
import os
from datetime import datetime, timedelta
from github import Github

ACCESS_TOKEN = os.getenv("GITHUB_TOKEN")
REPO = os.getenv("GITHUB_REPOSITORY")
g = Github(ACCESS_TOKEN)

repo = g.get_repo(REPO)
open_milestones = repo.get_milestones(state="open")
yesterday = datetime.now() - timedelta(days=1)

should_close_milestone = []
for milestone in open_milestones:
    print(milestone)
    if milestone.due_on < yesterday and milestone.open_issues == 0:
        should_close_milestone.append(milestone)
        milestone.edit(title=milestone.title, state="closed")

print(should_close_milestone)
```

ã¨ã„ã£ãŸæ„Ÿã˜ã§openã—ã¦ã„ã‚‹milestoneã‚’å–å¾—ã—ã¦ã€æ˜¨æ—¥ã¾ã§ã®æœŸæ—¥ã®Milestoneã§openã—ã¦ã„ã‚‹IssueãŒ0ä»¶ã®ã‚‚ã®ã‚’closedã«ã—ã¦ã„ãã‚·ãƒ³ãƒ—ãƒ«ã‚¹ã‚¯ãƒªãƒ—ãƒˆã§ã™ã€‚

GitHub Scriptã«æ¯”ã¹ã¦ã€IDEã§å‹ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ãŒåŠ¹ã„ã¦ãŠã‚Šã€é–‹ç™ºä½“é¨“ã‚ˆã‹ã£ãŸã§ã™ã€‚

æ¬¡ã«GitHub Actionsã§ã™ãŒãŸã on scheduleã§ã“ã¡ã‚‰ã®Pythonã‚’å®Ÿè¡Œã—ã¦ã„ã‚‹ã ã‘ãªã®ã§è²¼ã‚Šä»˜ã‘ã¯å‰²æ„›ã—ã¾ã™ã€‚

## ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º5 æ—¥å ±&ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼æ©Ÿèƒ½ã®ä½œæˆ

ã•ã¦ã€ãƒ©ã‚¹ãƒˆã«ãªã‚Šã¾ã—ãŸãŒãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼æ©Ÿèƒ½ã‚’ä½œã£ã¦ã„ãã¾ã™ã€‚

ã“ã¡ã‚‰ã¡ã‚‡ã£ã¨è¶£å‘ã‚’å‡ã‚‰ã—ã¦**æ—¥å ±&ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼**ã«ã™ã‚‹ã“ã¨ã«ã—ã¾ã—ãŸã€‚

ä¸€æ—¥ä¸€å›ã€Markdownå½¢å¼ã§æ—¥å ±ã‚’ä½œã‚Šãƒ¬ãƒã‚¸ãƒˆãƒªã«pushã™ã‚‹ã¨åŒæ™‚ã«Slacké€šçŸ¥ã—æ—¥å ±ã®ä¸­ã«æ˜æ—¥æœŸé™ã®ã‚¿ã‚¹ã‚¯ã‚‚åˆã‚ã›ã¦è¨˜è¼‰ã™ã‚‹ã€ã¨ã„ã†æ–¹æ³•ã‚’æ¡ç”¨ã—ã¾ã—ãŸã€‚


```python
import os
from datetime import datetime, timedelta
import string
from github import Github
import requests
import json

TEMPLATE = """# ${date} ã®æ—¥å ±
## ã‚„ã£ãŸã“ã¨
${today_closed_issues_string}
## ä»Šæ—¥ã‚„ã‚ã†ã¨æ€ã£ãŸã“ã¨
${today_open_issues_string}
## æ˜æ—¥ã¾ã§ã«ã‚„ã‚‰ãªã„ã¨ã„ã‘ãªã„ã“ã¨
${tommorrow_due_to_issues_string}
"""

TEMPLATE_SLACK = """*${date} ã®æ—¥å ±*
*ã‚„ã£ãŸã“ã¨*
${today_closed_issues_mrkdwn_string}
*ä»Šæ—¥ã‚„ã‚ã†ã¨æ€ã£ãŸã“ã¨*
${today_open_issues__mrkdwn_string}
*æ˜æ—¥ã¾ã§ã«ã‚„ã‚‰ãªã„ã¨ã„ã‘ãªã„ã“ã¨*
${tommorrow_due_to_issues__mrkdwn_string}
"""

ACCESS_TOKEN = os.getenv("GITHUB_TOKEN")
REPO = os.getenv("GITHUB_REPOSITORY")
SLACK_WEB_HOOK = os.environ.get("SLACK_WEB_HOOK")
g = Github(ACCESS_TOKEN)

repo = g.get_repo(REPO)
open_issues = repo.get_issues(state="open")
closed_issues = repo.get_issues(state="closed")
today = datetime.now()
tommorrow = datetime.now().replace(hour=0, minute=0, second=0, microsecond=0) + timedelta(days=2)

today_closed_issues = []
today_open_issues = []
due_to_issues = []
today_closed_mrkdwn_issues = []
today_open_mrkdwn_issues = []
due_to_mrkdwn_issues = []
for issue in closed_issues:
    if issue.closed_at.strftime("%Y-%m-%d") == today.strftime("%Y-%m-%d"):
        today_closed_issues.append(f"[{issue.title}]({issue.html_url})")
        today_closed_mrkdwn_issues.append(f"<{issue.html_url}|{issue.title}>")
for issue in open_issues:
    print(issue)
    if issue.created_at.strftime("%Y-%m-%d") == today.strftime("%Y-%m-%d"):
        today_open_issues.append(f"[{issue.title}]({issue.html_url})")
        today_open_mrkdwn_issues.append(f"<{issue.html_url}|{issue.title}>")
    if issue.milestone is not None:
        if issue.milestone.due_on < tommorrow:
            due_to_issues.append(f"[{issue.title}]({issue.html_url})")
            due_to_mrkdwn_issues.append(f"<{issue.html_url}|{issue.title}>")
template_text = string.Template(TEMPLATE)
result = template_text.safe_substitute(
    {"date": today.strftime("%Y-%m-%d"),
     "today_closed_issues_string": "- " + "\n- ".join(today_closed_issues),
     "today_open_issues_string": "- " + "\n- ".join(today_open_issues),
     "tommorrow_due_to_issues_string": "- " + "\n- ".join(due_to_issues),
     }
)

template_slack_text = string.Template(TEMPLATE_SLACK)
result_slack = template_slack_text.safe_substitute(
    {"date": today.strftime("%Y-%m-%d"),
     "today_closed_issues_mrkdwn_string": "* " + "\n* ".join(today_closed_mrkdwn_issues),
     "today_open_issues__mrkdwn_string": "* " + "\n* ".join(today_open_mrkdwn_issues),
     "tommorrow_due_to_issues__mrkdwn_string": "* " + "\n* ".join(due_to_mrkdwn_issues),
     }
)

os.makedirs(f"daily_report/{today.strftime('%Y')}/{today.strftime('%m')}", exist_ok=True)
with open(f"daily_report/{today.strftime('%Y')}/{today.strftime('%m')}/{today.strftime('%d')}.md", "w") as f:
    f.write(result)

payload = {"text": result_slack}
requests.post(SLACK_WEB_HOOK, json.dumps(payload))
```

å¤§ã—ãŸã“ã¨ã‚’ã‚„ã£ã¦ã„ãªã„ã‚¹ã‚¯ãƒªãƒ—ãƒˆãªã®ã§ã™ãŒã€GitHubã®Markdownã¨[Slackã®Markdown](https://slack.com/intl/ja-jp/help/articles/202288908-%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%81%AE%E6%9B%B8%E5%BC%8F%E8%A8%AD%E5%AE%9A)ãŒç•°ãªã£ã¦ãŠã‚Šã€å¦™ãªåˆ†å²ã‚’å…¥ã‚Œã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã—ãŸã€‚

GitHubã«pushã™ã‚‹ã“ã¨ã§Markdownã¨ã—ã¦æ—¥å ±ã‚’ç®¡ç†ã—ã¾ã™ã€‚

![img](https://i.imgur.com/KXALJYW.png)

ã¾ãŸã€Slackã¸ã®ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼ã‚‚å®Ÿæ–½ã—ã¾ã™ã€‚

![img](https://i.imgur.com/4petOz9.png)

ã“ã‚Œã§æ—¥å ±&ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼æ©Ÿèƒ½ã‚‚ã§ãã¾ã—ãŸã€‚

## ã¾ã¨ã‚

![img](https://i.imgur.com/LnpjYNN.png)

ã“ã‚Œã§å¿«é©ã«ToDoã‚’è¨˜è¼‰ã§ãã‚‹ã‚ˆã†ã«ãªã£ãŸã®ã§ã™ãŒã€è‚å¿ƒãªToDoãŒã‚ã¾ã‚Šãªã„ã®ã§ã“ã®ä»•çµ„ã¿ã‚’ã„ã¤ã¾ã§ä½¿ã„ç¶šã‘ã‚‹ã®ã‹ä¸å®‰ã«ãªã£ã¦ãã¾ã—ãŸã€‚
